<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>click</title>
    
    <link rel="stylesheet" href="_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    './',
        VERSION:     '1.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <link rel="top" title="None" href="index.html#document-index" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="welcome-to-the-click-documentation">
<h1>Welcome to the Click Documentation<a class="headerlink" href="#welcome-to-the-click-documentation" title="Permalink to this headline">¶</a></h1>
<p>Click is a Python package for creating beautiful command line interfaces
in a composable way with as little code as necessary.  It&#8217;s the &#8220;Command
Line Interface Creation Kit&#8221;.  It&#8217;s highly configurable but comes with
sensible defaults out of the box.</p>
<p>It aims to make the process of writing command line tools quick and fun
while also preventing any frustration caused by the inability to implement
an intended CLI API.</p>
<p>Click in three points:</p>
<ul class="simple">
<li>arbitrary nesting of commands</li>
<li>automatic help page generation</li>
<li>supports lazy loading of subcommands at runtime</li>
</ul>
<p>What does it look like?  Here is an example of a simple Click program:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Number of greetings.&#39;</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Your name&#39;</span><span class="p">,</span>
              <span class="n">help</span><span class="o">=</span><span class="s1">&#39;The person to greet.&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;Simple program that greets NAME for a total of COUNT times.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">hello</span><span class="p">()</span>
</pre></div>
</div>
<p>And what it looks like when run:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ python hello.py --count=3
Your name: John
Hello John!
Hello John!
Hello John!
</pre></div>
</div>
<p>It automatically generates nicely formatted help pages:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ python hello.py --help
Usage: hello.py [OPTIONS]

  Simple program that greets NAME for a total of COUNT times.

Options:
  --count INTEGER  Number of greetings.
  --name TEXT      The person to greet.
  --help           Show this message and exit.
</pre></div>
</div>
<p>You can get the library directly from PyPI:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">click</span>
</pre></div>
</div>
<div class="section" id="documentation-contents">
<h2>Documentation Contents<a class="headerlink" href="#documentation-contents" title="Permalink to this headline">¶</a></h2>
<p>This part of the documentation guides you through all of the library&#8217;s
usage patterns.</p>
<div class="toctree-wrapper compound">
<span id="document-why"></span><div class="section" id="why-click">
<h3>Why Click?<a class="headerlink" href="#why-click" title="Permalink to this headline">¶</a></h3>
<p>There are so many libraries out there for writing command line utilities;
why does Click exist?</p>
<p>This question is easy to answer: because there is not a single command
line utility for Python out there which ticks the following boxes:</p>
<ul class="simple">
<li>is lazily composable without restrictions</li>
<li>fully follows the Unix command line conventions</li>
<li>supports loading values from environment variables out of the box</li>
<li>supports for prompting of custom values</li>
<li>is fully nestable and composable</li>
<li>works the same in Python 2 and 3</li>
<li>supports file handling out of the box</li>
<li>comes with useful common helpers (getting terminal dimensions,
ANSI colors, fetching direct keyboard input, screen clearing,
finding config paths, launching apps and editors, etc.)</li>
</ul>
<p>There are many alternatives to Click and you can have a look at them if
you enjoy them better.  The obvious ones are <code class="docutils literal"><span class="pre">optparse</span></code> and <code class="docutils literal"><span class="pre">argparse</span></code>
from the standard library.</p>
<p>Click is actually implemented as a wrapper around a mild fork of
<code class="docutils literal"><span class="pre">optparse</span></code> and does not implement any parsing itself.  The reason it&#8217;s
not based on <code class="docutils literal"><span class="pre">argparse</span></code> is that <code class="docutils literal"><span class="pre">argparse</span></code> does not allow proper
nesting of commands by design and has some deficiencies when it comes to
POSIX compliant argument handling.</p>
<p>Click is designed to be fun to work with and at the same time not stand in
your way.  It&#8217;s not overly flexible either.  Currently, for instance, it
does not allow you to customize the help pages too much. This is intentional
because Click is designed to allow you to nest command line utilities.  The
idea is that you can have a system that works together with another system by
tacking two Click instances together and they will continue working as they
should.</p>
<p>Too much customizability would break this promise.</p>
<p>Click was written to support the <a class="reference external" href="http://flask.pocoo.org/">Flask</a>
microframework ecosystem because no tool could provide it with the
functionality it needed.</p>
<p>To get an understanding of what Click is all about, I strongly recommend
looking at the <a class="reference internal" href="index.html#complex-guide"><span class="std std-ref">Complex Applications</span></a> chapter to see what it&#8217;s useful for.</p>
<div class="section" id="why-not-argparse">
<h4>Why not Argparse?<a class="headerlink" href="#why-not-argparse" title="Permalink to this headline">¶</a></h4>
<p>Click is internally based on optparse instead of argparse.  This however
is an implementation detail that a user does not have to be concerned
with.  The reason however Click is not using argparse is that it has some
problematic behaviors that make handling arbitrary command line interfaces
hard:</p>
<ul class="simple">
<li>argparse has built-in magic behavior to guess if something is an
argument or an option.  This becomes a problem when dealing with
incomplete command lines as it&#8217;s not possible to know without having a
full understanding of the command line how the parser is going to
behave.  This goes against Click&#8217;s ambitions of dispatching to
subparsers.</li>
<li>argparse currently does not support disabling of interspersed
arguments.  Without this feature it&#8217;s not possible to safely implement
Click&#8217;s nested parsing nature.</li>
</ul>
</div>
<div class="section" id="why-not-docopt-etc">
<h4>Why not Docopt etc.?<a class="headerlink" href="#why-not-docopt-etc" title="Permalink to this headline">¶</a></h4>
<p>Docopt and many tools like it are cool in how they work, but very few of
these tools deal with nesting of commands and composability in a way like
Click.  To the best of the developer&#8217;s knowledge, Click is the first
Python library that aims to create a level of composability of applications
that goes beyond what the system itself supports.</p>
<p>Docopt, for instance, acts by parsing your help pages and then parsing
according to those rules.  The side effect of this is that docopt is quite
rigid in how it handles the command line interface.  The upside of docopt
is that it gives you strong control over your help page; the downside is
that due to this it cannot rewrap your output for the current terminal
width and it makes translations hard.  On top of that docopt is restricted
to basic parsing.  It does not handle argument dispatching and callback
invocation or types.  This means there is a lot of code that needs to be
written in addition to the basic help page to handle the parsing results.</p>
<p>Most of all, however, it makes composability hard.  While docopt does
support dispatching to subcommands, it for instance does not directly
support any kind of automatic subcommand enumeration based on what&#8217;s
available or it does not enforce subcommands to work in a consistent way.</p>
<p>This is fine, but it&#8217;s different from how Click wants to work.  Click aims
to support fully composable command line user interfaces by doing the
following:</p>
<ul class="simple">
<li>Click does not just parse, it also dispatches to the appropriate code.</li>
<li>Click has a strong concept of an invocation context that allows
subcommands to respond to data from the parent command.</li>
<li>Click has strong information available for all parameters and commands
so that it can generate unified help pages for the full CLI and to
assist the user in converting the input data as necessary.</li>
<li>Click has a strong understanding of what types are and can give the user
consistent error messages if something goes wrong.  A subcommand
written by a different developer will not suddenly die with a
different error messsage because it&#8217;s manually handled.</li>
<li>Click has enough meta information available for its whole program
that it can evolve over time to improve the user experience without
forcing developers to adjust their programs.  For instance, if Click
decides to change how help pages are formatted, all Click programs
will automatically benefit from this.</li>
</ul>
<p>The aim of Click is to make composable systems, whereas the aim of docopt
is to build the most beautiful and hand-crafted command line interfaces.
These two goals conflict with one another in subtle ways.  Click
actively prevents people from implementing certain patterns in order to
achieve unified command line interfaces.  You have very little input on
reformatting your help pages for instance.</p>
</div>
<div class="section" id="why-hardcoded-behaviors">
<h4>Why Hardcoded Behaviors?<a class="headerlink" href="#why-hardcoded-behaviors" title="Permalink to this headline">¶</a></h4>
<p>The other question is why Click goes away from optparse and hardcodes
certain behaviors instead of staying configurable.  There are multiple
reasons for this.  The biggest one is that too much configurability makes
it hard to achieve a consistent command line experience.</p>
<p>The best example for this is optparse&#8217;s <code class="docutils literal"><span class="pre">callback</span></code> functionality for
accepting arbitrary number of arguments.  Due to syntactical ambiguities
on the command line, there is no way to implement fully variadic arguments.
There are always tradeoffs that need to be made and in case of
<code class="docutils literal"><span class="pre">argparse</span></code> these tradeoffs have been critical enough, that a system like
Click cannot even be implemented on top of it.</p>
<p>In this particular case, Click attempts to stay with a handful of accepted
paradigms for building command line interfaces that can be well documented
and tested.</p>
</div>
<div class="section" id="why-no-auto-correction">
<h4>Why No Auto Correction?<a class="headerlink" href="#why-no-auto-correction" title="Permalink to this headline">¶</a></h4>
<p>The question came up why Click does not auto correct parameters given that
even optparse and argparse support automatic expansion of long arguments.
The reason for this is that it&#8217;s a liability for backwards compatibility.
If people start relying on automatically modified parameters and someone
adds a new parameter in the future, the script might stop working.  These
kinds of problems are hard to find so Click does not attempt to be magical
about this.</p>
<p>This sort of behavior however can be implemented on a higher level to
support things such as explicit aliases.  For more information see
<a class="reference internal" href="index.html#aliases"><span class="std std-ref">Command Aliases</span></a>.</p>
</div>
</div>
<span id="document-quickstart"></span><div class="section" id="quickstart">
<h3>Quickstart<a class="headerlink" href="#quickstart" title="Permalink to this headline">¶</a></h3>
<p>You can get the library directly from PyPI:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">pip</span> <span class="n">install</span> <span class="n">click</span>
</pre></div>
</div>
<p>The installation into a <a class="reference internal" href="#virtualenv"><span class="std std-ref">virtualenv</span></a> is heavily recommended.</p>
<div class="section" id="virtualenv">
<span id="id1"></span><h4>virtualenv<a class="headerlink" href="#virtualenv" title="Permalink to this headline">¶</a></h4>
<p>Virtualenv is probably what you want to use for developing Click
applications.</p>
<p>What problem does virtualenv solve?  Chances are that you want to use it
for other projects besides your Click script.  But the more projects you
have, the more likely it is that you will be working with different
versions of Python itself, or at least different versions of Python
libraries.  Let&#8217;s face it: quite often libraries break backwards
compatibility, and it&#8217;s unlikely that any serious application will have
zero dependencies.  So what do you do if two or more of your projects have
conflicting dependencies?</p>
<p>Virtualenv to the rescue!  Virtualenv enables multiple side-by-side
installations of Python, one for each project.  It doesn&#8217;t actually
install separate copies of Python, but it does provide a clever way to
keep different project environments isolated.  Let&#8217;s see how virtualenv
works.</p>
<p>If you are on Mac OS X or Linux, chances are that one of the following two
commands will work for you:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo easy_install virtualenv
</pre></div>
</div>
<p>or even better:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo pip install virtualenv
</pre></div>
</div>
<p>One of these will probably install virtualenv on your system.  Maybe it&#8217;s even
in your package manager.  If you use Ubuntu, try:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ sudo apt-get install python-virtualenv
</pre></div>
</div>
<p>If you are on Windows (or none of the above methods worked) you must install
<code class="docutils literal"><span class="pre">pip</span></code> first.  For more information about this, see <a class="reference external" href="http://pip.readthedocs.org/en/latest/installing.html">installing pip</a>.
Once you have it installed, run the <code class="docutils literal"><span class="pre">pip</span></code> command from above, but without
the <cite>sudo</cite> prefix.</p>
<p>Once you have virtualenv installed, just fire up a shell and create
your own environment.  I usually create a project folder and a <cite>venv</cite>
folder within:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ mkdir myproject
$ cd myproject
$ virtualenv venv
New python executable in venv/bin/python
Installing setuptools, pip............done.
</pre></div>
</div>
<p>Now, whenever you want to work on a project, you only have to activate the
corresponding environment.  On OS X and Linux, do the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ . venv/bin/activate
</pre></div>
</div>
<p>If you are a Windows user, the following command is for you:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ venv\scripts\activate
</pre></div>
</div>
<p>Either way, you should now be using your virtualenv (notice how the prompt of
your shell has changed to show the active environment).</p>
<p>And if you want to go back to the real world, use the following command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ deactivate
</pre></div>
</div>
<p>After doing this, the prompt of your shell should be as familar as before.</p>
<p>Now, let&#8217;s move on. Enter the following command to get Click activated in your
virtualenv:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install Click
</pre></div>
</div>
<p>A few seconds later and you are good to go.</p>
</div>
<div class="section" id="screencast-and-examples">
<h4>Screencast and Examples<a class="headerlink" href="#screencast-and-examples" title="Permalink to this headline">¶</a></h4>
<p>There is a screencast available which shows the basic API of Click and
how to build simple applications with it.  It also explores how to build
commands with subcommands.</p>
<ul class="simple">
<li><a class="reference external" href="https://www.youtube.com/watch?v=kNke39OZ2k0">Building Command Line Applications with Click</a></li>
</ul>
<p>Examples of Click applications can be found in the documentation as well
as in the GitHub repository together with readme files:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">inout</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/inout">File input and output</a></li>
<li><code class="docutils literal"><span class="pre">naval</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/naval">Port of docopt naval example</a></li>
<li><code class="docutils literal"><span class="pre">aliases</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/aliases">Command alias example</a></li>
<li><code class="docutils literal"><span class="pre">repo</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/repo">Git-/Mercurial-like command line interface</a></li>
<li><code class="docutils literal"><span class="pre">complex</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/complex">Complex example with plugin loading</a></li>
<li><code class="docutils literal"><span class="pre">validation</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/validation">Custom parameter validation example</a></li>
<li><code class="docutils literal"><span class="pre">colors</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/colors">Colorama ANSI color support</a></li>
<li><code class="docutils literal"><span class="pre">termui</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/termui">Terminal UI functions demo</a></li>
<li><code class="docutils literal"><span class="pre">imagepipe</span></code>: <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/imagepipe">Multi command chaining demo</a></li>
</ul>
</div>
<div class="section" id="basic-concepts">
<h4>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h4>
<p>Click is based on declaring commands through decorators.  Internally, there
is a non-decorator interface for advanced use cases, but it&#8217;s discouraged
for high-level usage.</p>
<p>A function becomes a Click command line tool by decorating it through
<a class="reference internal" href="index.html#click.command" title="click.command"><code class="xref py py-func docutils literal"><span class="pre">click.command()</span></code></a>.  At its simplest, just decorating a function
with this decorator will make it into a callable script:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>What&#8217;s happening is that the decorator converts the function into a
<a class="reference internal" href="index.html#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> which then can be invoked:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">hello</span><span class="p">()</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ python hello.py
Hello World!
</pre></div>
</div>
<p>And the corresponding help page:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ python hello.py --help
Usage: hello.py [OPTIONS]

Options:
  --help  Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="echoing">
<h4>Echoing<a class="headerlink" href="#echoing" title="Permalink to this headline">¶</a></h4>
<p>Why does this example use <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> instead of the regular
<a class="reference external" href="http://docs.python.org/dev/library/functions.html#print" title="(in Python v3.6)"><code class="xref py py-func docutils literal"><span class="pre">print()</span></code></a> function?  The answer to this question is that Click
attempts to support both Python 2 and Python 3 the same way and to be very
robust even when the environment is misconfigured.  Click wants to be
functional at least on a basic level even if everything is completely
broken.</p>
<p>What this means is that the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function applies some error
correction in case the terminal is misconfigured instead of dying with an
<a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#UnicodeError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">UnicodeError</span></code></a>.</p>
<p>As an added benefit, starting with Click 2.0, the echo function also
has good support for ANSI colors.  It will automatically strip ANSI codes
if the output stream is a file and if colorama is supported, ANSI colors
will also work on Windows.  See <a class="reference internal" href="index.html#ansi-colors"><span class="std std-ref">ANSI Colors</span></a> for more information.</p>
<p>If you don&#8217;t need this, you can also use the <cite>print()</cite> construct /
function.</p>
</div>
<div class="section" id="nesting-commands">
<h4>Nesting Commands<a class="headerlink" href="#nesting-commands" title="Permalink to this headline">¶</a></h4>
<p>Commands can be attached to other commands of type <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a>.  This
allows arbitrary nesting of scripts.  As an example here is a script that
implements two commands for managing databases:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">initdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Initialized the database&#39;</span><span class="p">)</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">dropdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Dropped the database&#39;</span><span class="p">)</span>

<span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">initdb</span><span class="p">)</span>
<span class="n">cli</span><span class="o">.</span><span class="n">add_command</span><span class="p">(</span><span class="n">dropdb</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see, the <a class="reference internal" href="index.html#click.group" title="click.group"><code class="xref py py-func docutils literal"><span class="pre">group()</span></code></a> decorator works like the <a class="reference internal" href="index.html#click.command" title="click.command"><code class="xref py py-func docutils literal"><span class="pre">command()</span></code></a>
decorator, but creates a <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> object instead which can be given
multiple subcommands that can be attached with <a class="reference internal" href="index.html#click.Group.add_command" title="click.Group.add_command"><code class="xref py py-meth docutils literal"><span class="pre">Group.add_command()</span></code></a>.</p>
<p>For simple scripts, it&#8217;s also possible to automatically attach and create a
command by using the <a class="reference internal" href="index.html#click.Group.command" title="click.Group.command"><code class="xref py py-meth docutils literal"><span class="pre">Group.command()</span></code></a> decorator instead.  The above
script can instead be written like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">initdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Initialized the database&#39;</span><span class="p">)</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">dropdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Dropped the database&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="adding-parameters">
<h4>Adding Parameters<a class="headerlink" href="#adding-parameters" title="Permalink to this headline">¶</a></h4>
<p>To add parameters, use the <a class="reference internal" href="index.html#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a> and <a class="reference internal" href="index.html#click.argument" title="click.argument"><code class="xref py py-func docutils literal"><span class="pre">argument()</span></code></a> decorators:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;number of greetings&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>What it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ python hello.py --help
Usage: hello.py [OPTIONS] NAME

Options:
  --count INTEGER  number of greetings
  --help           Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="switching-to-setuptools">
<span id="id2"></span><h4>Switching to Setuptools<a class="headerlink" href="#switching-to-setuptools" title="Permalink to this headline">¶</a></h4>
<p>In the code you wrote so far there is a block at the end of the file which
looks like this: <code class="docutils literal"><span class="pre">if</span> <span class="pre">__name__</span> <span class="pre">==</span> <span class="pre">'__main__':</span></code>.  This is traditionally
how a standalone Python file looks like.  With Click you can continue
doing that, but there are better ways through setuptools.</p>
<p>There are two main (and many more) reasons for this:</p>
<p>The first one is that setuptools automatically generates executable
wrappers for Windows so your command line utilities work on Windows too.</p>
<p>The second reason is that setuptools scripts work with virtualenv on Unix
without the virtualenv having to be activated.  This is a very useful
concept which allows you to bundle your scripts with all requirements into
a virtualenv.</p>
<p>Click is perfectly equipped to work with that and in fact the rest of the
documentation will assume that you are writing applications through
setuptools.</p>
<p>I strongly recommend to have a look at the <a class="reference internal" href="index.html#setuptools-integration"><span class="std std-ref">Setuptools Integration</span></a>
chapter before reading the rest as the examples assume that you will
be using setuptools.</p>
</div>
</div>
<span id="document-setuptools"></span><div class="section" id="setuptools-integration">
<span id="id1"></span><h3>Setuptools Integration<a class="headerlink" href="#setuptools-integration" title="Permalink to this headline">¶</a></h3>
<p>When writing command line utilities, it&#8217;s recommended to write them as
modules that are distributed with setuptools instead of using Unix
shebangs.</p>
<p>Why would you want to do that?  There are a bunch of reasons:</p>
<ol class="arabic">
<li><p class="first">One of the problems with the traditional approach is that the first
module the Python interpreter loads has an incorrect name.  This might
sound like a small issue but it has quite significant implications.</p>
<p>The first module is not called by its actual name, but the
interpreter renames it to <code class="docutils literal"><span class="pre">__main__</span></code>.  While that is a perfectly
valid name it means that if another piece of code wants to import from
that module it will trigger the import a second time under its real
name and all of a sudden your code is imported twice.</p>
</li>
<li><p class="first">Not on all platforms are things that easy to execute.  On Linux and OS
X you can add a comment to the beginning of the file (<code class="docutils literal"><span class="pre">#!/usr/bin/env</span>
<span class="pre">python</span></code>) and your script works like an executable (assuming it has
the executable bit set).  This however does not work on Windows.
While on Windows you can associate interpreters with file extensions
(like having everything ending in <code class="docutils literal"><span class="pre">.py</span></code> execute through the Python
interpreter) you will then run into issues if you want to use the
script in a virtualenv.</p>
<p>In fact running a script in a virtualenv is an issue with OS X and
Linux as well.  With the traditional approach you need to have the
whole virtualenv activated so that the correct Python interpreter is
used.  Not very user friendly.</p>
</li>
<li><p class="first">The main trick only works if the script is a Python module.  If your
application grows too large and you want to start using a package you
will run into issues.</p>
</li>
</ol>
<div class="section" id="introduction">
<h4>Introduction<a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h4>
<p>To bundle your script with setuptools, all you need is the script in a
Python package and a <code class="docutils literal"><span class="pre">setup.py</span></code> file.</p>
<p>Imagine this directory structure:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">yourscript</span><span class="o">.</span><span class="n">py</span>
<span class="n">setup</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>Contents of <code class="docutils literal"><span class="pre">yourscript.py</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Example script.&quot;&quot;&quot;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Contents of <code class="docutils literal"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="k">import</span> <span class="n">setup</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;yourscript&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">,</span>
    <span class="n">py_modules</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;yourscript&#39;</span><span class="p">],</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;Click&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        [console_scripts]</span>
<span class="s1">        yourscript=yourscript:cli</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
<p>The magic is in the <code class="docutils literal"><span class="pre">entry_points</span></code> parameter.  Below
<code class="docutils literal"><span class="pre">console_scripts</span></code>, each line identifies one console script.  The first
part before the equals sign (<code class="docutils literal"><span class="pre">=</span></code>) is the name of the script that should
be generated, the second part is the import path followed by a colon
(<code class="docutils literal"><span class="pre">:</span></code>) with the Click command.</p>
<p>That&#8217;s it.</p>
</div>
<div class="section" id="testing-the-script">
<h4>Testing The Script<a class="headerlink" href="#testing-the-script" title="Permalink to this headline">¶</a></h4>
<p>To test the script, you can make a new virtualenv and then install your
package:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ virtualenv venv
$ . venv/bin/activate
$ pip install --editable .
</pre></div>
</div>
<p>Afterwards, your command should be available:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ yourscript
Hello World!
</pre></div>
</div>
</div>
<div class="section" id="scripts-in-packages">
<h4>Scripts in Packages<a class="headerlink" href="#scripts-in-packages" title="Permalink to this headline">¶</a></h4>
<p>If your script is growing and you want to switch over to your script being
contained in a Python package the changes necessary are minimal.  Let&#8217;s
assume your directory structure changed to this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">yourpackage</span><span class="o">/</span>
    <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
    <span class="n">main</span><span class="o">.</span><span class="n">py</span>
    <span class="n">utils</span><span class="o">.</span><span class="n">py</span>
    <span class="n">scripts</span><span class="o">/</span>
        <span class="n">__init__</span><span class="o">.</span><span class="n">py</span>
        <span class="n">yourscript</span><span class="o">.</span><span class="n">py</span>
</pre></div>
</div>
<p>In this case instead of using <code class="docutils literal"><span class="pre">py_modules</span></code> in your <code class="docutils literal"><span class="pre">setup.py</span></code> file you
can use <code class="docutils literal"><span class="pre">packages</span></code> and the automatic package finding support of
setuptools.  In addition to that it&#8217;s also recommended to include other
package data.</p>
<p>These would be the modified contents of <code class="docutils literal"><span class="pre">setup.py</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">setuptools</span> <span class="k">import</span> <span class="n">setup</span><span class="p">,</span> <span class="n">find_packages</span>

<span class="n">setup</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="s1">&#39;yourpackage&#39;</span><span class="p">,</span>
    <span class="n">version</span><span class="o">=</span><span class="s1">&#39;0.1&#39;</span><span class="p">,</span>
    <span class="n">packages</span><span class="o">=</span><span class="n">find_packages</span><span class="p">(),</span>
    <span class="n">include_package_data</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
    <span class="n">install_requires</span><span class="o">=</span><span class="p">[</span>
        <span class="s1">&#39;Click&#39;</span><span class="p">,</span>
    <span class="p">],</span>
    <span class="n">entry_points</span><span class="o">=</span><span class="s1">&#39;&#39;&#39;</span>
<span class="s1">        [console_scripts]</span>
<span class="s1">        yourscript=yourpackage.scripts.yourscript:cli</span>
<span class="s1">    &#39;&#39;&#39;</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-parameters"></span><div class="section" id="parameters">
<h3>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h3>
<p>Click supports two types of parameters for scripts: options and arguments.
There is generally some confusion among authors of command line scripts of
when to use which, so here is a quick overview of the differences.  As its
name indicates, an option is optional.  While arguments can be optional
within reason, they are much more restricted in how optional they can be.</p>
<p>To help you decide between options and arguments, the recommendation is
to use arguments exclusively for things like going to subcommands or input
filenames / URLs, and have everything else be an option instead.</p>
<div class="section" id="differences">
<h4>Differences<a class="headerlink" href="#differences" title="Permalink to this headline">¶</a></h4>
<p>Arguments can do less than options.  The following features are only
available for options:</p>
<ul class="simple">
<li>automatic prompting for missing input</li>
<li>act as flags (boolean or otherwise)</li>
<li>option values can be pulled from environment variables, arguments can not</li>
<li>options are fully documented in the help page, arguments are not
(this is intentional as arguments might be too specific to be
automatically documented)</li>
</ul>
<p>On the other hand arguments, unlike options, can accept an arbitrary number
of arguments.  Options can strictly ever only accept a fixed number of
arguments (defaults to 1).</p>
</div>
<div class="section" id="parameter-types">
<h4>Parameter Types<a class="headerlink" href="#parameter-types" title="Permalink to this headline">¶</a></h4>
<p>Parameters can be of different types.  Types can be implemented with
different behavior and some are supported out of the box:</p>
<dl class="docutils">
<dt><code class="docutils literal"><span class="pre">str</span></code> / <a class="reference internal" href="index.html#click.STRING" title="click.STRING"><code class="xref py py-data docutils literal"><span class="pre">click.STRING</span></code></a>:</dt>
<dd>The default parameter type which indicates unicode strings.</dd>
<dt><code class="docutils literal"><span class="pre">int</span></code> / <a class="reference internal" href="index.html#click.INT" title="click.INT"><code class="xref py py-data docutils literal"><span class="pre">click.INT</span></code></a>:</dt>
<dd>A parameter that only accepts integers.</dd>
<dt><code class="docutils literal"><span class="pre">float</span></code> / <a class="reference internal" href="index.html#click.FLOAT" title="click.FLOAT"><code class="xref py py-data docutils literal"><span class="pre">click.FLOAT</span></code></a>:</dt>
<dd>A parameter that only accepts floating point values.</dd>
<dt><code class="docutils literal"><span class="pre">bool</span></code> / <a class="reference internal" href="index.html#click.BOOL" title="click.BOOL"><code class="xref py py-data docutils literal"><span class="pre">click.BOOL</span></code></a>:</dt>
<dd>A parameter that accepts boolean values.  This is automatically used
for boolean flags.  If used with string values <code class="docutils literal"><span class="pre">1</span></code>, <code class="docutils literal"><span class="pre">yes</span></code>, <code class="docutils literal"><span class="pre">y</span></code>
and <code class="docutils literal"><span class="pre">true</span></code> convert to <cite>True</cite> and <code class="docutils literal"><span class="pre">0</span></code>, <code class="docutils literal"><span class="pre">no</span></code>, <code class="docutils literal"><span class="pre">n</span></code> and <code class="docutils literal"><span class="pre">false</span></code>
convert to <cite>False</cite>.</dd>
<dt><a class="reference internal" href="index.html#click.UUID" title="click.UUID"><code class="xref py py-data docutils literal"><span class="pre">click.UUID</span></code></a>:</dt>
<dd>A parameter that accepts UUID values.  This is not automatically
guessed but represented as <a class="reference external" href="http://docs.python.org/dev/library/uuid.html#uuid.UUID" title="(in Python v3.6)"><code class="xref py py-class docutils literal"><span class="pre">uuid.UUID</span></code></a>.</dd>
</dl>
<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">File</code><span class="sig-paren">(</span><em>mode='r'</em>, <em>encoding=None</em>, <em>errors='strict'</em>, <em>lazy=None</em>, <em>atomic=False</em><span class="sig-paren">)</span></dt>
<dd><p>Declares a parameter to be a file for reading or writing.  The file
is automatically closed once the context tears down (after the command
finished working).</p>
<p>Files can be opened for reading or writing.  The special value <code class="docutils literal"><span class="pre">-</span></code>
indicates stdin or stdout depending on the mode.</p>
<p>By default, the file is opened for reading text data, but it can also be
opened in binary mode or for writing.  The encoding parameter can be used
to force a specific encoding.</p>
<p>The <cite>lazy</cite> flag controls if the file should be opened immediately or
upon first IO.  The default is to be non lazy for standard input and
output streams as well as files opened for reading, lazy otherwise.</p>
<p>Starting with Click 2.0, files can also be opened atomically in which
case all writes go into a separate file in the same folder and upon
completion the file will be moved over to the original location.  This
is useful if a file regularly read by other users is modified.</p>
<p>See <a class="reference internal" href="index.html#file-args"><span class="std std-ref">File Arguments</span></a> for more information.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Path</code><span class="sig-paren">(</span><em>exists=False</em>, <em>file_okay=True</em>, <em>dir_okay=True</em>, <em>writable=False</em>, <em>readable=True</em>, <em>resolve_path=False</em>, <em>allow_dash=False</em>, <em>path_type=None</em><span class="sig-paren">)</span></dt>
<dd><p>The path type is similar to the <a class="reference internal" href="index.html#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> type but it performs
different checks.  First of all, instead of returning an open file
handle it returns just the filename.  Secondly, it can perform various
basic checks about what the file or directory should be.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 6.0: </span><cite>allow_dash</cite> was added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exists</strong> &#8211; if set to true, the file or directory needs to exist for
this value to be valid.  If this is not required and a
file does indeed not exist, then all further checks are
silently skipped.</li>
<li><strong>file_okay</strong> &#8211; controls if a file is a possible value.</li>
<li><strong>dir_okay</strong> &#8211; controls if a directory is a possible value.</li>
<li><strong>writable</strong> &#8211; if true, a writable check is performed.</li>
<li><strong>readable</strong> &#8211; if true, a readable check is performed.</li>
<li><strong>resolve_path</strong> &#8211; if this is true, then the path is fully resolved
before the value is passed onwards.  This means
that it&#8217;s absolute and symlinks are resolved.  It
will not expand a tilde-prefix, as this is
supposed to be done by the shell only.</li>
<li><strong>allow_dash</strong> &#8211; If this is set to <cite>True</cite>, a single dash to indicate
standard streams is permitted.</li>
<li><strong>type</strong> &#8211; optionally a string type that should be used to
represent the path.  The default is <cite>None</cite> which
means the return value will be either bytes or
unicode depending on what makes most sense given the
input data Click deals with.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Choice</code><span class="sig-paren">(</span><em>choices</em><span class="sig-paren">)</span></dt>
<dd><p>The choice type allows a value to be checked against a fixed set of
supported values.  All of these values have to be strings.</p>
<p>See <a class="reference internal" href="index.html#choice-opts"><span class="std std-ref">Choice Options</span></a> for an example.</p>
</dd></dl>

<dl class="class">
<dt>
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">IntRange</code><span class="sig-paren">(</span><em>min=None</em>, <em>max=None</em>, <em>clamp=False</em><span class="sig-paren">)</span></dt>
<dd><p>A parameter that works similar to <a class="reference internal" href="index.html#click.INT" title="click.INT"><code class="xref py py-data docutils literal"><span class="pre">click.INT</span></code></a> but restricts
the value to fit into a range.  The default behavior is to fail if the
value falls outside the range, but it can also be silently clamped
between the two edges.</p>
<p>See <a class="reference internal" href="index.html#ranges"><span class="std std-ref">Range Options</span></a> for an example.</p>
</dd></dl>

<p>Custom parameter types can be implemented by subclassing
<a class="reference internal" href="index.html#click.ParamType" title="click.ParamType"><code class="xref py py-class docutils literal"><span class="pre">click.ParamType</span></code></a>.  For simple cases, passing a Python function that
fails with a <cite>ValueError</cite> is also supported, though discouraged.</p>
</div>
<div class="section" id="parameter-names">
<h4>Parameter Names<a class="headerlink" href="#parameter-names" title="Permalink to this headline">¶</a></h4>
<p>Parameters (both options and arguments) accept a number of positional
arguments which are the parameter declarations.  Each string with a
single dash is added as short argument; each string starting with a double
dash as long one.  If a string is added without any dashes, it becomes the
internal parameter name which is also used as variable name.</p>
<p>If a parameter is not given a name without dashes, a name is generated
automatically by taking the longest argument and converting all dashes to
underscores.  For an option with <code class="docutils literal"><span class="pre">('-f',</span> <span class="pre">'--foo-bar')</span></code>, the parameter
name is <cite>foo_bar</cite>.  For an option with <code class="docutils literal"><span class="pre">('-x',)</span></code>, the parameter is <cite>x</cite>.
For an option with <code class="docutils literal"><span class="pre">('-f',</span> <span class="pre">'--filename',</span> <span class="pre">'dest')</span></code>, the parameter is
called <cite>dest</cite>.</p>
</div>
<div class="section" id="implementing-custom-types">
<h4>Implementing Custom Types<a class="headerlink" href="#implementing-custom-types" title="Permalink to this headline">¶</a></h4>
<p>To implement a custom type, you need to subclass the <a class="reference internal" href="index.html#click.ParamType" title="click.ParamType"><code class="xref py py-class docutils literal"><span class="pre">ParamType</span></code></a>
class.  Types can be invoked with or without context and parameter object,
which is why they need to be able to deal with this.</p>
<p>The following code implements an integer type that accepts hex and octal
numbers in addition to normal integers, and converts them into regular
integers:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="k">class</span> <span class="nc">BasedIntParamType</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">ParamType</span><span class="p">):</span>
    <span class="n">name</span> <span class="o">=</span> <span class="s1">&#39;integer&#39;</span>

    <span class="k">def</span> <span class="nf">convert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">value</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="k">if</span> <span class="n">value</span><span class="p">[:</span><span class="mi">2</span><span class="p">]</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span> <span class="o">==</span> <span class="s1">&#39;0x&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">[</span><span class="mi">2</span><span class="p">:],</span> <span class="mi">16</span><span class="p">)</span>
            <span class="k">elif</span> <span class="n">value</span><span class="p">[:</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="s1">&#39;0&#39;</span><span class="p">:</span>
                <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">8</span><span class="p">)</span>
            <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="mi">10</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> is not a valid integer&#39;</span> <span class="o">%</span> <span class="n">value</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">ctx</span><span class="p">)</span>

<span class="n">BASED_INT</span> <span class="o">=</span> <span class="n">BasedIntParamType</span><span class="p">()</span>
</pre></div>
</div>
<p>As you can see, a subclass needs to implement the <a class="reference internal" href="index.html#click.ParamType.convert" title="click.ParamType.convert"><code class="xref py py-meth docutils literal"><span class="pre">ParamType.convert()</span></code></a>
method and optionally provide the <a class="reference internal" href="index.html#click.ParamType.name" title="click.ParamType.name"><code class="xref py py-attr docutils literal"><span class="pre">ParamType.name</span></code></a> attribute.  The
latter can be used for documentation purposes.</p>
</div>
</div>
<span id="document-options"></span><div class="section" id="options">
<span id="id1"></span><h3>Options<a class="headerlink" href="#options" title="Permalink to this headline">¶</a></h3>
<p>Adding options to commands can be accomplished by the <a class="reference internal" href="index.html#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a>
decorator.  Since options can come in various different versions, there
are a ton of parameters to configure their behavior. Options in click are
distinct from <a class="reference internal" href="index.html#arguments"><span class="std std-ref">positional arguments</span></a>.</p>
<div class="section" id="basic-value-options">
<h4>Basic Value Options<a class="headerlink" href="#basic-value-options" title="Permalink to this headline">¶</a></h4>
<p>The most basic option is a value option.  These options accept one
argument which is a value.  If no type is provided, the type of the default
value is used.  If no default value is provided, the type is assumed to be
<a class="reference internal" href="index.html#click.STRING" title="click.STRING"><code class="xref py py-data docutils literal"><span class="pre">STRING</span></code></a>.  By default, the name of the parameter is the first long
option defined; otherwise the first short one is used.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--n&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dots</span><span class="p">(</span><span class="n">n</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;.&#39;</span> <span class="o">*</span> <span class="n">n</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ dots --n=2
..
</pre></div>
</div>
<p>In this case the option is of type <a class="reference internal" href="index.html#click.INT" title="click.INT"><code class="xref py py-data docutils literal"><span class="pre">INT</span></code></a> because the default value
is an integer.</p>
</div>
<div class="section" id="multi-value-options">
<h4>Multi Value Options<a class="headerlink" href="#multi-value-options" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, you have options that take more than one argument.  For options,
only a fixed number of arguments is supported.  This can be configured by
the <code class="docutils literal"><span class="pre">nargs</span></code> parameter.  The values are then stored as a tuple.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--pos&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">float</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">findme</span><span class="p">(</span><span class="n">pos</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1"> / </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">pos</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ findme --pos 2.0 3.0
2.0 / 3.0
</pre></div>
</div>
</div>
<div class="section" id="tuples-as-multi-value-options">
<span id="tuple-type"></span><h4>Tuples as Multi Value Options<a class="headerlink" href="#tuples-as-multi-value-options" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0.</span></p>
</div>
<p>As you can see that by using <cite>nargs</cite> set to a specific number each item in
the resulting tuple is of the same type.  This might not be what you want.
Commonly you might want to use different types for different indexes in
the tuple.  For this you can directly specify a tuple as type:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--item&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="p">(</span><span class="nb">unicode</span><span class="p">,</span> <span class="nb">int</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">putitem</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;name=</span><span class="si">%s</span><span class="s1"> id=</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ putitem --item peter 1338
name=peter id=1338
</pre></div>
</div>
<p>By using a tuple literal as type, <cite>nargs</cite> gets automatically set to the
length of the tuple and the <a class="reference internal" href="index.html#click.Tuple" title="click.Tuple"><code class="xref py py-class docutils literal"><span class="pre">click.Tuple</span></code></a> type is automatically
used.  The above example is thus equivalent to this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--item&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">2</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Tuple</span><span class="p">([</span><span class="nb">unicode</span><span class="p">,</span> <span class="nb">int</span><span class="p">]))</span>
<span class="k">def</span> <span class="nf">putitem</span><span class="p">(</span><span class="n">item</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;name=</span><span class="si">%s</span><span class="s1"> id=</span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="multiple-options">
<h4>Multiple Options<a class="headerlink" href="#multiple-options" title="Permalink to this headline">¶</a></h4>
<p>Similarly to <code class="docutils literal"><span class="pre">nargs</span></code>, there is also the case of wanting to support a
parameter being provided multiple times to and have all values recorded &#8211;
not just the last one.  For instance, <code class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">-m</span> <span class="pre">foo</span> <span class="pre">-m</span> <span class="pre">bar</span></code> would
record two lines for the commit message: <code class="docutils literal"><span class="pre">foo</span></code> and <code class="docutils literal"><span class="pre">bar</span></code>. This can be
accomplished with the <code class="docutils literal"><span class="pre">multiple</span></code> flag:</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--message&#39;</span><span class="p">,</span> <span class="s1">&#39;-m&#39;</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">commit</span><span class="p">(</span><span class="n">message</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">message</span><span class="p">))</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ commit -m foo -m bar
foo
bar
</pre></div>
</div>
</div>
<div class="section" id="counting">
<h4>Counting<a class="headerlink" href="#counting" title="Permalink to this headline">¶</a></h4>
<p>In some very rare circumstances, it is interesting to use the repetition
of options to count an integer up.  This can be used for verbosity flags,
for instance:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">verbose</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Verbosity: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">verbose</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ log -vvv
Verbosity: 3
</pre></div>
</div>
</div>
<div class="section" id="boolean-flags">
<h4>Boolean Flags<a class="headerlink" href="#boolean-flags" title="Permalink to this headline">¶</a></h4>
<p>Boolean flags are options that can be enabled or disabled.  This can be
accomplished by defining two flags in one go separated by a slash (<code class="docutils literal"><span class="pre">/</span></code>)
for enabling or disabling the option.  (If a slash is in an option string,
Click automatically knows that it&#8217;s a boolean flag and will pass
<code class="docutils literal"><span class="pre">is_flag=True</span></code> implicitly.)  Click always wants you to provide an enable
and disable flag so that you can change the default later.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--shout/--no-shout&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="n">shout</span><span class="p">):</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span>
    <span class="k">if</span> <span class="n">shout</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;!!!!111&#39;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ info --shout
DARWIN!!!!111
$ info --no-shout
darwin
</pre></div>
</div>
<p>If you really don&#8217;t want an off-switch, you can just define one and
manually inform Click that something is a flag:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--shout&#39;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="n">shout</span><span class="p">):</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span>
    <span class="k">if</span> <span class="n">shout</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;!!!!111&#39;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ info --shout
DARWIN!!!!111
</pre></div>
</div>
<p>Note that if a slash is contained in your option already (for instance, if
you use Windows-style parameters where <code class="docutils literal"><span class="pre">/</span></code> is the prefix character), you
can alternatively split the parameters through <code class="docutils literal"><span class="pre">;</span></code> instead:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;/debug;/no-debug&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">debug</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;debug=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">debug</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">log</span><span class="p">()</span>
</pre></div>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 6.0.</span></p>
</div>
<p>If you want to define an alias for the second option only, then you will
need to use leading whitespace to disambiguate the format string:</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--shout/--no-shout&#39;</span><span class="p">,</span> <span class="s1">&#39; /-S&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="n">shout</span><span class="p">):</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">platform</span>
    <span class="k">if</span> <span class="n">shout</span><span class="p">:</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">rv</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span> <span class="o">+</span> <span class="s1">&#39;!!!!111&#39;</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span>
</pre></div>
</div>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ info --help
Usage: info [OPTIONS]

Options:
  --shout / -S, --no-shout
  --help                    Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="feature-switches">
<h4>Feature Switches<a class="headerlink" href="#feature-switches" title="Permalink to this headline">¶</a></h4>
<p>In addition to boolean flags, there are also feature switches.  These are
implemented by setting multiple options to the same parameter name and
defining a flag value.  Note that by providing the <code class="docutils literal"><span class="pre">flag_value</span></code> parameter,
Click will implicitly set <code class="docutils literal"><span class="pre">is_flag=True</span></code>.</p>
<p>To set a default flag, assign a value of <cite>True</cite> to the flag that should be
the default.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--upper&#39;</span><span class="p">,</span> <span class="s1">&#39;transformation&#39;</span><span class="p">,</span> <span class="n">flag_value</span><span class="o">=</span><span class="s1">&#39;upper&#39;</span><span class="p">,</span>
              <span class="n">default</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--lower&#39;</span><span class="p">,</span> <span class="s1">&#39;transformation&#39;</span><span class="p">,</span> <span class="n">flag_value</span><span class="o">=</span><span class="s1">&#39;lower&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">info</span><span class="p">(</span><span class="n">transformation</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">platform</span><span class="p">,</span> <span class="n">transformation</span><span class="p">)())</span>
</pre></div>
</div>
<p>And on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ info --upper
DARWIN
$ info --lower
darwin
$ info
DARWIN
</pre></div>
</div>
</div>
<div class="section" id="choice-options">
<span id="choice-opts"></span><h4>Choice Options<a class="headerlink" href="#choice-options" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, you want to have a parameter be a choice of a list of values.
In that case you can use <a class="reference internal" href="index.html#click.Choice" title="click.Choice"><code class="xref py py-class docutils literal"><span class="pre">Choice</span></code></a> type.  It can be instantiated
with a list of valid values.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--hash-type&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Choice</span><span class="p">([</span><span class="s1">&#39;md5&#39;</span><span class="p">,</span> <span class="s1">&#39;sha1&#39;</span><span class="p">]))</span>
<span class="k">def</span> <span class="nf">digest</span><span class="p">(</span><span class="n">hash_type</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">hash_type</span><span class="p">)</span>
</pre></div>
</div>
<p>What it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ digest --hash-type=md5
md5

$ digest --hash-type=foo
Usage: digest [OPTIONS]

Error: Invalid value for &quot;--hash-type&quot;: invalid choice: foo. (choose from md5, sha1)

$ digest --help
Usage: digest [OPTIONS]

Options:
  --hash-type [md5|sha1]
  --help                  Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="prompting">
<span id="option-prompting"></span><h4>Prompting<a class="headerlink" href="#prompting" title="Permalink to this headline">¶</a></h4>
<p>In some cases, you want parameters that can be provided from the command line,
but if not provided, ask for user input instead.  This can be implemented with
Click by defining a prompt string.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ hello --name=John
Hello John!
$ hello
Name: John
Hello John!
</pre></div>
</div>
<p>If you are not happy with the default prompt string, you can ask for
a different one:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Your name please&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>What it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ hello
Your name please: John
Hello John!
</pre></div>
</div>
</div>
<div class="section" id="password-prompts">
<h4>Password Prompts<a class="headerlink" href="#password-prompts" title="Permalink to this headline">¶</a></h4>
<p>Click also supports hidden prompts and asking for confirmation.  This is
useful for password input:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--password&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">hide_input</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">confirmation_prompt</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Encrypting password to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;rot13&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>What it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ encrypt
Password: 
Repeat for confirmation: 
Encrypting password to frperg
</pre></div>
</div>
<p>Because this combination of parameters is quite common, this can also be
replaced with the <a class="reference internal" href="index.html#click.password_option" title="click.password_option"><code class="xref py py-func docutils literal"><span class="pre">password_option()</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.password_option</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">encrypt</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Encrypting password to </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">password</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;rot13&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="dynamic-defaults-for-prompts">
<h4>Dynamic Defaults for Prompts<a class="headerlink" href="#dynamic-defaults-for-prompts" title="Permalink to this headline">¶</a></h4>
<p>The <code class="docutils literal"><span class="pre">auto_envvar_prefix</span></code> and <code class="docutils literal"><span class="pre">default_map</span></code> options for the context
allow the program to read option values from the environment or a
configuration file.  However, this overrides the prompting mechanism, so
that the user does not get the option to change the value interactively.</p>
<p>If you want to let the user configure the default value, but still be
prompted if the option isn&#8217;t specified on the command line, you can do so
by supplying a callable as the default value. For example, to get a default
from the environment:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--username&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="n">default</span><span class="o">=</span><span class="k">lambda</span><span class="p">:</span> <span class="n">os</span><span class="o">.</span><span class="n">environ</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s1">&#39;USER&#39;</span><span class="p">,</span> <span class="s1">&#39;&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="k">print</span><span class="p">(</span><span class="s2">&quot;Hello,&quot;</span><span class="p">,</span> <span class="n">username</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="callbacks-and-eager-options">
<h4>Callbacks and Eager Options<a class="headerlink" href="#callbacks-and-eager-options" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, you want a parameter to completely change the execution flow.
For instance, this is the case when you want to have a <code class="docutils literal"><span class="pre">--version</span></code>
parameter that prints out the version and then exits the application.</p>
<p>Note: an actual implementation of a <code class="docutils literal"><span class="pre">--version</span></code> parameter that is
reusable is available in Click as <a class="reference internal" href="index.html#click.version_option" title="click.version_option"><code class="xref py py-func docutils literal"><span class="pre">click.version_option()</span></code></a>.  The code
here is merely an example of how to implement such a flag.</p>
<p>In such cases, you need two concepts: eager parameters and a callback.  An
eager parameter is a parameter that is handled before others, and a
callback is what executes after the parameter is handled.  The eagerness
is necessary so that an earlier required parameter does not produce an
error message.  For instance, if <code class="docutils literal"><span class="pre">--version</span></code> was not eager and a
parameter <code class="docutils literal"><span class="pre">--foo</span></code> was required and defined before, you would need to
specify it for <code class="docutils literal"><span class="pre">--version</span></code> to work.  For more information, see
<a class="reference internal" href="index.html#callback-evaluation-order"><span class="std std-ref">Callback Evaluation Order</span></a>.</p>
<p>A callback is a function that is invoked with two parameters: the current
<a class="reference internal" href="index.html#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a> and the value.  The context provides some useful features
such as quitting the application and gives access to other already
processed parameters.</p>
<p>Here an example for a <code class="docutils literal"><span class="pre">--version</span></code> flag:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">print_version</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span> <span class="ow">or</span> <span class="n">ctx</span><span class="o">.</span><span class="n">resilient_parsing</span><span class="p">:</span>
        <span class="k">return</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Version 1.0&#39;</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">exit</span><span class="p">()</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--version&#39;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">print_version</span><span class="p">,</span>
              <span class="n">expose_value</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span> <span class="n">is_eager</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>The <cite>expose_value</cite> parameter prevents the pretty pointless <code class="docutils literal"><span class="pre">version</span></code>
parameter from being passed to the callback.  If that was not specified, a
boolean would be passed to the <cite>hello</cite> script.  The <cite>resilient_parsing</cite>
flag is applied to the context if Click wants to parse the command line
without any destructive behavior that would change the execution flow.  In
this case, because we would exit the program, we instead do nothing.</p>
<p>What it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ hello
Hello World!
$ hello --version
Version 1.0
</pre></div>
</div>
<div class="admonition-callback-signature-changes admonition">
<p class="first admonition-title">Callback Signature Changes</p>
<p class="last">In Click 2.0 the signature for callbacks changed.  For more
information about these changes see <a class="reference internal" href="index.html#upgrade-to-2-0"><span class="std std-ref">Upgrading to 2.0</span></a>.</p>
</div>
</div>
<div class="section" id="yes-parameters">
<h4>Yes Parameters<a class="headerlink" href="#yes-parameters" title="Permalink to this headline">¶</a></h4>
<p>For dangerous operations, it&#8217;s very useful to be able to ask a user for
confirmation.  This can be done by adding a boolean <code class="docutils literal"><span class="pre">--yes</span></code> flag and
asking for confirmation if the user did not provide it and to fail in a
callback:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">abort_if_false</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--yes&#39;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">abort_if_false</span><span class="p">,</span>
              <span class="n">expose_value</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Are you sure you want to drop the db?&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dropdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Dropped all tables!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ dropdb
Are you sure you want to drop the db? [y/N]: n
Aborted!
$ dropdb --yes
Dropped all tables!
</pre></div>
</div>
<p>Because this combination of parameters is quite common, this can also be
replaced with the <a class="reference internal" href="index.html#click.confirmation_option" title="click.confirmation_option"><code class="xref py py-func docutils literal"><span class="pre">confirmation_option()</span></code></a> decorator:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.confirmation_option</span><span class="p">(</span><span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Are you sure you want to drop the db?&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dropdb</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Dropped all tables!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition-callback-signature-changes admonition">
<p class="first admonition-title">Callback Signature Changes</p>
<p class="last">In Click 2.0 the signature for callbacks changed.  For more
information about these changes see <a class="reference internal" href="index.html#upgrade-to-2-0"><span class="std std-ref">Upgrading to 2.0</span></a>.</p>
</div>
</div>
<div class="section" id="values-from-environment-variables">
<h4>Values from Environment Variables<a class="headerlink" href="#values-from-environment-variables" title="Permalink to this headline">¶</a></h4>
<p>A very useful feature of Click is the ability to accept parameters from
environment variables in addition to regular parameters.  This allows
tools to be automated much easier.  For instance, you might want to pass
a configuration file with a <code class="docutils literal"><span class="pre">--config</span></code> parameter but also support exporting
a <code class="docutils literal"><span class="pre">TOOL_CONFIG=hello.cfg</span></code> key-value pair for a nicer development
experience.</p>
<p>This is supported by Click in two ways.  One is to automatically build
environment variables which is supported for options only.  To enable this
feature, the <code class="docutils literal"><span class="pre">auto_envvar_prefix</span></code> parameter needs to be passed to the
script that is invoked.  Each command and parameter is then added as an
uppercase underscore-separated variable.  If you have a subcommand
called <code class="docutils literal"><span class="pre">foo</span></code> taking an option called <code class="docutils literal"><span class="pre">bar</span></code> and the prefix is
<code class="docutils literal"><span class="pre">MY_TOOL</span></code>, then the variable is <code class="docutils literal"><span class="pre">MY_TOOL_FOO_BAR</span></code>.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--username&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">username</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">greet</span><span class="p">(</span><span class="n">auto_envvar_prefix</span><span class="o">=</span><span class="s1">&#39;GREETER&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ export GREETER_USERNAME=john
$ greet
Hello john!
</pre></div>
</div>
<p>The second option is to manually pull values in from specific environment
variables by defining the name of the environment variable on the option.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--username&#39;</span><span class="p">,</span> <span class="n">envvar</span><span class="o">=</span><span class="s1">&#39;USERNAME&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">greet</span><span class="p">(</span><span class="n">username</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">username</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">greet</span><span class="p">()</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ export USERNAME=john
$ greet
Hello john!
</pre></div>
</div>
<p>In that case it can also be a list of different environment variables
where the first one is picked.</p>
</div>
<div class="section" id="multiple-values-from-environment-values">
<h4>Multiple Values from Environment Values<a class="headerlink" href="#multiple-values-from-environment-values" title="Permalink to this headline">¶</a></h4>
<p>As options can accept multiple values, pulling in such values from
environment variables (which are strings) is a bit more complex.  The way
Click solves this is by leaving it up to the type to customize this
behavior.  For both <code class="docutils literal"><span class="pre">multiple</span></code> and <code class="docutils literal"><span class="pre">nargs</span></code> with values other than
<code class="docutils literal"><span class="pre">1</span></code>, Click will invoke the <a class="reference internal" href="index.html#click.ParamType.split_envvar_value" title="click.ParamType.split_envvar_value"><code class="xref py py-meth docutils literal"><span class="pre">ParamType.split_envvar_value()</span></code></a> method to
perform the splitting.</p>
<p>The default implementation for all types is to split on whitespace.  The
exceptions to this rule are the <a class="reference internal" href="index.html#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> and <a class="reference internal" href="index.html#click.Path" title="click.Path"><code class="xref py py-class docutils literal"><span class="pre">Path</span></code></a> types
which both split according to the operating system&#8217;s path splitting rules.
On Unix systems like Linux and OS X, the splitting happens for those on
every colon (<code class="docutils literal"><span class="pre">:</span></code>), and for Windows, on every semicolon (<code class="docutils literal"><span class="pre">;</span></code>).</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;paths&#39;</span><span class="p">,</span> <span class="s1">&#39;--path&#39;</span><span class="p">,</span> <span class="n">envvar</span><span class="o">=</span><span class="s1">&#39;PATHS&#39;</span><span class="p">,</span> <span class="n">multiple</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
              <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">())</span>
<span class="k">def</span> <span class="nf">perform</span><span class="p">(</span><span class="n">paths</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">path</span> <span class="ow">in</span> <span class="n">paths</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">perform</span><span class="p">()</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ export PATHS=./foo/bar:./test
$ perform
./foo/bar
./test
</pre></div>
</div>
</div>
<div class="section" id="other-prefix-characters">
<h4>Other Prefix Characters<a class="headerlink" href="#other-prefix-characters" title="Permalink to this headline">¶</a></h4>
<p>Click can deal with alternative prefix characters other than <code class="docutils literal"><span class="pre">-</span></code> for
options.  This is for instance useful if you want to handle slashes as
parameters <code class="docutils literal"><span class="pre">/</span></code> or something similar.  Note that this is strongly
discouraged in general because Click wants developers to stay close to
POSIX semantics.  However in certain situations this can be useful:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;+w/-w&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">chmod</span><span class="p">(</span><span class="n">w</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;writable=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">w</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">chmod</span><span class="p">()</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ chmod +w
writable=True
$ chmod -w
writable=False
</pre></div>
</div>
<p>Note that if you are using <code class="docutils literal"><span class="pre">/</span></code> as prefix character and you want to use a
boolean flag you need to separate it with <code class="docutils literal"><span class="pre">;</span></code> instead of <code class="docutils literal"><span class="pre">/</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;/debug;/no-debug&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">log</span><span class="p">(</span><span class="n">debug</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;debug=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">debug</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">log</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="range-options">
<span id="ranges"></span><h4>Range Options<a class="headerlink" href="#range-options" title="Permalink to this headline">¶</a></h4>
<p>A special mention should go to the <a class="reference internal" href="index.html#click.IntRange" title="click.IntRange"><code class="xref py py-class docutils literal"><span class="pre">IntRange</span></code></a> type, which works very
similarly to the <a class="reference internal" href="index.html#click.INT" title="click.INT"><code class="xref py py-data docutils literal"><span class="pre">INT</span></code></a> type, but restricts the value to fall into a
specific range (inclusive on both edges).  It has two modes:</p>
<ul class="simple">
<li>the default mode (non-clamping mode) where a value that falls outside
of the range will cause an error.</li>
<li>an optional clamping mode where a value that falls outside of the
range will be clamped.  This means that a range of <code class="docutils literal"><span class="pre">0-5</span></code> would
return <code class="docutils literal"><span class="pre">5</span></code> for the value <code class="docutils literal"><span class="pre">10</span></code> or <code class="docutils literal"><span class="pre">0</span></code> for the value <code class="docutils literal"><span class="pre">-1</span></code> (for
example).</li>
</ul>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">IntRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">20</span><span class="p">,</span> <span class="n">clamp</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--digit&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">IntRange</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">repeat</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">digit</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">digit</span><span class="p">)</span> <span class="o">*</span> <span class="n">count</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">repeat</span><span class="p">()</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ repeat --count=1000 --digit=5
55555555555555555555
$ repeat --count=1000 --digit=12
Usage: repeat [OPTIONS]

Error: Invalid value for &quot;--digit&quot;: 12 is not in the valid range of 0 to 10.
</pre></div>
</div>
<p>If you pass <code class="docutils literal"><span class="pre">None</span></code> for any of the edges, it means that the range is open
at that side.</p>
</div>
<div class="section" id="callbacks-for-validation">
<h4>Callbacks for Validation<a class="headerlink" href="#callbacks-for-validation" title="Permalink to this headline">¶</a></h4>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0.</span></p>
</div>
<p>If you want to apply custom validation logic, you can do this in the
parameter callbacks.  These callbacks can both modify values as well as
raise errors if the validation does not work.</p>
<p>In Click 1.0, you can only raise the <a class="reference internal" href="index.html#click.UsageError" title="click.UsageError"><code class="xref py py-exc docutils literal"><span class="pre">UsageError</span></code></a> but starting with
Click 2.0, you can also raise the <a class="reference internal" href="index.html#click.BadParameter" title="click.BadParameter"><code class="xref py py-exc docutils literal"><span class="pre">BadParameter</span></code></a> error, which has the
added advantage that it will automatically format the error message to
also contain the parameter name.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate_rolls</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">rolls</span><span class="p">,</span> <span class="n">dice</span> <span class="o">=</span> <span class="nb">map</span><span class="p">(</span><span class="nb">int</span><span class="p">,</span> <span class="n">value</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s1">&#39;d&#39;</span><span class="p">,</span> <span class="mi">2</span><span class="p">))</span>
        <span class="k">return</span> <span class="p">(</span><span class="n">dice</span><span class="p">,</span> <span class="n">rolls</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
        <span class="k">raise</span> <span class="n">click</span><span class="o">.</span><span class="n">BadParameter</span><span class="p">(</span><span class="s1">&#39;rolls need to be in format NdM&#39;</span><span class="p">)</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--rolls&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">validate_rolls</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;1d6&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">roll</span><span class="p">(</span><span class="n">rolls</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Rolling a </span><span class="si">%d</span><span class="s1">-sided dice </span><span class="si">%d</span><span class="s1"> time(s)&#39;</span> <span class="o">%</span> <span class="n">rolls</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">roll</span><span class="p">()</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ roll --rolls=42
Usage: roll [OPTIONS]

Error: Invalid value for &quot;--rolls&quot;: rolls need to be in format NdM

$ roll --rolls=2d12
Rolling a 12-sided dice 2 time(s)
</pre></div>
</div>
</div>
</div>
<span id="document-arguments"></span><div class="section" id="arguments">
<span id="id1"></span><h3>Arguments<a class="headerlink" href="#arguments" title="Permalink to this headline">¶</a></h3>
<p>Arguments work similarly to <a class="reference internal" href="index.html#options"><span class="std std-ref">options</span></a> but are positional.
They also only support a subset of the features of options due to their
syntactical nature. Click will also not attempt to document arguments for
you and wants you to document them manually in order to avoid ugly help
pages.</p>
<div class="section" id="basic-arguments">
<h4>Basic Arguments<a class="headerlink" href="#basic-arguments" title="Permalink to this headline">¶</a></h4>
<p>The most basic option is a simple string argument of one value.  If no
type is provided, the type of the default value is used, and if no default
value is provided, the type is assumed to be <a class="reference internal" href="index.html#click.STRING" title="click.STRING"><code class="xref py py-data docutils literal"><span class="pre">STRING</span></code></a>.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;filename&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">touch</span><span class="p">(</span><span class="n">filename</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ touch foo.txt
foo.txt
</pre></div>
</div>
</div>
<div class="section" id="variadic-arguments">
<h4>Variadic Arguments<a class="headerlink" href="#variadic-arguments" title="Permalink to this headline">¶</a></h4>
<p>The second most common version is variadic arguments where a specific (or
unlimited) number of arguments is accepted.  This can be controlled with
the <code class="docutils literal"><span class="pre">nargs</span></code> parameter.  If it is set to <code class="docutils literal"><span class="pre">-1</span></code>, then an unlimited number
of arguments is accepted.</p>
<p>The value is then passed as a tuple.  Note that only one argument can be
set to <code class="docutils literal"><span class="pre">nargs=-1</span></code>, as it will eat up all arguments.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;dst&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">copy</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">fn</span> <span class="ow">in</span> <span class="n">src</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;move </span><span class="si">%s</span><span class="s1"> to folder </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">fn</span><span class="p">,</span> <span class="n">dst</span><span class="p">))</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ copy foo.txt bar.txt my_folder
move foo.txt to folder my_folder
move bar.txt to folder my_folder
</pre></div>
</div>
<p>Note that this is not how you would write this application.  The reason
for this is that in this particular example the arguments are defined as
strings.  Filenames, however, are not strings!  They might be on certain
operating systems, but not necessarily on all.  For better ways to write
this, see the next sections.</p>
<div class="admonition-note-on-non-empty-variadic-arguments admonition">
<p class="first admonition-title">Note on Non-Empty Variadic Arguments</p>
<p>If you come from <code class="docutils literal"><span class="pre">argparse</span></code>, you might be missing support for setting
<code class="docutils literal"><span class="pre">nargs</span></code> to <code class="docutils literal"><span class="pre">+</span></code> to indicate that at least one argument is required.</p>
<p class="last">This is supported by setting <code class="docutils literal"><span class="pre">required=True</span></code>.  However, this should
not be used if you can avoid it as we believe scripts should gracefully
degrade into becoming noops if a variadic argument is empty.  The
reason for this is that very often, scripts are invoked with wildcard
inputs from the command line and they should not error out if the
wildcard is empty.</p>
</div>
</div>
<div class="section" id="file-arguments">
<span id="file-args"></span><h4>File Arguments<a class="headerlink" href="#file-arguments" title="Permalink to this headline">¶</a></h4>
<p>Since all the examples have already worked with filenames, it makes sense
to explain how to deal with files properly.  Command line tools are more
fun if they work with files the Unix way, which is to accept <code class="docutils literal"><span class="pre">-</span></code> as a
special file that refers to stdin/stdout.</p>
<p>Click supports this through the <a class="reference internal" href="index.html#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">click.File</span></code></a> type which
intelligently handles files for you.  It also deals with Unicode and bytes
correctly for all versions of Python so your script stays very portable.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;input&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;rb&#39;</span><span class="p">))</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;output&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;wb&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">inout</span><span class="p">(</span><span class="nb">input</span><span class="p">,</span> <span class="n">output</span><span class="p">):</span>
    <span class="k">while</span> <span class="bp">True</span><span class="p">:</span>
        <span class="n">chunk</span> <span class="o">=</span> <span class="nb">input</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">1024</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">chunk</span><span class="p">:</span>
            <span class="k">break</span>
        <span class="n">output</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it does:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ inout - hello.txt
hello
^D
$ inout hello.txt -
hello
</pre></div>
</div>
</div>
<div class="section" id="file-path-arguments">
<h4>File Path Arguments<a class="headerlink" href="#file-path-arguments" title="Permalink to this headline">¶</a></h4>
<p>In the previous example, the files were opened immediately.  But what if
we just want the filename?  The naïve way is to use the default string
argument type.  However, remember that Click is Unicode-based, so the string
will always be a Unicode value.  Unfortunately, filenames can be Unicode or
bytes depending on which operating system is being used.  As such, the type
is insufficient.</p>
<p>Instead, you should be using the <a class="reference internal" href="index.html#click.Path" title="click.Path"><code class="xref py py-class docutils literal"><span class="pre">Path</span></code></a> type, which automatically
handles this ambiguity.  Not only will it return either bytes or Unicode
depending on what makes more sense, but it will also be able to do some
basic checks for you such as existence checks.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="n">exists</span><span class="o">=</span><span class="bp">True</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">touch</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">format_filename</span><span class="p">(</span><span class="n">f</span><span class="p">))</span>
</pre></div>
</div>
<p>And what it does:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ touch hello.txt
hello.txt

$ touch missing.txt
Usage: touch [OPTIONS] F

Error: Invalid value for &quot;f&quot;: Path &quot;missing.txt&quot; does not exist.
</pre></div>
</div>
</div>
<div class="section" id="file-opening-safety">
<h4>File Opening Safety<a class="headerlink" href="#file-opening-safety" title="Permalink to this headline">¶</a></h4>
<p>The <code class="xref py py-class docutils literal"><span class="pre">FileType</span></code> type has one problem it needs to deal with, and that
is to decide when to open a file.  The default behavior is to be
&#8220;intelligent&#8221; about it.  What this means is that it will open stdin/stdout
and files opened for reading immediately.  This will give the user direct
feedback when a file cannot be opened, but it will only open files
for writing the first time an IO operation is performed by automatically
wrapping the file in a special wrapper.</p>
<p>This behavior can be forced by passing <code class="docutils literal"><span class="pre">lazy=True</span></code> or <code class="docutils literal"><span class="pre">lazy=False</span></code> to
the constructor.  If the file is opened lazily, it will fail its first IO
operation by raising an <a class="reference internal" href="index.html#click.FileError" title="click.FileError"><code class="xref py py-exc docutils literal"><span class="pre">FileError</span></code></a>.</p>
<p>Since files opened for writing will typically immediately empty the file,
the lazy mode should only be disabled if the developer is absolutely sure
that this is intended behavior.</p>
<p>Forcing lazy mode is also very useful to avoid resource handling
confusion.  If a file is opened in lazy mode, it will receive a
<code class="docutils literal"><span class="pre">close_intelligently</span></code> method that can help figure out if the file
needs closing or not.  This is not needed for parameters, but is
necessary for manually prompting with the <a class="reference internal" href="index.html#click.prompt" title="click.prompt"><code class="xref py py-func docutils literal"><span class="pre">prompt()</span></code></a> function as you
do not know if a stream like stdout was opened (which was already open
before) or a real file that needs closing.</p>
<p>Starting with Click 2.0, it is also possible to open files in atomic mode by
passing <code class="docutils literal"><span class="pre">atomic=True</span></code>.  In atomic mode, all writes go into a separate
file in the same folder, and upon completion, the file will be moved over to
the original location.  This is useful if a file regularly read by other
users is modified.</p>
</div>
<div class="section" id="environment-variables">
<h4>Environment Variables<a class="headerlink" href="#environment-variables" title="Permalink to this headline">¶</a></h4>
<p>Like options, arguments can also grab values from an environment variable.
Unlike options, however, this is only supported for explicitly named
environment variables.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">,</span> <span class="n">envvar</span><span class="o">=</span><span class="s1">&#39;SRC&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">echo</span><span class="p">(</span><span class="n">src</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">src</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ export SRC=hello.txt
$ echo
Hello World!
</pre></div>
</div>
<p>In that case, it can also be a list of different environment variables
where the first one is picked.</p>
<p>Generally, this feature is not recommended because it can cause the user
a lot of confusion.</p>
</div>
<div class="section" id="option-like-arguments">
<h4>Option-Like Arguments<a class="headerlink" href="#option-like-arguments" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, you want to process arguments that look like options.  For
instance, imagine you have a file named <code class="docutils literal"><span class="pre">-foo.txt</span></code>.  If you pass this as
an argument in this manner, Click will treat it as an option.</p>
<p>To solve this, Click does what any POSIX style command line script does,
and that is to accept the string <code class="docutils literal"><span class="pre">--</span></code> as a separator for options and
arguments.  After the <code class="docutils literal"><span class="pre">--</span></code> marker, all further parameters are accepted as
arguments.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;files&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">Path</span><span class="p">())</span>
<span class="k">def</span> <span class="nf">touch</span><span class="p">(</span><span class="n">files</span><span class="p">):</span>
    <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span>
</pre></div>
</div>
<p>And from the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ touch -- -foo.txt bar.txt
-foo.txt
bar.txt
</pre></div>
</div>
</div>
</div>
<span id="document-commands"></span><div class="section" id="commands-and-groups">
<h3>Commands and Groups<a class="headerlink" href="#commands-and-groups" title="Permalink to this headline">¶</a></h3>
<p>The most important feature of Click is the concept of arbitrarily nesting
command line utilities.  This is implemented through the <a class="reference internal" href="index.html#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a>
and <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> (actually <a class="reference internal" href="index.html#click.MultiCommand" title="click.MultiCommand"><code class="xref py py-class docutils literal"><span class="pre">MultiCommand</span></code></a>).</p>
<div class="section" id="callback-invocation">
<h4>Callback Invocation<a class="headerlink" href="#callback-invocation" title="Permalink to this headline">¶</a></h4>
<p>For a regular command, the callback is executed whenever the command runs.
If the script is the only command, it will always fire (unless a parameter
callback prevents it.  This for instance happens if someone passes
<code class="docutils literal"><span class="pre">--help</span></code> to the script).</p>
<p>For groups and multi commands, the situation looks different.  In this case,
the callback fires whenever a subcommand fires (unless this behavior is
changed).  What this means in practice is that an outer command runs
when an inner command runs:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--debug/--no-debug&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">debug</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Debug mode is </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;on&#39;</span> <span class="k">if</span> <span class="n">debug</span> <span class="k">else</span> <span class="s1">&#39;off&#39;</span><span class="p">))</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">sync</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Synching&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Here is what this looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ tool.py
Usage: tool.py [OPTIONS] COMMAND [ARGS]...

Options:
  --debug / --no-debug
  --help                Show this message and exit.

Commands:
  sync

$ tool.py --debug sync
Debug mode is on
Synching
</pre></div>
</div>
</div>
<div class="section" id="passing-parameters">
<h4>Passing Parameters<a class="headerlink" href="#passing-parameters" title="Permalink to this headline">¶</a></h4>
<p>Click strictly separates parameters between commands and subcommands. What this
means is that options and arguments for a specific command have to be specified
<em>after</em> the command name itself, but <em>before</em> any other command names.</p>
<p>This behavior is already observable with the predefined <code class="docutils literal"><span class="pre">--help</span></code> option.
Suppose we have a program called <code class="docutils literal"><span class="pre">tool.py</span></code>, containing a subcommand called
<code class="docutils literal"><span class="pre">sub</span></code>.</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">tool.py</span> <span class="pre">--help</span></code> will return the help for the whole program (listing
subcommands).</li>
<li><code class="docutils literal"><span class="pre">tool.py</span> <span class="pre">sub</span> <span class="pre">--help</span></code> will return the help for the <code class="docutils literal"><span class="pre">sub</span></code> subcommand.</li>
<li>But <code class="docutils literal"><span class="pre">tool.py</span> <span class="pre">--help</span> <span class="pre">sub</span></code> will treat <code class="docutils literal"><span class="pre">--help</span></code> as an argument for the main
program. Click then invokes the callback for <code class="docutils literal"><span class="pre">--help</span></code>, which prints the
help and aborts the program before click can process the subcommand.</li>
</ul>
</div>
<div class="section" id="nested-handling-and-contexts">
<h4>Nested Handling and Contexts<a class="headerlink" href="#nested-handling-and-contexts" title="Permalink to this headline">¶</a></h4>
<p>As you can see from the earlier example, the basic command group accepts a
debug argument which is passed to its callback, but not to the sync
command itself.  The sync command only accepts its own arguments.</p>
<p>This allows tools to act completely independent of each other, but how
does one command talk to a nested one?  The answer to this is the
<a class="reference internal" href="index.html#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a>.</p>
<p>Each time a command is invoked, a new context is created and linked with the
parent context.  Normally, you can&#8217;t see these contexts, but they are
there.  Contexts are passed to parameter callbacks together with the
value automatically.  Commands can also ask for the context to be passed
by marking themselves with the <a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a> decorator.  In that
case, the context is passed as first argument.</p>
<p>The context can also carry a program specified object that can be
used for the program&#8217;s purposes.  What this means is that you can build a
script like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--debug/--no-debug&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@click.pass_context</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">debug</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">debug</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.pass_context</span>
<span class="k">def</span> <span class="nf">sync</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Debug is </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">ctx</span><span class="o">.</span><span class="n">obj</span><span class="p">[</span><span class="s1">&#39;DEBUG&#39;</span><span class="p">]</span> <span class="ow">and</span> <span class="s1">&#39;on&#39;</span> <span class="ow">or</span> <span class="s1">&#39;off&#39;</span><span class="p">))</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">cli</span><span class="p">(</span><span class="n">obj</span><span class="o">=</span><span class="p">{})</span>
</pre></div>
</div>
<p>If the object is provided, each context will pass the object onwards to
its children, but at any level a context&#8217;s object can be overridden.  To
reach to a parent, <code class="docutils literal"><span class="pre">context.parent</span></code> can be used.</p>
<p>In addition to that, instead of passing an object down, nothing stops the
application from modifying global state.  For instance, you could just flip
a global <code class="docutils literal"><span class="pre">DEBUG</span></code> variable and be done with it.</p>
</div>
<div class="section" id="decorating-commands">
<h4>Decorating Commands<a class="headerlink" href="#decorating-commands" title="Permalink to this headline">¶</a></h4>
<p>As you have seen in the earlier example, a decorator can change how a
command is invoked.  What actually happens behind the scenes is that
callbacks are always invoked through the <a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-meth docutils literal"><span class="pre">Context.invoke()</span></code></a> method
which automatically invokes a command correctly (by either passing the
context or not).</p>
<p>This is very useful when you want to write custom decorators.  For
instance, a common pattern would be to configure an object representing
state and then storing it on the context and then to use a custom
decorator to find the most recent object of this sort and pass it as first
argument.</p>
<p>For instance, the <a class="reference internal" href="index.html#click.pass_obj" title="click.pass_obj"><code class="xref py py-func docutils literal"><span class="pre">pass_obj()</span></code></a> decorator can be implemented like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="kn">import</span> <span class="n">update_wrapper</span>

<span class="k">def</span> <span class="nf">pass_obj</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@click.pass_context</span>
    <span class="k">def</span> <span class="nf">new_func</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">ctx</span><span class="o">.</span><span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">update_wrapper</span><span class="p">(</span><span class="n">new_func</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>The <a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-meth docutils literal"><span class="pre">Context.invoke()</span></code></a> command will automatically invoke the function
in the correct way, so the function will either be called with <code class="docutils literal"><span class="pre">f(ctx,</span>
<span class="pre">obj)</span></code> or <code class="docutils literal"><span class="pre">f(obj)</span></code> depending on whether or not it itself is decorated with
<a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a>.</p>
<p>This is a very powerful concept that can be used to build very complex
nested applications; see <a class="reference internal" href="index.html#complex-guide"><span class="std std-ref">Complex Applications</span></a> for more information.</p>
</div>
<div class="section" id="group-invocation-without-command">
<h4>Group Invocation Without Command<a class="headerlink" href="#group-invocation-without-command" title="Permalink to this headline">¶</a></h4>
<p>By default, a group or multi command is not invoked unless a subcommand is
passed.  In fact, not providing a command automatically passes <code class="docutils literal"><span class="pre">--help</span></code>
by default.  This behavior can be changed by passing
<code class="docutils literal"><span class="pre">invoke_without_command=True</span></code> to a group.  In that case, the callback is
always invoked instead of showing the help page.  The context object also
includes information about whether or not the invocation would go to a
subcommand.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">(</span><span class="n">invoke_without_command</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="nd">@click.pass_context</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">ctx</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">ctx</span><span class="o">.</span><span class="n">invoked_subcommand</span> <span class="ow">is</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;I was invoked without subcommand&#39;</span><span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;I am about to invoke </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">ctx</span><span class="o">.</span><span class="n">invoked_subcommand</span><span class="p">)</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">sync</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;The subcommand&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>And how it works in practice:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ tool
I was invoked without subcommand
$ tool sync
I am about to invoke sync
The subcommand
</pre></div>
</div>
</div>
<div class="section" id="custom-multi-commands">
<span id="id1"></span><h4>Custom Multi Commands<a class="headerlink" href="#custom-multi-commands" title="Permalink to this headline">¶</a></h4>
<p>In addition to using <a class="reference internal" href="index.html#click.group" title="click.group"><code class="xref py py-func docutils literal"><span class="pre">click.group()</span></code></a>, you can also build your own
custom multi commands.  This is useful when you want to support commands
being loaded lazily from plugins.</p>
<p>A custom multi command just needs to implement a list and load method:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">import</span> <span class="nn">os</span>

<span class="n">plugin_folder</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">dirname</span><span class="p">(</span><span class="n">__file__</span><span class="p">),</span> <span class="s1">&#39;commands&#39;</span><span class="p">)</span>

<span class="k">class</span> <span class="nc">MyCLI</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">MultiCommand</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">list_commands</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="p">[]</span>
        <span class="k">for</span> <span class="n">filename</span> <span class="ow">in</span> <span class="n">os</span><span class="o">.</span><span class="n">listdir</span><span class="p">(</span><span class="n">plugin_folder</span><span class="p">):</span>
            <span class="k">if</span> <span class="n">filename</span><span class="o">.</span><span class="n">endswith</span><span class="p">(</span><span class="s1">&#39;.py&#39;</span><span class="p">):</span>
                <span class="n">rv</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">filename</span><span class="p">[:</span><span class="o">-</span><span class="mi">3</span><span class="p">])</span>
        <span class="n">rv</span><span class="o">.</span><span class="n">sort</span><span class="p">()</span>
        <span class="k">return</span> <span class="n">rv</span>

    <span class="k">def</span> <span class="nf">get_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
        <span class="n">ns</span> <span class="o">=</span> <span class="p">{}</span>
        <span class="n">fn</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">plugin_folder</span><span class="p">,</span> <span class="n">name</span> <span class="o">+</span> <span class="s1">&#39;.py&#39;</span><span class="p">)</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">fn</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">code</span> <span class="o">=</span> <span class="nb">compile</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">(),</span> <span class="n">fn</span><span class="p">,</span> <span class="s1">&#39;exec&#39;</span><span class="p">)</span>
            <span class="nb">eval</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">ns</span><span class="p">,</span> <span class="n">ns</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ns</span><span class="p">[</span><span class="s1">&#39;cli&#39;</span><span class="p">]</span>

<span class="n">cli</span> <span class="o">=</span> <span class="n">MyCLI</span><span class="p">(</span><span class="n">help</span><span class="o">=</span><span class="s1">&#39;This tool</span><span class="se">\&#39;</span><span class="s1">s subcommands are loaded from a &#39;</span>
            <span class="s1">&#39;plugin folder dynamically.&#39;</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">cli</span><span class="p">()</span>
</pre></div>
</div>
<p>These custom classes can also be used with decorators:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">(</span><span class="n">cls</span><span class="o">=</span><span class="n">MyCLI</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="merging-multi-commands">
<h4>Merging Multi Commands<a class="headerlink" href="#merging-multi-commands" title="Permalink to this headline">¶</a></h4>
<p>In addition to implementing custom multi commands, it can also be
interesting to merge multiple together into one script.  While this is
generally not as recommended as it nests one below the other, the merging
approach can be useful in some circumstances for a nicer shell experience.</p>
<p>The default implementation for such a merging system is the
<a class="reference internal" href="index.html#click.CommandCollection" title="click.CommandCollection"><code class="xref py py-class docutils literal"><span class="pre">CommandCollection</span></code></a> class.  It accepts a list of other multi
commands and makes the commands available on the same level.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli1</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli1.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cmd1</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Command on cli1&quot;&quot;&quot;</span>

<span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli2</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli2.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cmd2</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Command on cli2&quot;&quot;&quot;</span>

<span class="n">cli</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">CommandCollection</span><span class="p">(</span><span class="n">sources</span><span class="o">=</span><span class="p">[</span><span class="n">cli1</span><span class="p">,</span> <span class="n">cli2</span><span class="p">])</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">cli</span><span class="p">()</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli --help
Usage: cli [OPTIONS] COMMAND [ARGS]...

Options:
  --help  Show this message and exit.

Commands:
  cmd1  Command on cli1
  cmd2  Command on cli2
</pre></div>
</div>
<p>In case a command exists in more than one source, the first source wins.</p>
</div>
<div class="section" id="multi-command-chaining">
<span id="id2"></span><h4>Multi Command Chaining<a class="headerlink" href="#multi-command-chaining" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<p>Sometimes it is useful to be allowed to invoke more than one subcommand in
one go.  For instance if you have installed a setuptools package before
you might be familiar with the <code class="docutils literal"><span class="pre">setup.py</span> <span class="pre">sdist</span> <span class="pre">bdist_wheel</span> <span class="pre">upload</span></code>
command chain which invokes <code class="docutils literal"><span class="pre">dist</span></code> before <code class="docutils literal"><span class="pre">bdist_wheel</span></code> before
<code class="docutils literal"><span class="pre">upload</span></code>.  Starting with Click 3.0 this is very simple to implement.
All you have to do is to pass <code class="docutils literal"><span class="pre">chain=True</span></code> to your multicommand:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">(</span><span class="n">chain</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>


<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;sdist&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">sdist</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;sdist called&#39;</span><span class="p">)</span>


<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;bdist_wheel&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">bdist_wheel</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;bdist_wheel called&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Now you can invoke it like this:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ setup.py sdist bdist_wheel
sdist called
bdist_wheel called
</pre></div>
</div>
<p>When using multi command chaining you can only have one command (the last)
use <code class="docutils literal"><span class="pre">nargs=-1</span></code> on an argument.  It is also not possible to nest multi
commands below chained multicommands.  Other than that there are no
restrictions on how they work.  They can accept options and arguments as
normal.</p>
<p>Another note: the <a class="reference internal" href="index.html#click.Context.invoked_subcommand" title="click.Context.invoked_subcommand"><code class="xref py py-attr docutils literal"><span class="pre">Context.invoked_subcommand</span></code></a> attribute is a bit
useless for multi commands as it will give <code class="docutils literal"><span class="pre">'*'</span></code> as value if more than
one command is invoked.  This is necessary because the handling of
subcommands happens one after another so the exact subcommands that will
be handled are not yet available when the callback fires.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">It is currently not possible for chain commands to be nested.  This
will be fixed in future versions of Click.</p>
</div>
</div>
<div class="section" id="multi-command-pipelines">
<h4>Multi Command Pipelines<a class="headerlink" href="#multi-command-pipelines" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<p>A very common usecase of multi command chaining is to have one command
process the result of the previous command.  There are various ways in
which this can be facilitated.  The most obvious way is to store a value
on the context object and process it from function to function.  This
works by decorating a function with <a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a> after which the
context object is provided and a subcommand can store its data there.</p>
<p>Another way to accomplish this is to setup pipelines by returning
processing functions.  Think of it like this: when a subcommand gets
invoked it processes all of its parameters and comes up with a plan of
how to do its processing.  At that point it then returns a processing
function and returns.</p>
<p>Where do the returned functions go?  The chained multicommand can register
a callback with <a class="reference internal" href="index.html#click.MultiCommand.resultcallback" title="click.MultiCommand.resultcallback"><code class="xref py py-meth docutils literal"><span class="pre">MultiCommand.resultcallback()</span></code></a> that goes over all
these functions and then invoke them.</p>
<p>To make this a bit more concrete consider this example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">(</span><span class="n">chain</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">invoke_without_command</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">(</span><span class="s1">&#39;r&#39;</span><span class="p">))</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">pass</span>

<span class="nd">@cli.resultcallback</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">process_pipeline</span><span class="p">(</span><span class="n">processors</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
    <span class="n">iterator</span> <span class="o">=</span> <span class="p">(</span><span class="n">x</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\r\n</span><span class="s1">&#39;</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">input</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">processor</span> <span class="ow">in</span> <span class="n">processors</span><span class="p">:</span>
        <span class="n">iterator</span> <span class="o">=</span> <span class="n">processor</span><span class="p">(</span><span class="n">iterator</span><span class="p">)</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>

<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;uppercase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_uppercase</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">processor</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">processor</span>

<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;lowercase&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_lowercase</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">processor</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">processor</span>

<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;strip&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">make_strip</span><span class="p">():</span>
    <span class="k">def</span> <span class="nf">processor</span><span class="p">(</span><span class="n">iterator</span><span class="p">):</span>
        <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">iterator</span><span class="p">:</span>
            <span class="k">yield</span> <span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">processor</span>
</pre></div>
</div>
<p>That&#8217;s a lot in one go, so let&#8217;s go through it step by step.</p>
<ol class="arabic simple">
<li>The first thing is to make a <a class="reference internal" href="index.html#click.group" title="click.group"><code class="xref py py-func docutils literal"><span class="pre">group()</span></code></a> that is chainable.  In
addition to that we also instruct Click to invoke even if no
subcommand is defined.  If this would not be done, then invoking an
empty pipeline would produce the help page instead of running the
result callbacks.</li>
<li>The next thing we do is to register a result callback on our group.
This callback will be invoked with an argument which is the list of
all return values of all subcommands and then the same keyword
parameters as our group itself.  This means we can access the input
file easily there without having to use the context object.</li>
<li>In this result callback we create an iterator of all the lines in the
input file and then pass this iterator through all the returned
callbacks from all subcommands and finally we print all lines to
stdout.</li>
</ol>
<p>After that point we can register as many subcommands as we want and each
subcommand can return a processor function to modify the stream of lines.</p>
<p>One important thing of note is that Click shuts down the context after
each callback has been run.  This means that for instance file types
cannot be accessed in the <cite>processor</cite> functions as the files will already
be closed there.  This limitation is unlikely to change because it would
make resource handling much more complicated.  For such it&#8217;s recommended
to not use the file type and manually open the file through
<a class="reference internal" href="index.html#click.open_file" title="click.open_file"><code class="xref py py-func docutils literal"><span class="pre">open_file()</span></code></a>.</p>
<p>For a more complex example that also improves upon handling of the
pipelines have a look at the <a class="reference external" href="https://github.com/mitsuhiko/click/tree/master/examples/imagepipe">imagepipe multi command chaining demo</a> in
the Click repository.  It implements a pipeline based image editing tool
that has a nice internal structure for the pipelines.</p>
</div>
<div class="section" id="overriding-defaults">
<h4>Overriding Defaults<a class="headerlink" href="#overriding-defaults" title="Permalink to this headline">¶</a></h4>
<p>By default, the default value for a parameter is pulled from the
<code class="docutils literal"><span class="pre">default</span></code> flag that is provided when it&#8217;s defined, but that&#8217;s not the
only place defaults can be loaded from.  The other place is the
<code class="xref py py-attr docutils literal"><span class="pre">Context.default_map</span></code> (a dictionary) on the context.  This allows
defaults to be loaded from a configuration file to override the regular
defaults.</p>
<p>This is useful if you plug in some commands from another package but
you&#8217;re not satisfied with the defaults.</p>
<p>The default map can be nested arbitrarily for each subcommand and
provided when the script is invoked.  Alternatively, it can also be
overriden at any point by commands.  For instance, a top-level command could
load the defaults from a configuration file.</p>
<p>Example usage:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--port&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">runserver</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Serving on http://127.0.0.1:</span><span class="si">%d</span><span class="s1">/&#39;</span> <span class="o">%</span> <span class="n">port</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">cli</span><span class="p">(</span><span class="n">default_map</span><span class="o">=</span><span class="p">{</span>
        <span class="s1">&#39;runserver&#39;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">5000</span>
        <span class="p">}</span>
    <span class="p">})</span>
</pre></div>
</div>
<p>And in action:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli runserver
Serving on http://127.0.0.1:5000/
</pre></div>
</div>
</div>
<div class="section" id="context-defaults">
<h4>Context Defaults<a class="headerlink" href="#context-defaults" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Starting with Click 2.0 you can override defaults for contexts not just
when calling your script, but also in the decorator that declares a
command.  For instance given the previous example which defines a custom
<code class="docutils literal"><span class="pre">default_map</span></code> this can also be accomplished in the decorator now.</p>
<p>This example does the same as the previous example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">CONTEXT_SETTINGS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span>
    <span class="n">default_map</span><span class="o">=</span><span class="p">{</span><span class="s1">&#39;runserver&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;port&#39;</span><span class="p">:</span> <span class="mi">5000</span><span class="p">}}</span>
<span class="p">)</span>

<span class="nd">@click.group</span><span class="p">(</span><span class="n">context_settings</span><span class="o">=</span><span class="n">CONTEXT_SETTINGS</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--port&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">8000</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">runserver</span><span class="p">(</span><span class="n">port</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Serving on http://127.0.0.1:</span><span class="si">%d</span><span class="s1">/&#39;</span> <span class="o">%</span> <span class="n">port</span><span class="p">)</span>

<span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s1">&#39;__main__&#39;</span><span class="p">:</span>
    <span class="n">cli</span><span class="p">()</span>
</pre></div>
</div>
<p>And again the example in action:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli runserver
Serving on http://127.0.0.1:5000/
</pre></div>
</div>
</div>
<div class="section" id="command-return-values">
<h4>Command Return Values<a class="headerlink" href="#command-return-values" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<p>One of the new introductions in Click 3.0 is the full support for return
values from command callbacks.  This enables a whole range of features
that were previously hard to implement.</p>
<p>In essence any command callback can now return a value.  This return value
is bubbled to certain receivers.  One usecase for this has already been
show in the example of <a class="reference internal" href="#multi-command-chaining"><span class="std std-ref">Multi Command Chaining</span></a> where it has been
demonstrated that chained multi commands can have callbacks that process
all return values.</p>
<p>When working with command return values in Click, this is what you need to
know:</p>
<ul class="simple">
<li>The return value of a command callback is generally returned from the
<a class="reference internal" href="index.html#click.BaseCommand.invoke" title="click.BaseCommand.invoke"><code class="xref py py-meth docutils literal"><span class="pre">BaseCommand.invoke()</span></code></a> method.  The exception to this rule has to
do with <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a>s:<ul>
<li>In a group the return value is generally the return value of the
subcommand invoked.  The only exception to this rule is that the
return value is the return value of the group callback if it&#8217;s
invoked without arguments and <cite>invoke_without_command</cite> is enabled.</li>
<li>If a group is set up for chaining then the return value is a list
of all subcommands&#8217; results.</li>
<li>Return values of groups can be processed through a
<a class="reference internal" href="index.html#click.MultiCommand.result_callback" title="click.MultiCommand.result_callback"><code class="xref py py-attr docutils literal"><span class="pre">MultiCommand.result_callback</span></code></a>.  This is invoked with the
list of all return values in chain mode, or the single return
value in case of non chained commands.</li>
</ul>
</li>
<li>The return value is bubbled through from the <a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-meth docutils literal"><span class="pre">Context.invoke()</span></code></a>
and <a class="reference internal" href="index.html#click.Context.forward" title="click.Context.forward"><code class="xref py py-meth docutils literal"><span class="pre">Context.forward()</span></code></a> methods.  This is useful in situations
where you internally want to call into another command.</li>
<li>Click does not have any hard requirements for the return values and
does not use them itself.  This allows return values to be used for
custom decorators or workflows (like in the multi command chaining
example).</li>
<li>When a Click script is invoked as command line application (through
<a class="reference internal" href="index.html#click.BaseCommand.main" title="click.BaseCommand.main"><code class="xref py py-meth docutils literal"><span class="pre">BaseCommand.main()</span></code></a>) the return value is ignored unless the
<cite>standalone_mode</cite> is disabled in which case it&#8217;s bubbled through.</li>
</ul>
</div>
</div>
<span id="document-prompts"></span><div class="section" id="user-input-prompts">
<h3>User Input Prompts<a class="headerlink" href="#user-input-prompts" title="Permalink to this headline">¶</a></h3>
<p>Click supports prompts in two different places.  The first is automated
prompts when the parameter handling happens, and the second is to ask for
prompts at a later point independently.</p>
<p>This can be accomplished with the <a class="reference internal" href="index.html#click.prompt" title="click.prompt"><code class="xref py py-func docutils literal"><span class="pre">prompt()</span></code></a> function, which asks for
valid input according to a type, or the <a class="reference internal" href="index.html#click.confirm" title="click.confirm"><code class="xref py py-func docutils literal"><span class="pre">confirm()</span></code></a> function, which asks
for confirmation (yes/no).</p>
<div class="section" id="option-prompts">
<h4>Option Prompts<a class="headerlink" href="#option-prompts" title="Permalink to this headline">¶</a></h4>
<p>Option prompts are integrated into the option interface.  See
<a class="reference internal" href="index.html#option-prompting"><span class="std std-ref">Prompting</span></a> for more information.  Internally, it
automatically calls either <a class="reference internal" href="index.html#click.prompt" title="click.prompt"><code class="xref py py-func docutils literal"><span class="pre">prompt()</span></code></a> or <a class="reference internal" href="index.html#click.confirm" title="click.confirm"><code class="xref py py-func docutils literal"><span class="pre">confirm()</span></code></a> as necessary.</p>
</div>
<div class="section" id="input-prompts">
<h4>Input Prompts<a class="headerlink" href="#input-prompts" title="Permalink to this headline">¶</a></h4>
<p>To manually ask for user input, you can use the <a class="reference internal" href="index.html#click.prompt" title="click.prompt"><code class="xref py py-func docutils literal"><span class="pre">prompt()</span></code></a> function.
By default, it accepts any Unicode string, but you can ask for any other
type.  For instance, you can ask for a valid integer:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s1">&#39;Please enter a valid integer&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="nb">int</span><span class="p">)</span>
</pre></div>
</div>
<p>Additionally, the type will be determined automatically if a default value is
provided.  For instance, the following will only accept floats:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">value</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">prompt</span><span class="p">(</span><span class="s1">&#39;Please enter a number&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mf">42.0</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="confirmation-prompts">
<h4>Confirmation Prompts<a class="headerlink" href="#confirmation-prompts" title="Permalink to this headline">¶</a></h4>
<p>To ask if a user wants to continue with an action, the <a class="reference internal" href="index.html#click.confirm" title="click.confirm"><code class="xref py py-func docutils literal"><span class="pre">confirm()</span></code></a>
function comes in handy.  By default, it returns the result of the prompt
as a boolean value:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="n">click</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s1">&#39;Do you want to continue?&#39;</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Well done!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>There is also the option to make the function automatically abort the
execution of the program if it does not return <code class="docutils literal"><span class="pre">True</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">confirm</span><span class="p">(</span><span class="s1">&#39;Do you want to continue?&#39;</span><span class="p">,</span> <span class="n">abort</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-documentation"></span><div class="section" id="documenting-scripts">
<h3>Documenting Scripts<a class="headerlink" href="#documenting-scripts" title="Permalink to this headline">¶</a></h3>
<p>Click makes it very easy to document your command line tools.  First of
all, it automatically generates help pages for you.  While these are
currently not customizable in terms of their layout, all of the text
can be changed.</p>
<div class="section" id="help-texts">
<h4>Help Texts<a class="headerlink" href="#help-texts" title="Permalink to this headline">¶</a></h4>
<p>Commands and options accept help arguments.  In the case of commands, the
docstring of the function is automatically used if provided.</p>
<p>Simple example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;number of greetings&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This script prints hello NAME COUNT times.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ hello --help
Usage: hello [OPTIONS] NAME

  This script prints hello NAME COUNT times.

Options:
  --count INTEGER  number of greetings
  --help           Show this message and exit.
</pre></div>
</div>
<p>Arguments cannot be documented this way.  This is to follow the general
convention of Unix tools of using arguments for only the most necessary
things and to document them in the introduction text by referring to them
by name.</p>
</div>
<div class="section" id="preventing-rewrapping">
<h4>Preventing Rewrapping<a class="headerlink" href="#preventing-rewrapping" title="Permalink to this headline">¶</a></h4>
<p>The default behavior of Click is to rewrap text based on the width of the
terminal.  In some circumstances, this can become a problem. The main issue
is when showing code examples, where newlines are significant.</p>
<p>Rewrapping can be disabled on a per-paragraph basis by adding a line with
solely the <code class="docutils literal"><span class="pre">\b</span></code> escape marker in it.  This line will be removed from the
help text and rewrapping will be disabled.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;First paragraph.</span>

<span class="sd">    This is a very long second paragraph and as you</span>
<span class="sd">    can see wrapped very early in the source text</span>
<span class="sd">    but will be rewrapped to the terminal width in</span>
<span class="sd">    the final output.</span>

<span class="sd">    \b</span>
<span class="sd">    This is</span>
<span class="sd">    a paragraph</span>
<span class="sd">    without rewrapping.</span>

<span class="sd">    And this is a paragraph</span>
<span class="sd">    that will be rewrapped again.</span>
<span class="sd">    &quot;&quot;&quot;</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli --help
Usage: cli [OPTIONS]

  First paragraph.

  This is a very long second paragraph and as you can see wrapped very early
  in the source text but will be rewrapped to the terminal width in the
  final output.

  This is
  a paragraph
  without rewrapping.

  And this is a paragraph that will be rewrapped again.

Options:
  --help  Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="meta-variables">
<h4>Meta Variables<a class="headerlink" href="#meta-variables" title="Permalink to this headline">¶</a></h4>
<p>Options and parameters accept a <code class="docutils literal"><span class="pre">metavar</span></code> argument that can change the
meta variable in the help page.  The default version is the parameter name
in uppercase with underscores, but can be annotated differently if
desired.  This can be customized at all levels:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">(</span><span class="n">options_metavar</span><span class="o">=</span><span class="s1">&#39;&lt;options&gt;&#39;</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;number of greetings&#39;</span><span class="p">,</span>
              <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&lt;int&gt;&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="n">metavar</span><span class="o">=</span><span class="s1">&#39;&lt;name&gt;&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">count</span><span class="p">,</span> <span class="n">name</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;This script prints hello &lt;name&gt; &lt;int&gt; times.&quot;&quot;&quot;</span>
    <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>Example:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ hello --help
Usage: hello &lt;options&gt; &lt;name&gt;

  This script prints hello &lt;name&gt; &lt;int&gt; times.

Options:
  --count &lt;int&gt;  number of greetings
  --help         Show this message and exit.
</pre></div>
</div>
</div>
<div class="section" id="command-short-help">
<h4>Command Short Help<a class="headerlink" href="#command-short-help" title="Permalink to this headline">¶</a></h4>
<p>For commands, a short help snippet is generated.  By default, it&#8217;s the first
sentence of the help message of the command, unless it&#8217;s too long.  This can
also be overridden:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.group</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;A simple command line tool.&quot;&quot;&quot;</span>

<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;init&#39;</span><span class="p">,</span> <span class="n">short_help</span><span class="o">=</span><span class="s1">&#39;init the repo&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">init</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Initializes the repository.&quot;&quot;&quot;</span>

<span class="nd">@cli.command</span><span class="p">(</span><span class="s1">&#39;delete&#39;</span><span class="p">,</span> <span class="n">short_help</span><span class="o">=</span><span class="s1">&#39;delete the repo&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">delete</span><span class="p">():</span>
    <span class="sd">&quot;&quot;&quot;Deletes the repository.&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ repo.py
Usage: repo.py [OPTIONS] COMMAND [ARGS]...

  A simple command line tool.

Options:
  --help  Show this message and exit.

Commands:
  delete  delete the repo
  init    init the repo
</pre></div>
</div>
</div>
<div class="section" id="help-parameter-customization">
<h4>Help Parameter Customization<a class="headerlink" href="#help-parameter-customization" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>The help parameter is implemented in Click in a very special manner.
Unlike regular parameters it&#8217;s automatically added by Click for any
command and it performs automatic conflict resolution.  By default it&#8217;s
called <code class="docutils literal"><span class="pre">--help</span></code>, but this can be changed.  If a command itself implements
a parameter with the same name, the default help parameter stops accepting
it.  There is a context setting that can be used to override the names of
the help parameters called <a class="reference internal" href="index.html#click.Context.help_option_names" title="click.Context.help_option_names"><code class="xref py py-attr docutils literal"><span class="pre">help_option_names</span></code></a>.</p>
<p>This example changes the default parameters to <code class="docutils literal"><span class="pre">-h</span></code> and <code class="docutils literal"><span class="pre">--help</span></code>
instead of just <code class="docutils literal"><span class="pre">--help</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">CONTEXT_SETTINGS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">help_option_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;-h&#39;</span><span class="p">,</span> <span class="s1">&#39;--help&#39;</span><span class="p">])</span>

<span class="nd">@click.command</span><span class="p">(</span><span class="n">context_settings</span><span class="o">=</span><span class="n">CONTEXT_SETTINGS</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli -h
Usage: cli [OPTIONS]

Options:
  -h, --help  Show this message and exit.
</pre></div>
</div>
</div>
</div>
<span id="document-complex"></span><div class="section" id="complex-applications">
<span id="complex-guide"></span><h3>Complex Applications<a class="headerlink" href="#complex-applications" title="Permalink to this headline">¶</a></h3>
<p>Click is designed to assist with the creation of complex and simple CLI tools
alike.  However, the power of its design is the ability to arbitrarily nest
systems together.  For instance, if you have ever used Django, you will
have realized that it provides a command line utility, but so does Celery.
When using Celery with Django, there are two tools that need to interact with
each other and be cross-configured.</p>
<p>In a theoretical world of two separate Click command line utilities, they
could solve this problem by nesting one inside the other.  For instance, the
web framework could also load the commands for the message queue framework.</p>
<div class="section" id="basic-concepts">
<h4>Basic Concepts<a class="headerlink" href="#basic-concepts" title="Permalink to this headline">¶</a></h4>
<p>To understand how this works, you need to understand two concepts: contexts
and the calling convention.</p>
<div class="section" id="contexts">
<h5>Contexts<a class="headerlink" href="#contexts" title="Permalink to this headline">¶</a></h5>
<p>Whenever a Click command is executed, a <a class="reference internal" href="index.html#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a> object is created
which holds state for this particular invocation.  It remembers parsed
parameters, what command created it, which resources need to be cleaned up
at the end of the function, and so forth.  It can also optionally hold an
application-defined object.</p>
<p>Context objects build a linked list until they hit the top one.  Each context
is linked to a parent context.  This allows a command to work below
another command and store its own information there without having to be
afraid of altering up the state of the parent command.</p>
<p>Because the parent data is available, however, it is possible to navigate to
it if needed.</p>
<p>Most of the time, you do not see the context object, but when writing more
complex applications it comes in handy.  This brings us to the next point.</p>
</div>
<div class="section" id="calling-convention">
<h5>Calling Convention<a class="headerlink" href="#calling-convention" title="Permalink to this headline">¶</a></h5>
<p>When a Click command callback is executed, it&#8217;s passed all the non-hidden
parameters as keyword arguments.  Notably absent is the context.  However,
a callback can opt into being passed to the context object by marking itself
with <a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a>.</p>
<p>So how do you invoke a command callback if you don&#8217;t know if it should
receive the context or not?  The answer is that the context itself
provides a helper function (<a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-meth docutils literal"><span class="pre">Context.invoke()</span></code></a>) which can do this for
you.  It accepts the callback as first argument and then invokes the
function correctly.</p>
</div>
</div>
<div class="section" id="building-a-git-clone">
<h4>Building a Git Clone<a class="headerlink" href="#building-a-git-clone" title="Permalink to this headline">¶</a></h4>
<p>In this example, we want to build a command line tool that resembles a
version control system.  Systems like Git usually provide one
over-arching command that already accepts some parameters and
configuration, and then have extra subcommands that do other things.</p>
<div class="section" id="the-root-command">
<h5>The Root Command<a class="headerlink" href="#the-root-command" title="Permalink to this headline">¶</a></h5>
<p>At the top level, we need a group that can hold all our commands.  In this
case, we use the basic <a class="reference internal" href="index.html#click.group" title="click.group"><code class="xref py py-func docutils literal"><span class="pre">click.group()</span></code></a> which allows us to register
other Click commands below it.</p>
<p>For this command, we also want to accept some parameters that configure the
state of our tool:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">click</span>


<span class="k">class</span> <span class="nc">Repo</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">home</span><span class="o">=</span><span class="bp">None</span><span class="p">,</span> <span class="n">debug</span><span class="o">=</span><span class="bp">False</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">home</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">home</span> <span class="ow">or</span> <span class="s1">&#39;.&#39;</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">debug</span> <span class="o">=</span> <span class="n">debug</span>


<span class="nd">@click.group</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--repo-home&#39;</span><span class="p">,</span> <span class="n">envvar</span><span class="o">=</span><span class="s1">&#39;REPO_HOME&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;.repo&#39;</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--debug/--no-debug&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="bp">False</span><span class="p">,</span>
              <span class="n">envvar</span><span class="o">=</span><span class="s1">&#39;REPO_DEBUG&#39;</span><span class="p">)</span>
<span class="nd">@click.pass_context</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">repo_home</span><span class="p">,</span> <span class="n">debug</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">obj</span> <span class="o">=</span> <span class="n">Repo</span><span class="p">(</span><span class="n">repo_home</span><span class="p">,</span> <span class="n">debug</span><span class="p">)</span>
</pre></div>
</div>
<p>Let&#8217;s understand what this does.  We create a group command which can
have subcommands.  When it is invoked, it will create an instance of a
<code class="docutils literal"><span class="pre">Repo</span></code> class.  This holds the state for our command line tool.  In this
case, it just remembers some parameters, but at this point it could also
start loading configuration files and so on.</p>
<p>This state object is then remembered by the context as <a class="reference internal" href="index.html#click.Context.obj" title="click.Context.obj"><code class="xref py py-attr docutils literal"><span class="pre">obj</span></code></a>.
This is a special attribute where commands are supposed to remember what
they need to pass on to their children.</p>
<p>In order for this to work, we need to mark our function with
<a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a>, because otherwise, the context object would be
entirely hidden from us.</p>
</div>
<div class="section" id="the-first-child-command">
<h5>The First Child Command<a class="headerlink" href="#the-first-child-command" title="Permalink to this headline">¶</a></h5>
<p>Let&#8217;s add our first child command to it, the clone command:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
<p>So now we have a clone command, but how do we get access to the repo?  As
you can imagine, one way is to use the <a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a> function which
again will make our callback also get the context passed on which we
memorized the repo.  However, there is a second version of this decorator
called <a class="reference internal" href="index.html#click.pass_obj" title="click.pass_obj"><code class="xref py py-func docutils literal"><span class="pre">pass_obj()</span></code></a> which will just pass the stored object, (in our case
the repo):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@click.pass_obj</span>
<span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="interleaved-commands">
<h5>Interleaved Commands<a class="headerlink" href="#interleaved-commands" title="Permalink to this headline">¶</a></h5>
<p>While not relevant for the particular program we want to build, there is
also quite good support for interleaving systems.  Imagine for instance that
there was a super cool plugin for our version control system that needed a
lot of configuration and wanted to store its own configuration as
<a class="reference internal" href="index.html#click.Context.obj" title="click.Context.obj"><code class="xref py py-attr docutils literal"><span class="pre">obj</span></code></a>.  If we would then attach another command below that,
we would all of a sudden get the plugin configuration instead of our repo
object.</p>
<p>One obvious way to remedy this is to store a reference to the repo in the
plugin, but then a command needs to be aware that it&#8217;s attached below such a
plugin.</p>
<p>There is a much better system that can built by taking advantage of the linked
nature of contexts.  We know that the plugin context is linked to the context
that created our repo.  Because of that, we can start a search for the last
level where the object stored by the context was a repo.</p>
<p>Built-in support for this is provided by the <a class="reference internal" href="index.html#click.make_pass_decorator" title="click.make_pass_decorator"><code class="xref py py-func docutils literal"><span class="pre">make_pass_decorator()</span></code></a>
factory, which will create decorators for us that find objects (it
internally calls into <a class="reference internal" href="index.html#click.Context.find_object" title="click.Context.find_object"><code class="xref py py-meth docutils literal"><span class="pre">Context.find_object()</span></code></a>).  In our case, we
know that we want to find the closest <code class="docutils literal"><span class="pre">Repo</span></code> object, so let&#8217;s make a
decorator for this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pass_repo</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">make_pass_decorator</span><span class="p">(</span><span class="n">Repo</span><span class="p">)</span>
</pre></div>
</div>
<p>If we now use <code class="docutils literal"><span class="pre">pass_repo</span></code> instead of <code class="docutils literal"><span class="pre">pass_obj</span></code>, we will always get a
repo instead of something else:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;src&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;dest&#39;</span><span class="p">,</span> <span class="n">required</span><span class="o">=</span><span class="bp">False</span><span class="p">)</span>
<span class="nd">@pass_repo</span>
<span class="k">def</span> <span class="nf">clone</span><span class="p">(</span><span class="n">repo</span><span class="p">,</span> <span class="n">src</span><span class="p">,</span> <span class="n">dest</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="ensuring-object-creation">
<h5>Ensuring Object Creation<a class="headerlink" href="#ensuring-object-creation" title="Permalink to this headline">¶</a></h5>
<p>The above example only works if there was an outer command that created a
<code class="docutils literal"><span class="pre">Repo</span></code> object and stored it in the context.  For some more advanced use
cases, this might become a problem.  The default behavior of
<a class="reference internal" href="index.html#click.make_pass_decorator" title="click.make_pass_decorator"><code class="xref py py-func docutils literal"><span class="pre">make_pass_decorator()</span></code></a> is to call <a class="reference internal" href="index.html#click.Context.find_object" title="click.Context.find_object"><code class="xref py py-meth docutils literal"><span class="pre">Context.find_object()</span></code></a>
which will find the object.  If it can&#8217;t find the object, it will raise an
error.  The alternative behavior is to use <a class="reference internal" href="index.html#click.Context.ensure_object" title="click.Context.ensure_object"><code class="xref py py-meth docutils literal"><span class="pre">Context.ensure_object()</span></code></a>
which will find the object, and if it cannot find it, will create one and
store it in the innermost context.  This behavior can also be enabled for
<a class="reference internal" href="index.html#click.make_pass_decorator" title="click.make_pass_decorator"><code class="xref py py-func docutils literal"><span class="pre">make_pass_decorator()</span></code></a> by passing <code class="docutils literal"><span class="pre">ensure=True</span></code>:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">pass_repo</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">make_pass_decorator</span><span class="p">(</span><span class="n">Repo</span><span class="p">,</span> <span class="n">ensure</span><span class="o">=</span><span class="bp">True</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case, the innermost context gets an object created if it is
missing.  This might replace objects being placed there earlier.  In this
case, the command stays executable, even if the outer command does not run.
For this to work, the object type needs to have a constructor that accepts
no arguments.</p>
<p>As such it runs standalone:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@pass_repo</span>
<span class="k">def</span> <span class="nf">cp</span><span class="p">(</span><span class="n">repo</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">repo</span><span class="p">)</span>
</pre></div>
</div>
<p>As you can see:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cp
&lt;Repo object at 0x103650110&gt;
</pre></div>
</div>
</div>
</div>
</div>
<span id="document-advanced"></span><div class="section" id="advanced-patterns">
<h3>Advanced Patterns<a class="headerlink" href="#advanced-patterns" title="Permalink to this headline">¶</a></h3>
<p>In addition to common functionality that is implemented in the library
itself, there are countless patterns that can be implemented by extending
Click.  This page should give some insight into what can be accomplished.</p>
<div class="section" id="command-aliases">
<span id="aliases"></span><h4>Command Aliases<a class="headerlink" href="#command-aliases" title="Permalink to this headline">¶</a></h4>
<p>Many tools support aliases for commands.  For instance, you can configure
<code class="docutils literal"><span class="pre">git</span></code> to accept <code class="docutils literal"><span class="pre">git</span> <span class="pre">ci</span></code> as alias for <code class="docutils literal"><span class="pre">git</span> <span class="pre">commit</span></code>.  Other tools
also support auto-discovery for aliases by automatically shortening them.</p>
<p>Click does not support this out of the box, but it&#8217;s very easy to customize
the <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> or any other <a class="reference internal" href="index.html#click.MultiCommand" title="click.MultiCommand"><code class="xref py py-class docutils literal"><span class="pre">MultiCommand</span></code></a> to provide this
functionality.</p>
<p>As explained in <a class="reference internal" href="index.html#custom-multi-commands"><span class="std std-ref">Custom Multi Commands</span></a>, a multi command can provide
two methods: <a class="reference internal" href="index.html#click.MultiCommand.list_commands" title="click.MultiCommand.list_commands"><code class="xref py py-meth docutils literal"><span class="pre">list_commands()</span></code></a> and
<a class="reference internal" href="index.html#click.MultiCommand.get_command" title="click.MultiCommand.get_command"><code class="xref py py-meth docutils literal"><span class="pre">get_command()</span></code></a>.  In this particular case, you only need
to override the latter as you generally don&#8217;t want to enumerate the
aliases on the help page in order to avoid confusion.</p>
<p>This following example implements a subclass of <a class="reference internal" href="index.html#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> that
accepts a prefix for a command.  If there were a command called <code class="docutils literal"><span class="pre">push</span></code>,
it would accept <code class="docutils literal"><span class="pre">pus</span></code> as an alias (so long as it was unique):</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">AliasedGroup</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">get_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">cmd_name</span><span class="p">):</span>
        <span class="n">rv</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="o">.</span><span class="n">get_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">cmd_name</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">rv</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">rv</span>
        <span class="n">matches</span> <span class="o">=</span> <span class="p">[</span><span class="n">x</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">list_commands</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
                   <span class="k">if</span> <span class="n">x</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="n">cmd_name</span><span class="p">)]</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">matches</span><span class="p">:</span>
            <span class="k">return</span> <span class="bp">None</span>
        <span class="k">elif</span> <span class="nb">len</span><span class="p">(</span><span class="n">matches</span><span class="p">)</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
            <span class="k">return</span> <span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="o">.</span><span class="n">get_command</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">matches</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">fail</span><span class="p">(</span><span class="s1">&#39;Too many matches: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39;, &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="nb">sorted</span><span class="p">(</span><span class="n">matches</span><span class="p">)))</span>
</pre></div>
</div>
<p>And it can then be used like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">(</span><span class="n">cls</span><span class="o">=</span><span class="n">AliasedGroup</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">push</span><span class="p">():</span>
    <span class="k">pass</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">pop</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
</div>
<div class="section" id="parameter-modifications">
<h4>Parameter Modifications<a class="headerlink" href="#parameter-modifications" title="Permalink to this headline">¶</a></h4>
<p>Parameters (options and arguments) are forwarded to the command callbacks
as you have seen.  One common way to prevent a parameter from being passed
to the callback is the <cite>expose_value</cite> argument to a parameter which hides
the parameter entirely.  The way this works is that the <a class="reference internal" href="index.html#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a>
object has a <a class="reference internal" href="index.html#click.Context.params" title="click.Context.params"><code class="xref py py-attr docutils literal"><span class="pre">params</span></code></a> attribute which is a dictionary of
all parameters.  Whatever is in that dictionary is being passed to the
callbacks.</p>
<p>This can be used to make up addition parameters.  Generally this pattern
is not recommended but in some cases it can be useful.  At the very least
it&#8217;s good to know that the system works this way.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib</span>

<span class="k">def</span> <span class="nf">open_url</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">params</span><span class="p">[</span><span class="s1">&#39;fp&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">value</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">value</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--url&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">open_url</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fp</span><span class="o">=</span><span class="bp">None</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">fp</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="p">,</span> <span class="n">fp</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
</pre></div>
</div>
<p>In this case the callback returns the URL unchanged but also passes a
second <code class="docutils literal"><span class="pre">fp</span></code> value to the callback.  What&#8217;s more recommended is to pass
the information in a wrapper however:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">urllib</span>

<span class="k">class</span> <span class="nc">URL</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>

    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">url</span><span class="p">,</span> <span class="n">fp</span><span class="p">):</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">url</span> <span class="o">=</span> <span class="n">url</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">fp</span> <span class="o">=</span> <span class="n">fp</span>

<span class="k">def</span> <span class="nf">open_url</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">value</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">URL</span><span class="p">(</span><span class="n">value</span><span class="p">,</span> <span class="n">urllib</span><span class="o">.</span><span class="n">urlopen</span><span class="p">(</span><span class="n">value</span><span class="p">))</span>

<span class="nd">@click.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--url&#39;</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">open_url</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">url</span><span class="p">):</span>
    <span class="k">if</span> <span class="n">url</span> <span class="ow">is</span> <span class="ow">not</span> <span class="bp">None</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">url</span><span class="o">.</span><span class="n">url</span><span class="p">,</span> <span class="n">url</span><span class="o">.</span><span class="n">fp</span><span class="o">.</span><span class="n">code</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="token-normalization">
<h4>Token Normalization<a class="headerlink" href="#token-normalization" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Starting with Click 2.0, it&#8217;s possible to provide a function that is used
for normalizing tokens.  Tokens are option names, choice values, or command
values.  This can be used to implement case insensitive options, for
instance.</p>
<p>In order to use this feature, the context needs to be passed a function that
performs the normalization of the token.  For instance, you could have a
function that converts the token to lowercase:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">CONTEXT_SETTINGS</span> <span class="o">=</span> <span class="nb">dict</span><span class="p">(</span><span class="n">token_normalize_func</span><span class="o">=</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="n">x</span><span class="o">.</span><span class="n">lower</span><span class="p">())</span>

<span class="nd">@click.command</span><span class="p">(</span><span class="n">context_settings</span><span class="o">=</span><span class="n">CONTEXT_SETTINGS</span><span class="p">)</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--name&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="s1">&#39;Pete&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Name: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>
</pre></div>
</div>
<p>And how it works on the command line:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli --NAME=Pete
Name: Pete
</pre></div>
</div>
</div>
<div class="section" id="invoking-other-commands">
<h4>Invoking Other Commands<a class="headerlink" href="#invoking-other-commands" title="Permalink to this headline">¶</a></h4>
<p>Sometimes, it might be interesting to invoke one command from another
command.  This is a pattern that is generally discouraged with Click, but
possible nonetheless.  For this, you can use the <a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-func docutils literal"><span class="pre">Context.invoke()</span></code></a>
or <a class="reference internal" href="index.html#click.Context.forward" title="click.Context.forward"><code class="xref py py-func docutils literal"><span class="pre">Context.forward()</span></code></a> methods.</p>
<p>They work similarly, but the difference is that <a class="reference internal" href="index.html#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-func docutils literal"><span class="pre">Context.invoke()</span></code></a> merely
invokes another command with the arguments you provide as a caller,
whereas <a class="reference internal" href="index.html#click.Context.forward" title="click.Context.forward"><code class="xref py py-func docutils literal"><span class="pre">Context.forward()</span></code></a> fills in the arguments from the current
command.  Both accept the command as the first argument and everything else
is passed onwards as you would expect.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="n">cli</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">Group</span><span class="p">()</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">count</span><span class="p">):</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Count: </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">count</span><span class="p">)</span>

<span class="nd">@cli.command</span><span class="p">()</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;--count&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">1</span><span class="p">)</span>
<span class="nd">@click.pass_context</span>
<span class="k">def</span> <span class="nf">dist</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">count</span><span class="p">):</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">forward</span><span class="p">(</span><span class="n">test</span><span class="p">)</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="n">count</span><span class="o">=</span><span class="mi">42</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli dist
Count: 1
Count: 42
</pre></div>
</div>
</div>
<div class="section" id="callback-evaluation-order">
<span id="id1"></span><h4>Callback Evaluation Order<a class="headerlink" href="#callback-evaluation-order" title="Permalink to this headline">¶</a></h4>
<p>Click works a bit differently than some other command line parsers in that
it attempts to reconcile the order of arguments as defined by the
programmer with the order of arguments as defined by the user before
invoking any callbacks.</p>
<p>This is an important concept to understand when porting complex
patterns to Click from optparse or other systems.  A parameter
callback invocation in optparse happens as part of the parsing step,
whereas a callback invocation in Click happens after the parsing.</p>
<p>The main difference is that in optparse, callbacks are invoked with the raw
value as it happens, whereas a callback in Click is invoked after the
value has been fully converted.</p>
<p>Generally, the order of invocation is driven by the order in which the user
provides the arguments to the script; if there is an option called <code class="docutils literal"><span class="pre">--foo</span></code>
and an option called <code class="docutils literal"><span class="pre">--bar</span></code> and the user calls it as <code class="docutils literal"><span class="pre">--bar</span>
<span class="pre">--foo</span></code>, then the callback for <code class="docutils literal"><span class="pre">bar</span></code> will fire before the one for <code class="docutils literal"><span class="pre">foo</span></code>.</p>
<p>There are three exceptions to this rule which are important to know:</p>
<dl class="docutils">
<dt>Eagerness:</dt>
<dd><p class="first">An option can be set to be &#8220;eager&#8221;.  All eager parameters are
evaluated before all non-eager parameters, but again in the order as
they were provided on the command line by the user.</p>
<p class="last">This is important for parameters that execute and exit like <code class="docutils literal"><span class="pre">--help</span></code>
and <code class="docutils literal"><span class="pre">--version</span></code>.  Both are eager parameters, but whatever parameter
comes first on the command line will win and exit the program.</p>
</dd>
<dt>Repeated parameters:</dt>
<dd><p class="first">If an option or argument is split up on the command line into multiple
places because it is repeated &#8211; for instance, <code class="docutils literal"><span class="pre">--exclude</span> <span class="pre">foo</span> <span class="pre">--include</span>
<span class="pre">baz</span> <span class="pre">--exclude</span> <span class="pre">bar</span></code> &#8211; the callback will fire based on the position of
the first option.  In this case, the callback will fire for
<code class="docutils literal"><span class="pre">exclude</span></code> and it will be passed both options (<code class="docutils literal"><span class="pre">foo</span></code> and
<code class="docutils literal"><span class="pre">bar</span></code>), then the callback for <code class="docutils literal"><span class="pre">include</span></code> will fire with <code class="docutils literal"><span class="pre">baz</span></code>
only.</p>
<p class="last">Note that even if a parameter does not allow multiple versions, Click
will still accept the position of the first, but it will ignore every
value except the last.  The reason for this is to allow composability
through shell aliases that set defaults.</p>
</dd>
<dt>Missing parameters:</dt>
<dd>If a parameter is not defined on the command line, the callback will
still fire.  This is different from how it works in optparse where
undefined values do not fire the callback.  Missing parameters fire
their callbacks at the very end which makes it possible for them to
default to values from a parameter that came before.</dd>
</dl>
<p>Most of the time you do not need to be concerned about any of this,
but it is important to know how it works for some advanced cases.</p>
</div>
<div class="section" id="forwarding-unknown-options">
<span id="id2"></span><h4>Forwarding Unknown Options<a class="headerlink" href="#forwarding-unknown-options" title="Permalink to this headline">¶</a></h4>
<p>In some situations it is interesting to be able to accept all unknown
options for further manual processing.  Click can generally do that as of
Click 4.0, but it has some limitations that lie in the nature of the
problem.  The support for this is provided through a parser flag called
<code class="docutils literal"><span class="pre">ignore_unknown_options</span></code> which will instruct the parser to collect all
unknown options and to put them to the leftover argument instead of
triggering a parsing error.</p>
<p>This can generally be activated in two different ways:</p>
<ol class="arabic simple">
<li>It can be enabled on custom <a class="reference internal" href="index.html#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> subclasses by changing
the <a class="reference internal" href="index.html#click.BaseCommand.ignore_unknown_options" title="click.BaseCommand.ignore_unknown_options"><code class="xref py py-attr docutils literal"><span class="pre">ignore_unknown_options</span></code></a> attribute.</li>
<li>It can be enabled by changing the attribute of the same name on the
context class (<a class="reference internal" href="index.html#click.Context.ignore_unknown_options" title="click.Context.ignore_unknown_options"><code class="xref py py-attr docutils literal"><span class="pre">Context.ignore_unknown_options</span></code></a>).  This is best
changed through the <code class="docutils literal"><span class="pre">context_settings</span></code> dictionary on the command.</li>
</ol>
<p>For most situations the easiest solution is the second.  Once the behavior
is changed something needs to pick up those leftover options (which at
this point are considered arguments).  For this again you have two
options:</p>
<ol class="arabic simple">
<li>You can use <a class="reference internal" href="index.html#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a> to get the context passed.  This will
only work if in addition to <a class="reference internal" href="index.html#click.Context.ignore_unknown_options" title="click.Context.ignore_unknown_options"><code class="xref py py-attr docutils literal"><span class="pre">ignore_unknown_options</span></code></a>
you also set <a class="reference internal" href="index.html#click.Context.allow_extra_args" title="click.Context.allow_extra_args"><code class="xref py py-attr docutils literal"><span class="pre">allow_extra_args</span></code></a> as otherwise the
command will abort with an error that there are leftover arguments.
If you go with this solution, the extra arguments will be collected in
<a class="reference internal" href="index.html#click.Context.args" title="click.Context.args"><code class="xref py py-attr docutils literal"><span class="pre">Context.args</span></code></a>.</li>
<li>You can attach a <a class="reference internal" href="index.html#click.argument" title="click.argument"><code class="xref py py-func docutils literal"><span class="pre">argument()</span></code></a> with <code class="docutils literal"><span class="pre">nargs</span></code> set to <cite>-1</cite> which
will eat up all leftover arguments.  In this case it&#8217;s recommeded to
set the <cite>type</cite> to <a class="reference internal" href="index.html#click.UNPROCESSED" title="click.UNPROCESSED"><code class="xref py py-data docutils literal"><span class="pre">UNPROCESSED</span></code></a> to avoid any string processing
on those arguments as otherwise they are forced into unicode strings
automatically which is often not what you want.</li>
</ol>
<p>In the end you end up with something like this:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">from</span> <span class="nn">subprocess</span> <span class="kn">import</span> <span class="n">call</span>

<span class="nd">@click.command</span><span class="p">(</span><span class="n">context_settings</span><span class="o">=</span><span class="nb">dict</span><span class="p">(</span>
    <span class="n">ignore_unknown_options</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span>
<span class="p">))</span>
<span class="nd">@click.option</span><span class="p">(</span><span class="s1">&#39;-v&#39;</span><span class="p">,</span> <span class="s1">&#39;--verbose&#39;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="bp">True</span><span class="p">,</span> <span class="n">help</span><span class="o">=</span><span class="s1">&#39;Enables verbose mode&#39;</span><span class="p">)</span>
<span class="nd">@click.argument</span><span class="p">(</span><span class="s1">&#39;timeit_args&#39;</span><span class="p">,</span> <span class="n">nargs</span><span class="o">=-</span><span class="mi">1</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">UNPROCESSED</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">verbose</span><span class="p">,</span> <span class="n">timeit_args</span><span class="p">):</span>
    <span class="sd">&quot;&quot;&quot;A wrapper around Python&#39;s timeit.&quot;&quot;&quot;</span>
    <span class="n">cmdline</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;python&#39;</span><span class="p">,</span> <span class="s1">&#39;-mtimeit&#39;</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="n">timeit_args</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">verbose</span><span class="p">:</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Invoking: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="s1">&#39; &#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">cmdline</span><span class="p">))</span>
    <span class="n">call</span><span class="p">(</span><span class="n">cmdline</span><span class="p">)</span>
</pre></div>
</div>
<p>And what it looks like:</p>
<div class="highlight-text"><div class="highlight"><pre><span></span>$ cli --help
Usage: cli [OPTIONS] [TIMEIT_ARGS]...

  A wrapper around Python&#39;s timeit.

Options:
  -v, --verbose  Enables verbose mode
  --help         Show this message and exit.

$ cli -n 100 &quot;a = 1; b = 2; a * b&quot;
100 loops, best of 3: 0.1 usec per loop

$ cli -v &quot;a = 1; b = 2; a * b&quot;
Invoking: python -mtimeit a = 1; b = 2; a * b
10000000 loops, best of 3: 0.0886 usec per loop
</pre></div>
</div>
<p>As you can see the verbosity flag is handled by Click, everything else
ends up in the <cite>timeit_args</cite> variable for further processing which then
for instance, allows invoking a subprocess.  There are a few things that
are important to know about how this ignoring of unhandled flag happens:</p>
<ul class="simple">
<li>Unknown long options are generally ignored and not processed at all.
So for instance if <code class="docutils literal"><span class="pre">--foo=bar</span></code> or <code class="docutils literal"><span class="pre">--foo</span> <span class="pre">bar</span></code> are passed they
generally end up like that.  Note that because the parser cannot know
if an option will accept an argument or not, the <code class="docutils literal"><span class="pre">bar</span></code> part might be
handled as an argument.</li>
<li>Unknown short options might be partially handled and reassmebled if
necessary.  For instance in the above example there is an option
called <code class="docutils literal"><span class="pre">-v</span></code> which enables verbose mode.  If the command would be
ignored with <code class="docutils literal"><span class="pre">-va</span></code> then the <code class="docutils literal"><span class="pre">-v</span></code> part would be handled by Click
(as it is known) and <code class="docutils literal"><span class="pre">-a</span></code> would end up in the leftover parameters
for further processing.</li>
<li>Depending on what you plan on doing you might have some success by
disabling interspersed arguments
(<a class="reference internal" href="index.html#click.Context.allow_interspersed_args" title="click.Context.allow_interspersed_args"><code class="xref py py-attr docutils literal"><span class="pre">allow_interspersed_args</span></code></a>) which instructs the parser
to not allow arguments and options to be mixed.  Depending on your
situation this might improve your results.</li>
</ul>
<p>Generally though the combinated handling of options and arguments from
your own commands and commands from another application are discouraged
and if you can avoid it, you should.  It&#8217;s a much better idea to have
everything below a subcommand be forwarded to another application than to
handle some arguments yourself.</p>
</div>
<div class="section" id="global-context-access">
<h4>Global Context Access<a class="headerlink" href="#global-context-access" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.0.</span></p>
</div>
<p>Starting with Click 5.0 it is possible to access the current context from
anywhere within the same thread through the use of the
<a class="reference internal" href="index.html#click.get_current_context" title="click.get_current_context"><code class="xref py py-func docutils literal"><span class="pre">get_current_context()</span></code></a> function which returns it.  This is primarily
useful for accessing the context bound object as well as some flags that
are stored on it to customize the runtime behavior.  For instance the
<a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function does this to infer the default value of the <cite>color</cite>
flag.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">get_current_command_name</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">click</span><span class="o">.</span><span class="n">get_current_context</span><span class="p">()</span><span class="o">.</span><span class="n">info_name</span>
</pre></div>
</div>
<p>It should be noted that this only works within the current thread.  If you
spawn additional threads then those threads will not have the ability to
refer to the current context.  If you want to give another thread the
ability to refer to this context you need to use the context within the
thread as a context manager:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">spawn_thread</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">func</span><span class="p">):</span>
    <span class="k">def</span> <span class="nf">wrapper</span><span class="p">():</span>
        <span class="k">with</span> <span class="n">ctx</span><span class="p">:</span>
            <span class="n">func</span><span class="p">()</span>
    <span class="n">t</span> <span class="o">=</span> <span class="n">threading</span><span class="o">.</span><span class="n">Thread</span><span class="p">(</span><span class="n">target</span><span class="o">=</span><span class="n">wrapper</span><span class="p">)</span>
    <span class="n">t</span><span class="o">.</span><span class="n">start</span><span class="p">()</span>
    <span class="k">return</span> <span class="n">t</span>
</pre></div>
</div>
<p>Now the thread function can access the context like the main thread would
do.  However if you do use this for threading you need to be very careful
as the vast majority of the context is not thread safe!  You are only
allowed to read from the context, but not to perform any modifications on
it.</p>
</div>
</div>
<span id="document-testing"></span><div class="section" id="testing-click-applications">
<h3>Testing Click Applications<a class="headerlink" href="#testing-click-applications" title="Permalink to this headline">¶</a></h3>
<p>For basic testing, Click provides the <code class="xref py py-mod docutils literal"><span class="pre">click.testing</span></code> module which
provides test functionality that helps you invoke command line
applications and check their behavior.</p>
<p>These tools should really only be used for testing as they change
the entire interpreter state for simplicity and are not in any way
thread-safe!</p>
<div class="section" id="basic-testing">
<h4>Basic Testing<a class="headerlink" href="#basic-testing" title="Permalink to this headline">¶</a></h4>
<p>The basic functionality for testing Click applications is the
<a class="reference internal" href="index.html#click.testing.CliRunner" title="click.testing.CliRunner"><code class="xref py py-class docutils literal"><span class="pre">CliRunner</span></code></a> which can invoke commands as command line scripts.  The
<a class="reference internal" href="index.html#click.testing.CliRunner.invoke" title="click.testing.CliRunner.invoke"><code class="xref py py-meth docutils literal"><span class="pre">CliRunner.invoke()</span></code></a> method runs the command line script in isolation
and captures the output as both bytes and binary data.</p>
<p>The return value is a <a class="reference internal" href="index.html#click.testing.Result" title="click.testing.Result"><code class="xref py py-class docutils literal"><span class="pre">Result</span></code></a> object, which has the captured output
data, exit code, and optional exception attached.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">click.testing</span> <span class="k">import</span> <span class="n">CliRunner</span>

<span class="k">def</span> <span class="nf">test_hello_world</span><span class="p">():</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s1">&#39;name&#39;</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">hello</span><span class="p">(</span><span class="n">name</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello </span><span class="si">%s</span><span class="s1">!&#39;</span> <span class="o">%</span> <span class="n">name</span><span class="p">)</span>

    <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">hello</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;Peter&#39;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span> <span class="o">==</span> <span class="s1">&#39;Hello Peter!</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>For subcommand testing, a subcommand name must be specified in the <cite>args</cite> parameter of <a class="reference internal" href="index.html#click.testing.CliRunner.invoke" title="click.testing.CliRunner.invoke"><code class="xref py py-meth docutils literal"><span class="pre">CliRunner.invoke()</span></code></a> method.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">click.testing</span> <span class="k">import</span> <span class="n">CliRunner</span>

<span class="k">def</span> <span class="nf">test_sync</span><span class="p">():</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--debug/--no-debug&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="n">debug</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Debug mode is </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="s1">&#39;on&#39;</span> <span class="k">if</span> <span class="n">debug</span> <span class="k">else</span> <span class="s1">&#39;off&#39;</span><span class="p">))</span>

    <span class="nd">@cli</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    <span class="k">def</span> <span class="nf">sync</span><span class="p">():</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Syncing&#39;</span><span class="p">)</span>

    <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cli</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;--debug&#39;</span><span class="p">,</span> <span class="s1">&#39;sync&#39;</span><span class="p">])</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span> <span class="o">==</span> <span class="mi">0</span>
    <span class="k">assert</span> <span class="s1">&#39;Debug mode is on&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span>
    <span class="k">assert</span> <span class="s1">&#39;Syncing&#39;</span> <span class="ow">in</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span>
</pre></div>
</div>
</div>
<div class="section" id="file-system-isolation">
<h4>File System Isolation<a class="headerlink" href="#file-system-isolation" title="Permalink to this headline">¶</a></h4>
<p>For basic command line tools that want to operate with the file system, the
<a class="reference internal" href="index.html#click.testing.CliRunner.isolated_filesystem" title="click.testing.CliRunner.isolated_filesystem"><code class="xref py py-meth docutils literal"><span class="pre">CliRunner.isolated_filesystem()</span></code></a> method comes in useful which sets up
an empty folder and changes the current working directory to.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">click.testing</span> <span class="k">import</span> <span class="n">CliRunner</span>

<span class="k">def</span> <span class="nf">test_cat</span><span class="p">():</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">argument</span><span class="p">(</span><span class="s1">&#39;f&#39;</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="n">click</span><span class="o">.</span><span class="n">File</span><span class="p">())</span>
    <span class="k">def</span> <span class="nf">cat</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">read</span><span class="p">())</span>

    <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
    <span class="k">with</span> <span class="n">runner</span><span class="o">.</span><span class="n">isolated_filesystem</span><span class="p">():</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="s1">&#39;hello.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
            <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>

        <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">cat</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;hello.txt&#39;</span><span class="p">])</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">exit_code</span> <span class="o">==</span> <span class="mi">0</span>
        <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span> <span class="o">==</span> <span class="s1">&#39;Hello World!</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>
</div>
</div>
<div class="section" id="input-streams">
<h4>Input Streams<a class="headerlink" href="#input-streams" title="Permalink to this headline">¶</a></h4>
<p>The test wrapper can also be used to provide input data for the input
stream (stdin).  This is very useful for testing prompts, for instance:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">click.testing</span> <span class="k">import</span> <span class="n">CliRunner</span>

<span class="k">def</span> <span class="nf">test_prompts</span><span class="p">():</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
    <span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--foo&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
    <span class="k">def</span> <span class="nf">test</span><span class="p">(</span><span class="n">foo</span><span class="p">):</span>
        <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;foo=</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">foo</span><span class="p">)</span>

    <span class="n">runner</span> <span class="o">=</span> <span class="n">CliRunner</span><span class="p">()</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">runner</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">test</span><span class="p">,</span> <span class="nb">input</span><span class="o">=</span><span class="s1">&#39;wau wau</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
    <span class="k">assert</span> <span class="ow">not</span> <span class="n">result</span><span class="o">.</span><span class="n">exception</span>
    <span class="k">assert</span> <span class="n">result</span><span class="o">.</span><span class="n">output</span> <span class="o">==</span> <span class="s1">&#39;Foo: wau wau</span><span class="se">\n</span><span class="s1">foo=wau wau</span><span class="se">\n</span><span class="s1">&#39;</span>
</pre></div>
</div>
<p>Note that prompts will be emulated so that they write the input data to
the output stream as well.  If hidden input is expected then this
obviously does not happen.</p>
</div>
</div>
<span id="document-utils"></span><div class="section" id="utilities">
<h3>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h3>
<p>Besides the functionality that Click provides to interface with argument
parsing and handling, it also provides a bunch of addon functionality that
is useful for writing command line utilities.</p>
<div class="section" id="printing-to-stdout">
<h4>Printing to Stdout<a class="headerlink" href="#printing-to-stdout" title="Permalink to this headline">¶</a></h4>
<p>The most obvious helper is the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function, which in many ways
works like the Python <code class="docutils literal"><span class="pre">print</span></code> statement or function.  The main difference is
that it works the same in Python 2 and 3, it intelligently detects
misconfigured output streams, and it will never fail (except in Python 3; for
more information see <a class="reference internal" href="index.html#python3-limitations"><span class="std std-ref">Python 3 Limitations</span></a>).</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Most importantly, it can print both Unicode and binary data, unlike the
built-in <code class="docutils literal"><span class="pre">print</span></code> function in Python 3, which cannot output any bytes.  It
will, however, emit a trailing newline by default, which needs to be
suppressed by passing <code class="docutils literal"><span class="pre">nl=False</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;</span><span class="se">\xe2\x98\x83</span><span class="s1">&#39;</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
<p>Last but not least <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> uses click&#8217;s intelligent internal output
streams to stdout and stderr which support unicode output on the Windows
console.  This means for as long as you are using <cite>click.echo</cite> you can
output unicode character (there are some limitations on the default font
with regards to which characters can be displayed).  This functionality is
new in Click 6.0.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 6.0.</span></p>
</div>
<p>Click now emulates output streams on Windows to support unicode to the
Windows console through separate APIs.  For more information see
<a href="#id2"><span class="problematic" id="id3">`wincmd`_</span></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<p>Starting with Click 3.0 you can also easily print to standard error by
passing <code class="docutils literal"><span class="pre">err=True</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">err</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="ansi-colors">
<span id="id1"></span><h4>ANSI Colors<a class="headerlink" href="#ansi-colors" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Starting with Click 2.0, the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function gained extra
functionality to deal with ANSI colors and styles.  Note that on Windows,
this functionality is only available if <a class="reference external" href="https://pypi.python.org/pypi/colorama">colorama</a> is installed.  If it
is installed, then ANSI codes are intelligently handled.</p>
<p>Primarily this means that:</p>
<ul class="simple">
<li>Click&#8217;s <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function will automatically strip ANSI color codes
if the stream is not connected to a terminal.</li>
<li>the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> function will transparently connect to the terminal on
Windows and translate ANSI codes to terminal API calls.  This means
that colors will work on Windows the same way they do on other
operating systems.</li>
</ul>
<p>Note for <cite>colorama</cite> support: Click will automatically detect when <cite>colorama</cite>
is available and use it.  Do <em>not</em> call <code class="docutils literal"><span class="pre">colorama.init()</span></code>!</p>
<p>To install <cite>colorama</cite>, run this command:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ pip install colorama
</pre></div>
</div>
<p>For styling a string, the <a class="reference internal" href="index.html#click.style" title="click.style"><code class="xref py py-func docutils literal"><span class="pre">style()</span></code></a> function can be used:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">))</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;Some more text&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">))</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;ATTENTION&#39;</span><span class="p">,</span> <span class="n">blink</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
</pre></div>
</div>
<p>The combination of <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> and <a class="reference internal" href="index.html#click.style" title="click.style"><code class="xref py py-func docutils literal"><span class="pre">style()</span></code></a> is also available in
a single function called <a class="reference internal" href="index.html#click.secho" title="click.secho"><code class="xref py py-func docutils literal"><span class="pre">secho()</span></code></a>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Some more text&#39;</span><span class="p">,</span> <span class="n">bg</span><span class="o">=</span><span class="s1">&#39;blue&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;white&#39;</span><span class="p">)</span>
<span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;ATTENTION&#39;</span><span class="p">,</span> <span class="n">blink</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">bold</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="pager-support">
<h4>Pager Support<a class="headerlink" href="#pager-support" title="Permalink to this headline">¶</a></h4>
<p>In some situations, you might want to show long texts on the terminal and
let a user scroll through it.  This can be achieved by using the
<a class="reference internal" href="index.html#click.echo_via_pager" title="click.echo_via_pager"><code class="xref py py-func docutils literal"><span class="pre">echo_via_pager()</span></code></a> function which works similarly to the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a>
function, but always writes to stdout and, if possible, through a pager.</p>
<p>Example:</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="nd">@click.command</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">less</span><span class="p">():</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo_via_pager</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="s1">&#39;Line </span><span class="si">%d</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">idx</span>
                                   <span class="k">for</span> <span class="n">idx</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">200</span><span class="p">)))</span>
</pre></div>
</div>
</div>
<div class="section" id="screen-clearing">
<h4>Screen Clearing<a class="headerlink" href="#screen-clearing" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>To clear the terminal screen, you can use the <a class="reference internal" href="index.html#click.clear" title="click.clear"><code class="xref py py-func docutils literal"><span class="pre">clear()</span></code></a> function that
is provided starting with Click 2.0.  It does what the name suggests: it
clears the entire visible screen in a platform-agnostic way:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="n">click</span><span class="o">.</span><span class="n">clear</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="getting-characters-from-terminal">
<h4>Getting Characters from Terminal<a class="headerlink" href="#getting-characters-from-terminal" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Normally, when reading input from the terminal, you would read from
standard input.  However, this is buffered input and will not show up until
the line has been terminated.  In certain circumstances, you might not want
to do that and instead read individual characters as they are being written.</p>
<p>For this, Click provides the <a class="reference internal" href="index.html#click.getchar" title="click.getchar"><code class="xref py py-func docutils literal"><span class="pre">getchar()</span></code></a> function which reads a single
character from the terminal buffer and returns it as a Unicode character.</p>
<p>Note that this function will always read from the terminal, even if stdin
is instead a pipe.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Continue? [yn] &#39;</span><span class="p">,</span> <span class="n">nl</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
<span class="n">c</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">getchar</span><span class="p">()</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">()</span>
<span class="k">if</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;y&#39;</span><span class="p">:</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;We will go on&#39;</span><span class="p">)</span>
<span class="k">elif</span> <span class="n">c</span> <span class="o">==</span> <span class="s1">&#39;n&#39;</span><span class="p">:</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Abort!&#39;</span><span class="p">)</span>
<span class="k">else</span><span class="p">:</span>
    <span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Invalid input :(&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Note that this reads raw input, which means that things like arrow keys
will show up in the platform&#8217;s native escape format.  The only characters
translated are <code class="docutils literal"><span class="pre">^C</span></code> and <code class="docutils literal"><span class="pre">^D</span></code> which are converted into keyboard
interrupts and end of file exceptions respectively.  This is done because
otherwise, it&#8217;s too easy to forget about that and to create scripts that
cannot be properly exited.</p>
</div>
<div class="section" id="waiting-for-key-press">
<h4>Waiting for Key Press<a class="headerlink" href="#waiting-for-key-press" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Sometimes, it&#8217;s useful to pause until the user presses any key on the
keyboard.  This is especially useful on Windows where <code class="docutils literal"><span class="pre">cmd.exe</span></code> will
close the window at the end of the command execution by default, instead
of waiting.</p>
<p>In click, this can be accomplished with the <a class="reference internal" href="index.html#click.pause" title="click.pause"><code class="xref py py-func docutils literal"><span class="pre">pause()</span></code></a> function.  This
function will print a quick message to the terminal (which can be
customized) and wait for the user to press a key.  In addition to that,
it will also become a NOP (no operation instruction) if the script is not
run interactively.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="n">click</span><span class="o">.</span><span class="n">pause</span><span class="p">()</span>
</pre></div>
</div>
</div>
<div class="section" id="launching-editors">
<h4>Launching Editors<a class="headerlink" href="#launching-editors" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Click supports launching editors automatically through <a class="reference internal" href="index.html#click.edit" title="click.edit"><code class="xref py py-func docutils literal"><span class="pre">edit()</span></code></a>.  This
is very useful for asking users for multi-line input.  It will
automatically open the user&#8217;s defined editor or fall back to a sensible
default.  If the user closes the editor without saving, the return value
will be <cite>None</cite> otherwise the entered text.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="k">def</span> <span class="nf">get_commit_message</span><span class="p">():</span>
    <span class="n">MARKER</span> <span class="o">=</span> <span class="s1">&#39;# Everything below is ignored</span><span class="se">\n</span><span class="s1">&#39;</span>
    <span class="n">message</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n\n</span><span class="s1">&#39;</span> <span class="o">+</span> <span class="n">MARKER</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">message</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">message</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="n">MARKER</span><span class="p">,</span> <span class="mi">1</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span><span class="o">.</span><span class="n">rstrip</span><span class="p">(</span><span class="s1">&#39;</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, the function can also be used to launch editors for files by
a specific filename.  In this case, the return value is always <cite>None</cite>.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="n">click</span><span class="o">.</span><span class="n">edit</span><span class="p">(</span><span class="n">filename</span><span class="o">=</span><span class="s1">&#39;/etc/passwd&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="launching-applications">
<h4>Launching Applications<a class="headerlink" href="#launching-applications" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Click supports launching applications through <a class="reference internal" href="index.html#click.launch" title="click.launch"><code class="xref py py-func docutils literal"><span class="pre">launch()</span></code></a>.  This can be
used to open the default application assocated with a URL or filetype.
This can be used to launch web browsers or picture viewers, for instance.
In addition to this, it can also launch the file manager and automatically
select the provided file.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="s1">&#39;http://click.pocoo.org/&#39;</span><span class="p">)</span>
<span class="n">click</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="s1">&#39;/my/downloaded/file.txt&#39;</span><span class="p">,</span> <span class="n">locate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="printing-filenames">
<h4>Printing Filenames<a class="headerlink" href="#printing-filenames" title="Permalink to this headline">¶</a></h4>
<p>Because filenames might not be Unicode, formatting them can be a bit
tricky.  Generally, this is easier in Python 2 than on 3, as you can just
write the bytes to stdout with the <code class="docutils literal"><span class="pre">print</span></code> function, but in Python 3, you
will always need to operate in Unicode.</p>
<p>The way this works with click is through the <a class="reference internal" href="index.html#click.format_filename" title="click.format_filename"><code class="xref py py-func docutils literal"><span class="pre">format_filename()</span></code></a>
function.  It does a best-effort conversion of the filename to Unicode and
will never fail.  This makes it possible to use these filenames in the
context of a full Unicode string.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="s1">&#39;Path: </span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="n">click</span><span class="o">.</span><span class="n">format_filename</span><span class="p">(</span><span class="n">b</span><span class="s1">&#39;foo.txt&#39;</span><span class="p">))</span>
</pre></div>
</div>
</div>
<div class="section" id="standard-streams">
<h4>Standard Streams<a class="headerlink" href="#standard-streams" title="Permalink to this headline">¶</a></h4>
<p>For command line utilities, it&#8217;s very important to get access to input and
output streams reliably.  Python generally provides access to these
streams through <code class="docutils literal"><span class="pre">sys.stdout</span></code> and friends, but unfortunately, there are
API differences between 2.x and 3.x, especially with regards to how these
streams respond to Unicode and binary data.</p>
<p>Because of this, click provides the <a class="reference internal" href="index.html#click.get_binary_stream" title="click.get_binary_stream"><code class="xref py py-func docutils literal"><span class="pre">get_binary_stream()</span></code></a> and
<a class="reference internal" href="index.html#click.get_text_stream" title="click.get_text_stream"><code class="xref py py-func docutils literal"><span class="pre">get_text_stream()</span></code></a> functions, which produce consistent results with
different Python versions and for a wide variety of terminal configurations.</p>
<p>The end result is that these functions will always return a functional
stream object (except in very odd cases in Python 3; see
<a class="reference internal" href="index.html#python3-limitations"><span class="std std-ref">Python 3 Limitations</span></a>).</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">stdin_text</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">get_text_stream</span><span class="p">(</span><span class="s1">&#39;stdin&#39;</span><span class="p">)</span>
<span class="n">stdout_binary</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">get_binary_stream</span><span class="p">(</span><span class="s1">&#39;stdout&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 6.0.</span></p>
</div>
<p>Click now emulates output streams on Windows to support unicode to the
Windows console through separate APIs.  For more information see
<a href="#id4"><span class="problematic" id="id5">`wincmd`_</span></a>.</p>
</div>
<div class="section" id="intelligent-file-opening">
<h4>Intelligent File Opening<a class="headerlink" href="#intelligent-file-opening" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<p>Starting with Click 3.0 the logic for opening files from the <a class="reference internal" href="index.html#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a>
type is exposed through the <a class="reference internal" href="index.html#click.open_file" title="click.open_file"><code class="xref py py-func docutils literal"><span class="pre">open_file()</span></code></a> function.  It can
intelligently open stdin/stdout as well as any other file.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="n">stdout</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="s1">&#39;-&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
<span class="n">test_file</span> <span class="o">=</span> <span class="n">click</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="s1">&#39;test.txt&#39;</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>If stdin or stdout are returned, the return value is wrapped in a special
file where the context manager will prevent the closing of the file.  This
makes the handling of standard streams transparent and you can always use
it like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">click</span><span class="o">.</span><span class="n">open_file</span><span class="p">(</span><span class="n">filename</span><span class="p">,</span> <span class="s1">&#39;w&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s1">&#39;Hello World!</span><span class="se">\n</span><span class="s1">&#39;</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="finding-application-folders">
<h4>Finding Application Folders<a class="headerlink" href="#finding-application-folders" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Very often, you want to open a configuration file that belongs to your
application.  However, different operating systems store these configuration
files in different locations depending on their standards.  Click provides
a <a class="reference internal" href="index.html#click.get_app_dir" title="click.get_app_dir"><code class="xref py py-func docutils literal"><span class="pre">get_app_dir()</span></code></a> function which returns the most appropriate location
for per-user config files for your application depending on the OS.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">os</span>
<span class="kn">import</span> <span class="nn">click</span>
<span class="kn">import</span> <span class="nn">ConfigParser</span>

<span class="n">APP_NAME</span> <span class="o">=</span> <span class="s1">&#39;My Application&#39;</span>

<span class="k">def</span> <span class="nf">read_config</span><span class="p">():</span>
    <span class="n">cfg</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">get_app_dir</span><span class="p">(</span><span class="n">APP_NAME</span><span class="p">),</span> <span class="s1">&#39;config.ini&#39;</span><span class="p">)</span>
    <span class="n">parser</span> <span class="o">=</span> <span class="n">ConfigParser</span><span class="o">.</span><span class="n">RawConfigParser</span><span class="p">()</span>
    <span class="n">parser</span><span class="o">.</span><span class="n">read</span><span class="p">([</span><span class="n">cfg</span><span class="p">])</span>
    <span class="n">rv</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="k">for</span> <span class="n">section</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">sections</span><span class="p">():</span>
        <span class="k">for</span> <span class="n">key</span><span class="p">,</span> <span class="n">value</span> <span class="ow">in</span> <span class="n">parser</span><span class="o">.</span><span class="n">items</span><span class="p">(</span><span class="n">section</span><span class="p">):</span>
            <span class="n">rv</span><span class="p">[</span><span class="s1">&#39;</span><span class="si">%s</span><span class="s1">.</span><span class="si">%s</span><span class="s1">&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">section</span><span class="p">,</span> <span class="n">key</span><span class="p">)]</span> <span class="o">=</span> <span class="n">value</span>
    <span class="k">return</span> <span class="n">rv</span>
</pre></div>
</div>
</div>
<div class="section" id="showing-progress-bars">
<h4>Showing Progress Bars<a class="headerlink" href="#showing-progress-bars" title="Permalink to this headline">¶</a></h4>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>Sometimes, you have command line scripts that need to process a lot of data,
but you want to quickly show the user some progress about how long that
will take.  Click supports simple progress bar rendering for that through
the <a class="reference internal" href="index.html#click.progressbar" title="click.progressbar"><code class="xref py py-func docutils literal"><span class="pre">progressbar()</span></code></a> function.</p>
<p>The basic usage is very simple: the idea is that you have an iterable that
you want to operate on.  For each item in the iterable it might take some
time to do processing.  So say you have a loop like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">all_the_users_to_process</span><span class="p">:</span>
    <span class="n">modify_the_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>To hook this up with an automatically updating progress bar, all you need
to do is to change the code to this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>

<span class="k">with</span> <span class="n">click</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="n">all_the_users_to_process</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">bar</span><span class="p">:</span>
        <span class="n">modify_the_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Click will then automatically print a progress bar to the terminal and
calculate the remaining time for you.  The calculation of remaining time
requires that the iterable has a length.  If it does not have a length
but you know the length, you can explicitly provide it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">click</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="n">all_the_users_to_process</span><span class="p">,</span>
                       <span class="n">length</span><span class="o">=</span><span class="n">number_of_users</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">bar</span><span class="p">:</span>
        <span class="n">modify_the_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Another useful feature is to associate a label with the progress bar which
will be shown preceding the progress bar:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">click</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="n">all_the_users_to_process</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Modifying user accounts&#39;</span><span class="p">,</span>
                       <span class="n">length</span><span class="o">=</span><span class="n">number_of_users</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">user</span> <span class="ow">in</span> <span class="n">bar</span><span class="p">:</span>
        <span class="n">modify_the_user</span><span class="p">(</span><span class="n">user</span><span class="p">)</span>
</pre></div>
</div>
<p>Sometimes, one may need to iterate over an external iterator, and advance the
progress bar irregularly. To do so, you need to specify the length (and no
iterable), and use the update method on the context return value instead of
iterating directly over it:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">click</span><span class="o">.</span><span class="n">progressbar</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">total_size</span><span class="p">,</span>
                       <span class="n">label</span><span class="o">=</span><span class="s1">&#39;Unzipping archive&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">archive</span> <span class="ow">in</span> <span class="n">zip_file</span><span class="p">:</span>
        <span class="n">archive</span><span class="o">.</span><span class="n">extract</span><span class="p">()</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">archive</span><span class="o">.</span><span class="n">size</span><span class="p">)</span>
</pre></div>
</div>
</div>
</div>
<span id="document-bashcomplete"></span><div class="section" id="bash-complete">
<h3>Bash Complete<a class="headerlink" href="#bash-complete" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<p>As of Click 2.0, there is built-in support for Bash completion for
any Click script.  There are certain restrictions on when this completion
is available, but for the most part it should just work.</p>
<div class="section" id="limitations">
<h4>Limitations<a class="headerlink" href="#limitations" title="Permalink to this headline">¶</a></h4>
<p>Bash completion is only available if a script has been installed properly,
and not executed through the <code class="docutils literal"><span class="pre">python</span></code> command.  For information about
how to do that, see <a class="reference internal" href="index.html#setuptools-integration"><span class="std std-ref">Setuptools Integration</span></a>.  Also, Click currently
only supports completion for Bash.</p>
<p>Currently, Bash completion is an internal feature that is not customizable.
This might be relaxed in future versions.</p>
</div>
<div class="section" id="what-it-completes">
<h4>What it Completes<a class="headerlink" href="#what-it-completes" title="Permalink to this headline">¶</a></h4>
<p>Generally, the Bash completion support will complete subcommands and
parameters.  Subcommands are always listed whereas parameters only if at
least a dash has been provided.  Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span>$ repo &lt;TAB&gt;&lt;TAB&gt;
clone    commit   copy     delete   setuser
$ repo clone -&lt;TAB&gt;&lt;TAB&gt;
--deep     --help     --rev      --shallow  -r
</pre></div>
</div>
</div>
<div class="section" id="activation">
<h4>Activation<a class="headerlink" href="#activation" title="Permalink to this headline">¶</a></h4>
<p>In order to activate Bash completion, you need to inform Bash that
completion is available for your script, and how.  Any Click application
automatically provides support for that.  The general way this works is
through a magic environment variable called <code class="docutils literal"><span class="pre">_&lt;PROG_NAME&gt;_COMPLETE</span></code>,
where <code class="docutils literal"><span class="pre">&lt;PROG_NAME&gt;</span></code> is your application executable name in uppercase
with dashes replaced by underscores.</p>
<p>If your tool is called <code class="docutils literal"><span class="pre">foo-bar</span></code>, then the magic variable is called
<code class="docutils literal"><span class="pre">_FOO_BAR_COMPLETE</span></code>.  By exporting it with the <code class="docutils literal"><span class="pre">source</span></code> value it will
spit out the activation script which can be trivally activated.</p>
<p>For instance, to enable Bash completion for your <code class="docutils literal"><span class="pre">foo-bar</span></code> script, this
is what you would need to put into your <code class="docutils literal"><span class="pre">.bashrc</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">eval</span> <span class="s2">&quot;$(_FOO_BAR_COMPLETE=source foo-bar)&quot;</span>
</pre></div>
</div>
<p>From this point onwards, your script will have Bash completion enabled.</p>
</div>
<div class="section" id="activation-script">
<h4>Activation Script<a class="headerlink" href="#activation-script" title="Permalink to this headline">¶</a></h4>
<p>The above activation example will always invoke your application on
startup.  This might be slowing down the shell activation time
significantly if you have many applications.  Alternatively, you could also
ship a file with the contents of that, which is what Git and other systems
are doing.</p>
<p>This can be easily accomplished:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">_FOO_BAR_COMPLETE</span><span class="o">=</span><span class="n">source</span> <span class="n">foo</span><span class="o">-</span><span class="n">bar</span> <span class="o">&gt;</span> <span class="n">foo</span><span class="o">-</span><span class="n">bar</span><span class="o">-</span><span class="n">complete</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
<p>And then you would put this into your bashrc instead:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="o">.</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">foo</span><span class="o">-</span><span class="n">bar</span><span class="o">-</span><span class="n">complete</span><span class="o">.</span><span class="n">sh</span>
</pre></div>
</div>
</div>
</div>
<span id="document-exceptions"></span><div class="section" id="exception-handling">
<h3>Exception Handling<a class="headerlink" href="#exception-handling" title="Permalink to this headline">¶</a></h3>
<p>Click internally uses exceptions to signal various error conditions that
the user of the application might have caused.  Primarily this is things
like incorrect usage.</p>
<div class="section" id="where-are-errors-handled">
<h4>Where are Errors Handled?<a class="headerlink" href="#where-are-errors-handled" title="Permalink to this headline">¶</a></h4>
<p>Click&#8217;s main error handling is happening in <a class="reference internal" href="index.html#click.BaseCommand.main" title="click.BaseCommand.main"><code class="xref py py-meth docutils literal"><span class="pre">BaseCommand.main()</span></code></a>.  In
there it handles all subclasses of <a class="reference internal" href="index.html#click.ClickException" title="click.ClickException"><code class="xref py py-exc docutils literal"><span class="pre">ClickException</span></code></a> as well as the
standard <a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#EOFError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">EOFError</span></code></a> and <a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">KeyboardInterrupt</span></code></a> exceptions.  The
latter are internally translated into a <a class="reference internal" href="index.html#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a>.</p>
<p>The logic applied is the following:</p>
<ol class="arabic simple">
<li>If an <a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#EOFError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">EOFError</span></code></a> or <a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#KeyboardInterrupt" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">KeyboardInterrupt</span></code></a> happens, reraise it
as <a class="reference internal" href="index.html#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a>.</li>
<li>If an <a class="reference internal" href="index.html#click.ClickException" title="click.ClickException"><code class="xref py py-exc docutils literal"><span class="pre">ClickException</span></code></a> is raised, invoke the
<code class="xref py py-meth docutils literal"><span class="pre">ClickException.show()</span></code> method on it to display it and then exit
the program with <code class="xref py py-attr docutils literal"><span class="pre">ClickException.exit_code</span></code>.</li>
<li>If an <a class="reference internal" href="index.html#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a> exception is raised print the string <code class="docutils literal"><span class="pre">Aborted!</span></code>
to standard error and exit the program with exit code <code class="docutils literal"><span class="pre">1</span></code>.</li>
<li>if it goes through well, exit the program with exit code <code class="docutils literal"><span class="pre">0</span></code>.</li>
</ol>
</div>
<div class="section" id="what-if-i-don-t-want-that">
<h4>What if I don&#8217;t want that?<a class="headerlink" href="#what-if-i-don-t-want-that" title="Permalink to this headline">¶</a></h4>
<p>Generally you always have the option to invoke the <code class="xref py py-meth docutils literal"><span class="pre">invoke()</span></code> method
yourself.  For instance if you have a <a class="reference internal" href="index.html#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> you can invoke it
manually like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">make_context</span><span class="p">(</span><span class="s1">&#39;command-name&#39;</span><span class="p">,</span> <span class="p">[</span><span class="s1">&#39;args&#39;</span><span class="p">,</span> <span class="s1">&#39;go&#39;</span><span class="p">,</span> <span class="s1">&#39;here&#39;</span><span class="p">])</span>
<span class="k">with</span> <span class="n">ctx</span><span class="p">:</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">command</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
</pre></div>
</div>
<p>In this case exceptions will not be handled at all and bubbled up as you
would expect.</p>
<p>Starting with Click 3.0 you can also use the <code class="xref py py-meth docutils literal"><span class="pre">Command.main()</span></code> method
but disable the standalone mode which will do two things: disable
exception handling and disable the implicit <code class="xref py py-meth docutils literal"><span class="pre">sys.exit()</span></code> at the end.</p>
<p>So you can do something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">command</span><span class="o">.</span><span class="n">main</span><span class="p">([</span><span class="s1">&#39;command-name&#39;</span><span class="p">,</span> <span class="s1">&#39;args&#39;</span><span class="p">,</span> <span class="s1">&#39;go&#39;</span><span class="p">,</span> <span class="s1">&#39;here&#39;</span><span class="p">],</span>
             <span class="n">standalone_mode</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="section" id="which-exceptions-exist">
<h4>Which Exceptions Exist?<a class="headerlink" href="#which-exceptions-exist" title="Permalink to this headline">¶</a></h4>
<p>Click has two exception bases: <a class="reference internal" href="index.html#click.ClickException" title="click.ClickException"><code class="xref py py-exc docutils literal"><span class="pre">ClickException</span></code></a> which is raised for
all exceptions that Click wants to signal to the user and <a class="reference internal" href="index.html#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a>
which is used to instruct Click to abort the execution.</p>
<p>A <a class="reference internal" href="index.html#click.ClickException" title="click.ClickException"><code class="xref py py-exc docutils literal"><span class="pre">ClickException</span></code></a> has a <code class="xref py py-meth docutils literal"><span class="pre">show()</span></code> method which
can render an error message to stderr or the given file object.  If you
want to use the exception yourself for doing something check the API docs
about what else they provide.</p>
<p>The following common subclasses exist:</p>
<ul class="simple">
<li><a class="reference internal" href="index.html#click.UsageError" title="click.UsageError"><code class="xref py py-exc docutils literal"><span class="pre">UsageError</span></code></a> to inform the user that something went wrong.</li>
<li><a class="reference internal" href="index.html#click.BadParameter" title="click.BadParameter"><code class="xref py py-exc docutils literal"><span class="pre">BadParameter</span></code></a> to inform the user that something went wrong with
a specific parameter.  These are often handled internally in Click and
augmented with extra information if possible.  For instance if those
are raised from a callback Click will automatically augment it with
the parameter name if possible.</li>
<li><a class="reference internal" href="index.html#click.FileError" title="click.FileError"><code class="xref py py-exc docutils literal"><span class="pre">FileError</span></code></a> this is an error that is raised by the
<code class="xref py py-exc docutils literal"><span class="pre">FileType</span></code> if Click encounters issues opening the file.</li>
</ul>
</div>
</div>
<span id="document-python3"></span><div class="section" id="python-3-support">
<h3>Python 3 Support<a class="headerlink" href="#python-3-support" title="Permalink to this headline">¶</a></h3>
<p>Click supports Python 3, but like all other command line utility libraries,
it suffers from the Unicode text model in Python 3.  All examples in the
documentation were written so that they could run on both Python 2.x and
Python 3.3 or higher.</p>
<p>At the moment, it is strongly recommended is to use Python 2 for Click
utilities unless Python 3 is a hard requirement.</p>
<div class="section" id="python-3-limitations">
<span id="python3-limitations"></span><h4>Python 3 Limitations<a class="headerlink" href="#python-3-limitations" title="Permalink to this headline">¶</a></h4>
<p>At the moment, Click suffers from a few problems with Python 3:</p>
<ul>
<li><p class="first">The command line in Unix traditionally is in bytes, not Unicode.  While
there are encoding hints for all of this, there are generally some
situations where this can break.  The most common one is SSH
connections to machines with different locales.</p>
<p>Misconfigured environments can currently cause a wide range of Unicode
problems in Python 3 due to the lack of support for roundtripping
surrogate escapes.  This will not be fixed in Click itself!</p>
<p>For more information see <a class="reference internal" href="#python3-surrogates"><span class="std std-ref">Python 3 Surrogate Handling</span></a>.</p>
</li>
<li><p class="first">Standard input and output in Python 3 is opened in Unicode mode by
default.  Click has to reopen the stream in binary mode in certain
situations.  Because there is no standardized way to do this, this
might not always work.  Primarily this can become a problem when
testing command-line applications.</p>
<p>This is not supported:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">(</span><span class="s1">&#39;Input here&#39;</span><span class="p">)</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">StringIO</span><span class="p">()</span>
</pre></div>
</div>
<p>Instead you need to do this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nb">input</span> <span class="o">=</span> <span class="s1">&#39;Input here&#39;</span>
<span class="n">in_stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">(</span><span class="nb">input</span><span class="o">.</span><span class="n">encode</span><span class="p">(</span><span class="s1">&#39;utf-8&#39;</span><span class="p">))</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdin</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">TextIOWrapper</span><span class="p">(</span><span class="n">in_stream</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
<span class="n">out_stream</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">BytesIO</span><span class="p">()</span>
<span class="n">sys</span><span class="o">.</span><span class="n">stdout</span> <span class="o">=</span> <span class="n">io</span><span class="o">.</span><span class="n">TextIOWrapper</span><span class="p">(</span><span class="n">out_stream</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s1">&#39;utf-8&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>Remember that in that case, you need to use <code class="docutils literal"><span class="pre">out_stream.getvalue()</span></code>
and not <code class="docutils literal"><span class="pre">sys.stdout.getvalue()</span></code> if you want to access the buffer
contents as the wrapper will not forward that method.</p>
</li>
</ul>
</div>
<div class="section" id="python-2-and-3-differences">
<h4>Python 2 and 3 Differences<a class="headerlink" href="#python-2-and-3-differences" title="Permalink to this headline">¶</a></h4>
<p>Click attempts to minimize the differences between Python 2 and Python 3
by following best practices for both languages.</p>
<p>In Python 2, the following is true:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">sys.stdin</span></code>, <code class="docutils literal"><span class="pre">sys.stdout</span></code>, and <code class="docutils literal"><span class="pre">sys.stderr</span></code> are opened in binary
mode, but under some circumstances they support Unicode output.  Click
attempts to not subvert this but provides support for forcing streams
to be Unicode-based.</li>
<li><code class="docutils literal"><span class="pre">sys.argv</span></code> is always byte-based.  Click will pass bytes to all
input types and convert as necessary.  The <a class="reference internal" href="index.html#click.STRING" title="click.STRING"><code class="xref py py-class docutils literal"><span class="pre">STRING</span></code></a> type
automatically will decode properly the input value into a string by
trying the most appropriate encodings.</li>
<li>When dealing with files, Click will never go through the Unicode APIs
and will instead use the operating system&#8217;s byte APIs to open the
files.</li>
</ul>
<p>In Python 3, the following is true:</p>
<ul>
<li><p class="first"><code class="docutils literal"><span class="pre">sys.stdin</span></code>, <code class="docutils literal"><span class="pre">sys.stdout</span></code> and <code class="docutils literal"><span class="pre">sys.stderr</span></code> are by default
text-based.  When Click needs a binary stream, it attempts to discover
the underlying binary stream.  See <a class="reference internal" href="#python3-limitations"><span class="std std-ref">Python 3 Limitations</span></a> for how
this works.</p>
</li>
<li><p class="first"><code class="docutils literal"><span class="pre">sys.argv</span></code> is always Unicode-based.  This also means that the native
type for input values to the types in Click is Unicode, and not bytes.</p>
<p>This causes problems if the terminal is incorrectly set and Python
does not figure out the encoding.  In that case, the Unicode string
will contain error bytes encoded as surrogate escapes.</p>
</li>
<li><p class="first">When dealing with files, Click will always use the Unicode file system
API calls by using the operating system&#8217;s reported or guessed
filesystem encoding.  Surrogates are supported for filenames, so it
should be possible to open files through the <a class="reference internal" href="index.html#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> type even
if the environment is misconfigured.</p>
</li>
</ul>
</div>
<div class="section" id="python-3-surrogate-handling">
<span id="python3-surrogates"></span><h4>Python 3 Surrogate Handling<a class="headerlink" href="#python-3-surrogate-handling" title="Permalink to this headline">¶</a></h4>
<p>Click in Python 3 does all the Unicode handling in the standard library
and is subject to its behavior.  In Python 2, Click does all the Unicode
handling itself, which means there are differences in error behavior.</p>
<p>The most glaring difference is that in Python 2, Unicode will &#8220;just work&#8221;,
while in Python 3, it requires extra care.  The reason for this is that in
Python 3, the encoding detection is done in the interpreter, and on Linux
and certain other operating systems, its encoding handling is problematic.</p>
<p>The biggest source of frustration is that Click scripts invoked by
init systems (sysvinit, upstart, systemd, etc.), deployment tools (salt,
puppet), or cron jobs (cron) will refuse to work unless a Unicode locale is
exported.</p>
<p>If Click encounters such an environment it will prevent further execution
to force you to set a locale.  This is done because Click cannot know
about the state of the system once it&#8217;s invoked and restore the values
before Python&#8217;s Unicode handling kicked in.</p>
<p>If you see something like this error in Python 3:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
  <span class="o">...</span>
<span class="ne">RuntimeError</span><span class="p">:</span> <span class="n">Click</span> <span class="n">will</span> <span class="n">abort</span> <span class="n">further</span> <span class="n">execution</span> <span class="n">because</span> <span class="n">Python</span> <span class="mi">3</span> <span class="n">was</span>
  <span class="n">configured</span> <span class="n">to</span> <span class="n">use</span> <span class="n">ASCII</span> <span class="k">as</span> <span class="n">encoding</span> <span class="k">for</span> <span class="n">the</span> <span class="n">environment</span><span class="o">.</span> <span class="n">Either</span> <span class="n">switch</span>
  <span class="n">to</span> <span class="n">Python</span> <span class="mi">2</span> <span class="ow">or</span> <span class="n">consult</span> <span class="n">http</span><span class="p">:</span><span class="o">//</span><span class="n">click</span><span class="o">.</span><span class="n">pocoo</span><span class="o">.</span><span class="n">org</span><span class="o">/</span><span class="n">python3</span><span class="o">/</span> <span class="k">for</span>
  <span class="n">mitigation</span> <span class="n">steps</span><span class="o">.</span>
</pre></div>
</div>
<p>You are dealing with an environment where Python 3 thinks you are
restricted to ASCII data.  The solution to these problems is different
depending on which locale your computer is running in.</p>
<p>For instance, if you have a German Linux machine, you can fix the problem
by exporting the locale to <code class="docutils literal"><span class="pre">de_DE.utf-8</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">LC_ALL</span><span class="o">=</span><span class="n">de_DE</span><span class="o">.</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span>
<span class="n">export</span> <span class="n">LANG</span><span class="o">=</span><span class="n">de_DE</span><span class="o">.</span><span class="n">utf</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>If you are on a US machine, <code class="docutils literal"><span class="pre">en_US.utf-8</span></code> is the encoding of choice.  On
some newer Linux systems, you could also try <code class="docutils literal"><span class="pre">C.UTF-8</span></code> as the locale:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">export</span> <span class="n">LC_ALL</span><span class="o">=</span><span class="n">C</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
<span class="n">export</span> <span class="n">LANG</span><span class="o">=</span><span class="n">C</span><span class="o">.</span><span class="n">UTF</span><span class="o">-</span><span class="mi">8</span>
</pre></div>
</div>
<p>On some systems it was reported that <cite>UTF-8</cite> has to be written as <cite>UTF8</cite>
and vice versa.  To see which locales are supported you can invoke
<code class="docutils literal"><span class="pre">locale</span> <span class="pre">-a</span></code>:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">locale</span> <span class="o">-</span><span class="n">a</span>
</pre></div>
</div>
<p>You need to do this before you invoke your Python script.  If you are
curious about the reasons for this, you can join the discussions in the
Python 3 bug tracker:</p>
<ul class="simple">
<li><a class="reference external" href="http://bugs.python.org/issue13643#msg149941">ASCII is a bad filesystem default encoding</a></li>
<li><a class="reference external" href="http://bugs.python.org/issue19977">Use surrogateescape as default error handler</a></li>
<li><a class="reference external" href="http://bugs.python.org/issue19846">Python 3 raises Unicode errors in the C locale</a></li>
<li><a class="reference external" href="http://bugs.python.org/issue21398">LC_CTYPE=C:  pydoc leaves terminal in an unusable state</a> (this is relevant to Click
because the pager support is provided by the stdlib pydoc module)</li>
</ul>
</div>
<div class="section" id="unicode-literals">
<h4>Unicode Literals<a class="headerlink" href="#unicode-literals" title="Permalink to this headline">¶</a></h4>
<p>Starting with Click 5.0 there will be a warning for the use of the
<code class="docutils literal"><span class="pre">unicode_literals</span></code> future import in Python 2.  This has been done due to
the negative consequences of this import with regards to unintentionally
causing bugs due to introducing Unicode data to APIs that are incapable of
handling them.  For some examples of this issue, see the discussion on
this github issue: <a class="reference external" href="https://github.com/PythonCharmers/python-future/issues/22">python-future#22</a>.</p>
<p>If you use <code class="docutils literal"><span class="pre">unicode_literals</span></code> in any file that defines a Click command
or that invokes a click command you will be given a warning.  You are
strongly encouraged to not use <code class="docutils literal"><span class="pre">unicode_literals</span></code> and instead use
explicit <code class="docutils literal"><span class="pre">u</span></code> prefixes for your Unicode strings.</p>
<p>If you do want to ignore the warning and continue using
<code class="docutils literal"><span class="pre">unicode_literals</span></code> on your own peril, you can disable the warning as
follows:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="n">click</span><span class="o">.</span><span class="n">disable_unicode_literals_warning</span> <span class="o">=</span> <span class="kc">True</span>
</pre></div>
</div>
</div>
</div>
<span id="document-wincmd"></span><div class="section" id="windows-console-notes">
<h3>Windows Console Notes<a class="headerlink" href="#windows-console-notes" title="Permalink to this headline">¶</a></h3>
<div class="versionadded">
<p><span class="versionmodified">New in version 6.0.</span></p>
</div>
<p>Until Click 6.0 there are various bugs and limitations with using Click on
a Windows console.  Most notably the decoding of command line arguments
was performed with the wrong encoding on Python 2 and on all versions of
Python output of unicode characters was impossible.  Starting with Click
6.0 we now emulate output streams on Windows to support unicode to the
Windows console through separate APIs and we perform different decoding of
parameters.</p>
<p>Here is a brief overview of how this works and what it means to you.</p>
<div class="section" id="unicode-arguments">
<h4>Unicode Arguments<a class="headerlink" href="#unicode-arguments" title="Permalink to this headline">¶</a></h4>
<p>Click internally is generally based on the concept that any argument can
come in as either byte string or unicode string and conversion is
performed to the type expected value as late as possible.  This has some
advantages as it allows us to accept the data in the most appropriate form
for the operating system and Python version.</p>
<p>For instance paths are left as bytes on Python 2 unless you explicitly
tell it otherwise.</p>
<p>This caused some problems on Windows where initially the wrong encoding
was used and garbage ended up in your input data.  We not only fixed the
encoding part, but we also now extract unicode parameters from <cite>sys.argv</cite>.</p>
<p>This means that on Python 2 under Windows, the arguments processed will
<em>most likely</em> be of unicode nature and not bytes.  This was something that
previously did not really happen unless you explicitly passed in unicode
parameters so your custom types need to be aware of this.</p>
<p>There is also another limitation with this: if <cite>sys.argv</cite> was modified
prior to invoking a click handler, we have to fall back to the regular
byte input in which case not all unicode values are available but only a
subset of the codepage used for parameters.</p>
</div>
<div class="section" id="unicode-output-and-input">
<h4>Unicode Output and Input<a class="headerlink" href="#unicode-output-and-input" title="Permalink to this headline">¶</a></h4>
<p>Unicode output and input on Windows is implemented through the concept of
a dispatching text stream.  What this means is that when click first needs
a text output (or input) stream on windows it goes through a few checks to
figure out of a windows console is connected or not.  If no Windows
console is present then the text output stream is returned as such and the
encoding for that stream is set to <code class="docutils literal"><span class="pre">utf-8</span></code> like on all platforms.</p>
<p>However if a console is connected the stream will instead be emulated and
use the cmd.exe unicode APIs to output text information.  In this case the
stream will also use <code class="docutils literal"><span class="pre">utf-16-le</span></code> as internal encoding.  However there is
some hackery going on that the underlying raw IO buffer is still bypassing
the unicode APIs and byte output through an indirection is still possible.</p>
<p>This hackery is used on both Python 2 and Python 3 as neither version of
Python has native support for cmd.exe with unicode characters.  There are
some limitations you need to be aware of:</p>
<ul class="simple">
<li>this unicode support is limited to <code class="docutils literal"><span class="pre">click.echo</span></code>, <code class="docutils literal"><span class="pre">click.prompt</span></code> as
well as <code class="docutils literal"><span class="pre">click.get_text_stream</span></code>.</li>
<li>depending on if unicode values or byte strings are passed the control
flow goes completely different places internally which can have some
odd artifacts if data partially ends up being buffered.  Click
attempts to protect against that by manually always flushing but if
you are mixing and matching different string types to <code class="docutils literal"><span class="pre">stdout</span></code> or
<code class="docutils literal"><span class="pre">stderr</span></code> you will need to manually flush.</li>
</ul>
<p>Another important thing to note is that the Windows console&#8217;s default
fonts do not support a lot of characters which means that you are mostly
limited to international letters but no emojis or special characters.</p>
</div>
</div>
</div>
</div>
<div class="section" id="api-reference">
<h2>API Reference<a class="headerlink" href="#api-reference" title="Permalink to this headline">¶</a></h2>
<p>If you are looking for information on a specific function, class, or
method, this part of the documentation is for you.</p>
<div class="toctree-wrapper compound">
<span id="document-api"></span><div class="section" id="module-click">
<span id="api"></span><h3>API<a class="headerlink" href="#module-click" title="Permalink to this headline">¶</a></h3>
<p>This part of the documentation lists the full API reference of all public
classes and functions.</p>
<div class="section" id="decorators">
<h4>Decorators<a class="headerlink" href="#decorators" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="click.command">
<code class="descclassname">click.</code><code class="descname">command</code><span class="sig-paren">(</span><em>name=None</em>, <em>cls=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.command" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new <a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> and uses the decorated function as
callback.  This will also automatically attach all decorated
<a class="reference internal" href="#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a>s and <a class="reference internal" href="#click.argument" title="click.argument"><code class="xref py py-func docutils literal"><span class="pre">argument()</span></code></a>s as parameters to the command.</p>
<p>The name of the command defaults to the name of the function.  If you
want to change that, you can pass the intended name as the first
argument.</p>
<p>All keyword arguments are forwarded to the underlying command class.</p>
<p>Once decorated the function turns into a <a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> instance
that can be invoked as a command line utility or be attached to a
command <a class="reference internal" href="#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; the name of the command.  This defaults to the function
name.</li>
<li><strong>cls</strong> &#8211; the command class to instantiate.  This defaults to
<a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.group">
<code class="descclassname">click.</code><code class="descname">group</code><span class="sig-paren">(</span><em>name=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.group" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates a new <a class="reference internal" href="#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> with a function as callback.  This
works otherwise the same as <a class="reference internal" href="#click.command" title="click.command"><code class="xref py py-func docutils literal"><span class="pre">command()</span></code></a> just that the <cite>cls</cite>
parameter is set to <a class="reference internal" href="#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="click.argument">
<code class="descclassname">click.</code><code class="descname">argument</code><span class="sig-paren">(</span><em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches an argument to the command.  All positional arguments are
passed as parameter declarations to <a class="reference internal" href="#click.Argument" title="click.Argument"><code class="xref py py-class docutils literal"><span class="pre">Argument</span></code></a>; all keyword
arguments are forwarded unchanged (except <code class="docutils literal"><span class="pre">cls</span></code>).
This is equivalent to creating an <a class="reference internal" href="#click.Argument" title="click.Argument"><code class="xref py py-class docutils literal"><span class="pre">Argument</span></code></a> instance manually
and attaching it to the <a class="reference internal" href="#click.Command.params" title="click.Command.params"><code class="xref py py-attr docutils literal"><span class="pre">Command.params</span></code></a> list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cls</strong> &#8211; the argument class to instantiate.  This defaults to
<a class="reference internal" href="#click.Argument" title="click.Argument"><code class="xref py py-class docutils literal"><span class="pre">Argument</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.option">
<code class="descclassname">click.</code><code class="descname">option</code><span class="sig-paren">(</span><em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.option" title="Permalink to this definition">¶</a></dt>
<dd><p>Attaches an option to the command.  All positional arguments are
passed as parameter declarations to <a class="reference internal" href="#click.Option" title="click.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a>; all keyword
arguments are forwarded unchanged (except <code class="docutils literal"><span class="pre">cls</span></code>).
This is equivalent to creating an <a class="reference internal" href="#click.Option" title="click.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a> instance manually
and attaching it to the <a class="reference internal" href="#click.Command.params" title="click.Command.params"><code class="xref py py-attr docutils literal"><span class="pre">Command.params</span></code></a> list.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cls</strong> &#8211; the option class to instantiate.  This defaults to
<a class="reference internal" href="#click.Option" title="click.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.password_option">
<code class="descclassname">click.</code><code class="descname">password_option</code><span class="sig-paren">(</span><em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.password_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for password prompts.</p>
<p>This is equivalent to decorating a function with <a class="reference internal" href="#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a> with
the following parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--password&#39;</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">confirmation_prompt</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
              <span class="n">hide_input</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">changeadmin</span><span class="p">(</span><span class="n">password</span><span class="p">):</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="click.confirmation_option">
<code class="descclassname">click.</code><code class="descname">confirmation_option</code><span class="sig-paren">(</span><em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.confirmation_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Shortcut for confirmation prompts that can be ignored by passing
<code class="docutils literal"><span class="pre">--yes</span></code> as parameter.</p>
<p>This is equivalent to decorating a function with <a class="reference internal" href="#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a> with
the following parameters:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">value</span><span class="p">:</span>
        <span class="n">ctx</span><span class="o">.</span><span class="n">abort</span><span class="p">()</span>

<span class="nd">@click</span><span class="o">.</span><span class="n">command</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;--yes&#39;</span><span class="p">,</span> <span class="n">is_flag</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">callback</span><span class="o">=</span><span class="n">callback</span><span class="p">,</span>
              <span class="n">expose_value</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="n">prompt</span><span class="o">=</span><span class="s1">&#39;Do you want to continue?&#39;</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">dropdb</span><span class="p">():</span>
    <span class="k">pass</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="click.version_option">
<code class="descclassname">click.</code><code class="descname">version_option</code><span class="sig-paren">(</span><em>version=None</em>, <em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.version_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <code class="docutils literal"><span class="pre">--version</span></code> option which immediately ends the program
printing out the version number.  This is implemented as an eager
option that prints the version and exits the program in the callback.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>version</strong> &#8211; the version number to show.  If not provided Click
attempts an auto discovery via setuptools.</li>
<li><strong>prog_name</strong> &#8211; the name of the program (defaults to autodetection)</li>
<li><strong>message</strong> &#8211; custom message to show instead of the default
(<code class="docutils literal"><span class="pre">'%(prog)s,</span> <span class="pre">version</span> <span class="pre">%(version)s'</span></code>)</li>
<li><strong>others</strong> &#8211; everything else is forwarded to <a class="reference internal" href="#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a>.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.help_option">
<code class="descclassname">click.</code><code class="descname">help_option</code><span class="sig-paren">(</span><em>*param_decls</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.help_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a <code class="docutils literal"><span class="pre">--help</span></code> option which immediately ends the program
printing out the help page.  This is usually unnecessary to add as
this is added by default to all commands unless suppressed.</p>
<p>Like <a class="reference internal" href="#click.version_option" title="click.version_option"><code class="xref py py-func docutils literal"><span class="pre">version_option()</span></code></a>, this is implemented as eager option that
prints in the callback and exits.</p>
<p>All arguments are forwarded to <a class="reference internal" href="#click.option" title="click.option"><code class="xref py py-func docutils literal"><span class="pre">option()</span></code></a>.</p>
</dd></dl>

<dl class="function">
<dt id="click.pass_context">
<code class="descclassname">click.</code><code class="descname">pass_context</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#click.pass_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Marks a callback as wanting to receive the current context
object as first argument.</p>
</dd></dl>

<dl class="function">
<dt id="click.pass_obj">
<code class="descclassname">click.</code><code class="descname">pass_obj</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#click.pass_obj" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a>, but only pass the object on the
context onwards (<a class="reference internal" href="#click.Context.obj" title="click.Context.obj"><code class="xref py py-attr docutils literal"><span class="pre">Context.obj</span></code></a>).  This is useful if that object
represents the state of a nested system.</p>
</dd></dl>

<dl class="function">
<dt id="click.make_pass_decorator">
<code class="descclassname">click.</code><code class="descname">make_pass_decorator</code><span class="sig-paren">(</span><em>object_type</em>, <em>ensure=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.make_pass_decorator" title="Permalink to this definition">¶</a></dt>
<dd><p>Given an object type this creates a decorator that will work
similar to <a class="reference internal" href="#click.pass_obj" title="click.pass_obj"><code class="xref py py-func docutils literal"><span class="pre">pass_obj()</span></code></a> but instead of passing the object of the
current context, it will find the innermost context of type
<code class="xref py py-func docutils literal"><span class="pre">object_type()</span></code>.</p>
<p>This generates a decorator that works roughly like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">update_wrapper</span>

<span class="k">def</span> <span class="nf">decorator</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="nd">@pass_context</span>
    <span class="k">def</span> <span class="nf">new_func</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
        <span class="n">obj</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="n">find_object</span><span class="p">(</span><span class="n">object_type</span><span class="p">)</span>
        <span class="k">return</span> <span class="n">ctx</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="n">obj</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">update_wrapper</span><span class="p">(</span><span class="n">new_func</span><span class="p">,</span> <span class="n">f</span><span class="p">)</span>
<span class="k">return</span> <span class="n">decorator</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>object_type</strong> &#8211; the type of the object to pass.</li>
<li><strong>ensure</strong> &#8211; if set to <cite>True</cite>, a new object will be created and
remembered on the context if it&#8217;s not there yet.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="utilities">
<h4>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h4>
<dl class="function">
<dt id="click.echo">
<code class="descclassname">click.</code><code class="descname">echo</code><span class="sig-paren">(</span><em>message=None</em>, <em>file=None</em>, <em>nl=True</em>, <em>err=False</em>, <em>color=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.echo" title="Permalink to this definition">¶</a></dt>
<dd><p>Prints a message plus a newline to the given file or stdout.  On
first sight, this looks like the print function, but it has improved
support for handling Unicode and binary data that does not fail no
matter how badly configured the system is.</p>
<p>Primarily it means that you can print binary data as well as Unicode
data on both 2.x and 3.x to the given file in the most appropriate way
possible.  This is a very carefree function as in that it will try its
best to not fail.  As of Click 6.0 this includes support for unicode
output on the Windows console.</p>
<p>In addition to that, if <a class="reference external" href="http://pypi.python.org/pypi/colorama">colorama</a> is installed, the echo function will
also support clever handling of ANSI codes.  Essentially it will then
do the following:</p>
<ul class="simple">
<li>add transparent handling of ANSI color codes on Windows.</li>
<li>hide ANSI codes automatically if the destination file is not a
terminal.</li>
</ul>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 6.0: </span>As of Click 6.0 the echo function will properly support unicode
output on the windows console.  Not that click does not modify
the interpreter in any way which means that <cite>sys.stdout</cite> or the
print statement or function will still not provide unicode support.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0: </span>Starting with version 2.0 of Click, the echo function will work
with colorama if it&#8217;s installed.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>The <cite>err</cite> parameter was added.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 4.0: </span>Added the <cite>color</cite> flag.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> &#8211; the message to print</li>
<li><strong>file</strong> &#8211; the file to write to (defaults to <code class="docutils literal"><span class="pre">stdout</span></code>)</li>
<li><strong>err</strong> &#8211; if set to true the file defaults to <code class="docutils literal"><span class="pre">stderr</span></code> instead of
<code class="docutils literal"><span class="pre">stdout</span></code>.  This is faster and easier than calling
<code class="xref py py-func docutils literal"><span class="pre">get_text_stderr()</span></code> yourself.</li>
<li><strong>nl</strong> &#8211; if set to <cite>True</cite> (the default) a newline is printed afterwards.</li>
<li><strong>color</strong> &#8211; controls if the terminal supports ANSI colors or not.  The
default is autodetection.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.echo_via_pager">
<code class="descclassname">click.</code><code class="descname">echo_via_pager</code><span class="sig-paren">(</span><em>text</em>, <em>color=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.echo_via_pager" title="Permalink to this definition">¶</a></dt>
<dd><p>This function takes a text and shows it via an environment specific
pager on stdout.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.0: </span>Added the <cite>color</cite> flag.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text to page.</li>
<li><strong>color</strong> &#8211; controls if the pager supports ANSI colors or not.  The
default is autodetection.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.prompt">
<code class="descclassname">click.</code><code class="descname">prompt</code><span class="sig-paren">(</span><em>text</em>, <em>default=None</em>, <em>hide_input=False</em>, <em>confirmation_prompt=False</em>, <em>type=None</em>, <em>value_proc=None</em>, <em>prompt_suffix=': '</em>, <em>show_default=True</em>, <em>err=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.prompt" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts a user for input.  This is a convenience function that can
be used to prompt a user for input later.</p>
<p>If the user aborts the input by sending a interrupt signal, this
function will catch it and raise a <a class="reference internal" href="#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a> exception.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 6.0: </span>Added unicode support for cmd.exe on Windows.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>Added the <cite>err</cite> parameter.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text to show for the prompt.</li>
<li><strong>default</strong> &#8211; the default value to use if no input happens.  If this
is not given it will prompt until it&#8217;s aborted.</li>
<li><strong>hide_input</strong> &#8211; if this is set to true then the input value will
be hidden.</li>
<li><strong>confirmation_prompt</strong> &#8211; asks for confirmation for the value.</li>
<li><strong>type</strong> &#8211; the type to use to check the value against.</li>
<li><strong>value_proc</strong> &#8211; if this parameter is provided it&#8217;s a function that
is invoked instead of the type conversion to
convert a value.</li>
<li><strong>prompt_suffix</strong> &#8211; a suffix that should be added to the prompt.</li>
<li><strong>show_default</strong> &#8211; shows or hides the default value in the prompt.</li>
<li><strong>err</strong> &#8211; if set to true the file defaults to <code class="docutils literal"><span class="pre">stderr</span></code> instead of
<code class="docutils literal"><span class="pre">stdout</span></code>, the same as with echo.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.confirm">
<code class="descclassname">click.</code><code class="descname">confirm</code><span class="sig-paren">(</span><em>text</em>, <em>default=False</em>, <em>abort=False</em>, <em>prompt_suffix=': '</em>, <em>show_default=True</em>, <em>err=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.confirm" title="Permalink to this definition">¶</a></dt>
<dd><p>Prompts for confirmation (yes/no question).</p>
<p>If the user aborts the input by sending a interrupt signal this
function will catch it and raise a <a class="reference internal" href="#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a> exception.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>Added the <cite>err</cite> parameter.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the question to ask.</li>
<li><strong>default</strong> &#8211; the default for the prompt.</li>
<li><strong>abort</strong> &#8211; if this is set to <cite>True</cite> a negative answer aborts the
exception by raising <a class="reference internal" href="#click.Abort" title="click.Abort"><code class="xref py py-exc docutils literal"><span class="pre">Abort</span></code></a>.</li>
<li><strong>prompt_suffix</strong> &#8211; a suffix that should be added to the prompt.</li>
<li><strong>show_default</strong> &#8211; shows or hides the default value in the prompt.</li>
<li><strong>err</strong> &#8211; if set to true the file defaults to <code class="docutils literal"><span class="pre">stderr</span></code> instead of
<code class="docutils literal"><span class="pre">stdout</span></code>, the same as with echo.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.progressbar">
<code class="descclassname">click.</code><code class="descname">progressbar</code><span class="sig-paren">(</span><em>iterable=None</em>, <em>length=None</em>, <em>label=None</em>, <em>show_eta=True</em>, <em>show_percent=None</em>, <em>show_pos=False</em>, <em>item_show_func=None</em>, <em>fill_char='#'</em>, <em>empty_char='-'</em>, <em>bar_template='%(label)s  [%(bar)s]  %(info)s'</em>, <em>info_sep='  '</em>, <em>width=36</em>, <em>file=None</em>, <em>color=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.progressbar" title="Permalink to this definition">¶</a></dt>
<dd><p>This function creates an iterable context manager that can be used
to iterate over something while showing a progress bar.  It will
either iterate over the <cite>iterable</cite> or <cite>length</cite> items (that are counted
up).  While iteration happens, this function will print a rendered
progress bar to the given <cite>file</cite> (defaults to stdout) and will attempt
to calculate remaining time and more.  By default, this progress bar
will not be rendered if the file is not a terminal.</p>
<p>The context manager creates the progress bar.  When the context
manager is entered the progress bar is already displayed.  With every
iteration over the progress bar, the iterable passed to the bar is
advanced and the bar is updated.  When the context manager exits,
a newline is printed and the progress bar is finalized on screen.</p>
<p>No printing must happen or the progress bar will be unintentionally
destroyed.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">progressbar</span><span class="p">(</span><span class="n">items</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">bar</span><span class="p">:</span>
        <span class="n">do_something_with</span><span class="p">(</span><span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>Alternatively, if no iterable is specified, one can manually update the
progress bar through the <cite>update()</cite> method instead of directly
iterating over the progress bar.  The update method accepts the number
of steps to increment the bar with:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">progressbar</span><span class="p">(</span><span class="n">length</span><span class="o">=</span><span class="n">chunks</span><span class="o">.</span><span class="n">total_bytes</span><span class="p">)</span> <span class="k">as</span> <span class="n">bar</span><span class="p">:</span>
    <span class="k">for</span> <span class="n">chunk</span> <span class="ow">in</span> <span class="n">chunks</span><span class="p">:</span>
        <span class="n">process_chunk</span><span class="p">(</span><span class="n">chunk</span><span class="p">)</span>
        <span class="n">bar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="n">chunks</span><span class="o">.</span><span class="n">bytes</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>Added the <cite>color</cite> parameter.  Added a <cite>update</cite> method to the
progressbar object.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>iterable</strong> &#8211; an iterable to iterate over.  If not provided the length
is required.</li>
<li><strong>length</strong> &#8211; the number of items to iterate over.  By default the
progressbar will attempt to ask the iterator about its
length, which might or might not work.  If an iterable is
also provided this parameter can be used to override the
length.  If an iterable is not provided the progress bar
will iterate over a range of that length.</li>
<li><strong>label</strong> &#8211; the label to show next to the progress bar.</li>
<li><strong>show_eta</strong> &#8211; enables or disables the estimated time display.  This is
automatically disabled if the length cannot be
determined.</li>
<li><strong>show_percent</strong> &#8211; enables or disables the percentage display.  The
default is <cite>True</cite> if the iterable has a length or
<cite>False</cite> if not.</li>
<li><strong>show_pos</strong> &#8211; enables or disables the absolute position display.  The
default is <cite>False</cite>.</li>
<li><strong>item_show_func</strong> &#8211; a function called with the current item which
can return a string to show the current item
next to the progress bar.  Note that the current
item can be <cite>None</cite>!</li>
<li><strong>fill_char</strong> &#8211; the character to use to show the filled part of the
progress bar.</li>
<li><strong>empty_char</strong> &#8211; the character to use to show the non-filled part of
the progress bar.</li>
<li><strong>bar_template</strong> &#8211; the format string to use as template for the bar.
The parameters in it are <code class="docutils literal"><span class="pre">label</span></code> for the label,
<code class="docutils literal"><span class="pre">bar</span></code> for the progress bar and <code class="docutils literal"><span class="pre">info</span></code> for the
info section.</li>
<li><strong>info_sep</strong> &#8211; the separator between multiple info items (eta etc.)</li>
<li><strong>width</strong> &#8211; the width of the progress bar in characters, 0 means full
terminal width</li>
<li><strong>file</strong> &#8211; the file to write to.  If this is not a terminal then
only the label is printed.</li>
<li><strong>color</strong> &#8211; controls if the terminal supports ANSI colors or not.  The
default is autodetection.  This is only needed if ANSI
codes are included anywhere in the progress bar output
which is not the case by default.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.clear">
<code class="descclassname">click.</code><code class="descname">clear</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.clear" title="Permalink to this definition">¶</a></dt>
<dd><p>Clears the terminal screen.  This will have the effect of clearing
the whole visible space of the terminal and moving the cursor to the
top left.  This does not do anything if not connected to a terminal.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="click.style">
<code class="descclassname">click.</code><code class="descname">style</code><span class="sig-paren">(</span><em>text</em>, <em>fg=None</em>, <em>bg=None</em>, <em>bold=None</em>, <em>dim=None</em>, <em>underline=None</em>, <em>blink=None</em>, <em>reverse=None</em>, <em>reset=True</em><span class="sig-paren">)</span><a class="headerlink" href="#click.style" title="Permalink to this definition">¶</a></dt>
<dd><p>Styles a text with ANSI styles and returns the new string.  By
default the styling is self contained which means that at the end
of the string a reset code is issued.  This can be prevented by
passing <code class="docutils literal"><span class="pre">reset=False</span></code>.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">))</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;ATTENTION!&#39;</span><span class="p">,</span> <span class="n">blink</span><span class="o">=</span><span class="kc">True</span><span class="p">))</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;Some things&#39;</span><span class="p">,</span> <span class="n">reverse</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;cyan&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>Supported color names:</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">black</span></code> (might be a gray)</li>
<li><code class="docutils literal"><span class="pre">red</span></code></li>
<li><code class="docutils literal"><span class="pre">green</span></code></li>
<li><code class="docutils literal"><span class="pre">yellow</span></code> (might be an orange)</li>
<li><code class="docutils literal"><span class="pre">blue</span></code></li>
<li><code class="docutils literal"><span class="pre">magenta</span></code></li>
<li><code class="docutils literal"><span class="pre">cyan</span></code></li>
<li><code class="docutils literal"><span class="pre">white</span></code> (might be light gray)</li>
<li><code class="docutils literal"><span class="pre">reset</span></code> (reset the color code only)</li>
</ul>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the string to style with ansi codes.</li>
<li><strong>fg</strong> &#8211; if provided this will become the foreground color.</li>
<li><strong>bg</strong> &#8211; if provided this will become the background color.</li>
<li><strong>bold</strong> &#8211; if provided this will enable or disable bold mode.</li>
<li><strong>dim</strong> &#8211; if provided this will enable or disable dim mode.  This is
badly supported.</li>
<li><strong>underline</strong> &#8211; if provided this will enable or disable underline.</li>
<li><strong>blink</strong> &#8211; if provided this will enable or disable blinking.</li>
<li><strong>reverse</strong> &#8211; if provided this will enable or disable inverse
rendering (foreground becomes background and the
other way round).</li>
<li><strong>reset</strong> &#8211; by default a reset-all code is added at the end of the
string which means that styles do not carry over.  This
can be disabled to compose styles.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.unstyle">
<code class="descclassname">click.</code><code class="descname">unstyle</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#click.unstyle" title="Permalink to this definition">¶</a></dt>
<dd><p>Removes ANSI styling information from a string.  Usually it&#8217;s not
necessary to use this function as Click&#8217;s echo function will
automatically remove styling if necessary.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>text</strong> &#8211; the text to remove style information from.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.secho">
<code class="descclassname">click.</code><code class="descname">secho</code><span class="sig-paren">(</span><em>text</em>, <em>file=None</em>, <em>nl=True</em>, <em>err=False</em>, <em>color=None</em>, <em>**styles</em><span class="sig-paren">)</span><a class="headerlink" href="#click.secho" title="Permalink to this definition">¶</a></dt>
<dd><p>This function combines <a class="reference internal" href="#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> and <a class="reference internal" href="#click.style" title="click.style"><code class="xref py py-func docutils literal"><span class="pre">style()</span></code></a> into one
call.  As such the following two calls are the same:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">secho</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">)</span>
<span class="n">click</span><span class="o">.</span><span class="n">echo</span><span class="p">(</span><span class="n">click</span><span class="o">.</span><span class="n">style</span><span class="p">(</span><span class="s1">&#39;Hello World!&#39;</span><span class="p">,</span> <span class="n">fg</span><span class="o">=</span><span class="s1">&#39;green&#39;</span><span class="p">))</span>
</pre></div>
</div>
<p>All keyword arguments are forwarded to the underlying functions
depending on which one they go with.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="function">
<dt id="click.edit">
<code class="descclassname">click.</code><code class="descname">edit</code><span class="sig-paren">(</span><em>text=None</em>, <em>editor=None</em>, <em>env=None</em>, <em>require_save=True</em>, <em>extension='.txt'</em>, <em>filename=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.edit" title="Permalink to this definition">¶</a></dt>
<dd><p>Edits the given text in the defined editor.  If an editor is given
(should be the full path to the executable but the regular operating
system search path is used for finding the executable) it overrides
the detected editor.  Optionally, some environment variables can be
used.  If the editor is closed without changes, <cite>None</cite> is returned.  In
case a file is edited directly the return value is always <cite>None</cite> and
<cite>require_save</cite> and <cite>extension</cite> are ignored.</p>
<p>If the editor cannot be opened a <a class="reference internal" href="#click.UsageError" title="click.UsageError"><code class="xref py py-exc docutils literal"><span class="pre">UsageError</span></code></a> is raised.</p>
<p>Note for Windows: to simplify cross-platform usage, the newlines are
automatically converted from POSIX to Windows and vice versa.  As such,
the message here will have <code class="docutils literal"><span class="pre">\n</span></code> as newline markers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text to edit.</li>
<li><strong>editor</strong> &#8211; optionally the editor to use.  Defaults to automatic
detection.</li>
<li><strong>env</strong> &#8211; environment variables to forward to the editor.</li>
<li><strong>require_save</strong> &#8211; if this is true, then not saving in the editor
will make the return value become <cite>None</cite>.</li>
<li><strong>extension</strong> &#8211; the extension to tell the editor about.  This defaults
to <cite>.txt</cite> but changing this might change syntax
highlighting.</li>
<li><strong>filename</strong> &#8211; if provided it will edit this file instead of the
provided text contents.  It will not use a temporary
file as an indirection in that case.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.launch">
<code class="descclassname">click.</code><code class="descname">launch</code><span class="sig-paren">(</span><em>url</em>, <em>wait=False</em>, <em>locate=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.launch" title="Permalink to this definition">¶</a></dt>
<dd><p>This function launches the given URL (or filename) in the default
viewer application for this file type.  If this is an executable, it
might launch the executable in a new session.  The return value is
the exit code of the launched application.  Usually, <code class="docutils literal"><span class="pre">0</span></code> indicates
success.</p>
<p>Examples:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">click</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="s1">&#39;http://click.pocoo.org/&#39;</span><span class="p">)</span>
<span class="n">click</span><span class="o">.</span><span class="n">launch</span><span class="p">(</span><span class="s1">&#39;/my/downloaded/file&#39;</span><span class="p">,</span> <span class="n">locate</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>url</strong> &#8211; URL or filename of the thing to launch.</li>
<li><strong>wait</strong> &#8211; waits for the program to stop.</li>
<li><strong>locate</strong> &#8211; if this is set to <cite>True</cite> then instead of launching the
application associated with the URL it will attempt to
launch a file manager with the file located.  This
might have weird effects if the URL does not point to
the filesystem.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.getchar">
<code class="descclassname">click.</code><code class="descname">getchar</code><span class="sig-paren">(</span><em>echo=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.getchar" title="Permalink to this definition">¶</a></dt>
<dd><p>Fetches a single character from the terminal and returns it.  This
will always return a unicode character and under certain rare
circumstances this might return more than one character.  The
situations which more than one character is returned is when for
whatever reason multiple characters end up in the terminal buffer or
standard input was not actually a terminal.</p>
<p>Note that this will always read from the terminal, even if something
is piped into the standard input.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>echo</strong> &#8211; if set to <cite>True</cite>, the character read will also show up on
the terminal.  The default is to not show it.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.pause">
<code class="descclassname">click.</code><code class="descname">pause</code><span class="sig-paren">(</span><em>info='Press any key to continue ...'</em>, <em>err=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.pause" title="Permalink to this definition">¶</a></dt>
<dd><p>This command stops execution and waits for the user to press any
key to continue.  This is similar to the Windows batch &#8220;pause&#8221;
command.  If the program is not run through a terminal, this command
will instead do nothing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>Added the <cite>err</cite> parameter.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>info</strong> &#8211; the info string to print before pausing.</li>
<li><strong>err</strong> &#8211; if set to message goes to <code class="docutils literal"><span class="pre">stderr</span></code> instead of
<code class="docutils literal"><span class="pre">stdout</span></code>, the same as with echo.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.get_terminal_size">
<code class="descclassname">click.</code><code class="descname">get_terminal_size</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.get_terminal_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current size of the terminal as tuple in the form
<code class="docutils literal"><span class="pre">(width,</span> <span class="pre">height)</span></code> in columns and rows.</p>
</dd></dl>

<dl class="function">
<dt id="click.get_binary_stream">
<code class="descclassname">click.</code><code class="descname">get_binary_stream</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#click.get_binary_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a system stream for byte processing.  This essentially
returns the stream from the sys module with the given name but it
solves some compatibility issues between different Python versions.
Primarily this function is necessary for getting binary streams on
Python 3.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; the name of the stream to open.  Valid names are <code class="docutils literal"><span class="pre">'stdin'</span></code>,
<code class="docutils literal"><span class="pre">'stdout'</span></code> and <code class="docutils literal"><span class="pre">'stderr'</span></code></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.get_text_stream">
<code class="descclassname">click.</code><code class="descname">get_text_stream</code><span class="sig-paren">(</span><em>name</em>, <em>encoding=None</em>, <em>errors='strict'</em><span class="sig-paren">)</span><a class="headerlink" href="#click.get_text_stream" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a system stream for text processing.  This usually returns
a wrapped stream around a binary stream returned from
<a class="reference internal" href="#click.get_binary_stream" title="click.get_binary_stream"><code class="xref py py-func docutils literal"><span class="pre">get_binary_stream()</span></code></a> but it also can take shortcuts on Python 3
for already correctly configured streams.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; the name of the stream to open.  Valid names are <code class="docutils literal"><span class="pre">'stdin'</span></code>,
<code class="docutils literal"><span class="pre">'stdout'</span></code> and <code class="docutils literal"><span class="pre">'stderr'</span></code></li>
<li><strong>encoding</strong> &#8211; overrides the detected default encoding.</li>
<li><strong>errors</strong> &#8211; overrides the default error mode.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.open_file">
<code class="descclassname">click.</code><code class="descname">open_file</code><span class="sig-paren">(</span><em>filename</em>, <em>mode='r'</em>, <em>encoding=None</em>, <em>errors='strict'</em>, <em>lazy=False</em>, <em>atomic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.open_file" title="Permalink to this definition">¶</a></dt>
<dd><p>This is similar to how the <a class="reference internal" href="#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> works but for manual
usage.  Files are opened non lazy by default.  This can open regular
files as well as stdin/stdout if <code class="docutils literal"><span class="pre">'-'</span></code> is passed.</p>
<p>If stdin/stdout is returned the stream is wrapped so that the context
manager will not close the stream accidentally.  This makes it possible
to always use the function like this without having to worry to
accidentally close a standard stream:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">open_file</span><span class="p">(</span><span class="n">filename</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="o">...</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; the name of the file to open (or <code class="docutils literal"><span class="pre">'-'</span></code> for stdin/stdout).</li>
<li><strong>mode</strong> &#8211; the mode in which to open the file.</li>
<li><strong>encoding</strong> &#8211; the encoding to use.</li>
<li><strong>errors</strong> &#8211; the error handling for this file.</li>
<li><strong>lazy</strong> &#8211; can be flipped to true to open the file lazily.</li>
<li><strong>atomic</strong> &#8211; in atomic mode writes go into a temporary file and it&#8217;s
moved on close.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.get_app_dir">
<code class="descclassname">click.</code><code class="descname">get_app_dir</code><span class="sig-paren">(</span><em>app_name</em>, <em>roaming=True</em>, <em>force_posix=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.get_app_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the config folder for the application.  The default behavior
is to return whatever is most appropriate for the operating system.</p>
<p>To give you an idea, for an app called <code class="docutils literal"><span class="pre">&quot;Foo</span> <span class="pre">Bar&quot;</span></code>, something like
the following folders could be returned:</p>
<dl class="docutils">
<dt>Mac OS X:</dt>
<dd><code class="docutils literal"><span class="pre">~/Library/Application</span> <span class="pre">Support/Foo</span> <span class="pre">Bar</span></code></dd>
<dt>Mac OS X (POSIX):</dt>
<dd><code class="docutils literal"><span class="pre">~/.foo-bar</span></code></dd>
<dt>Unix:</dt>
<dd><code class="docutils literal"><span class="pre">~/.config/foo-bar</span></code></dd>
<dt>Unix (POSIX):</dt>
<dd><code class="docutils literal"><span class="pre">~/.foo-bar</span></code></dd>
<dt>Win XP (roaming):</dt>
<dd><code class="docutils literal"><span class="pre">C:\Documents</span> <span class="pre">and</span> <span class="pre">Settings\&lt;user&gt;\Local</span> <span class="pre">Settings\Application</span> <span class="pre">Data\Foo</span> <span class="pre">Bar</span></code></dd>
<dt>Win XP (not roaming):</dt>
<dd><code class="docutils literal"><span class="pre">C:\Documents</span> <span class="pre">and</span> <span class="pre">Settings\&lt;user&gt;\Application</span> <span class="pre">Data\Foo</span> <span class="pre">Bar</span></code></dd>
<dt>Win 7 (roaming):</dt>
<dd><code class="docutils literal"><span class="pre">C:\Users\&lt;user&gt;\AppData\Roaming\Foo</span> <span class="pre">Bar</span></code></dd>
<dt>Win 7 (not roaming):</dt>
<dd><code class="docutils literal"><span class="pre">C:\Users\&lt;user&gt;\AppData\Local\Foo</span> <span class="pre">Bar</span></code></dd>
</dl>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>app_name</strong> &#8211; the application name.  This should be properly capitalized
and can contain whitespace.</li>
<li><strong>roaming</strong> &#8211; controls if the folder should be roaming or not on Windows.
Has no affect otherwise.</li>
<li><strong>force_posix</strong> &#8211; if this is set to <cite>True</cite> then on any POSIX system the
folder will be stored in the home folder with a leading
dot instead of the XDG config home or darwin&#8217;s
application support folder.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="click.format_filename">
<code class="descclassname">click.</code><code class="descname">format_filename</code><span class="sig-paren">(</span><em>filename</em>, <em>shorten=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.format_filename" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats a filename for user display.  The main purpose of this
function is to ensure that the filename can be displayed at all.  This
will decode the filename to unicode if necessary in a way that it will
not fail.  Optionally, it can shorten the filename to not include the
full path to the filename.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>filename</strong> &#8211; formats a filename for UI display.  This will also convert
the filename into unicode without failing.</li>
<li><strong>shorten</strong> &#8211; this optionally shortens the filename to strip of the
path that leads up to it.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="commands">
<h4>Commands<a class="headerlink" href="#commands" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.BaseCommand">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">BaseCommand</code><span class="sig-paren">(</span><em>name</em>, <em>context_settings=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BaseCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>The base command implements the minimal API contract of commands.
Most code will never use this as it does not implement a lot of useful
functionality but it can act as the direct subclass of alternative
parsing methods that do not depend on the Click parser.</p>
<p>For instance, this can be used to bridge Click and other systems like
argparse or docopt.</p>
<p>Because base commands do not implement a lot of the API that other
parts of Click take for granted, they are not supported for all
operations.  For instance, they cannot be used with the decorators
usually and they have no built-in callback system.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0: </span>Added the <cite>context_settings</cite> parameter.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; the name of the command to use unless a group overrides it.</li>
<li><strong>context_settings</strong> &#8211; an optional dictionary with defaults that are
passed to the context object.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="click.BaseCommand.allow_extra_args">
<code class="descname">allow_extra_args</code><em class="property"> = False</em><a class="headerlink" href="#click.BaseCommand.allow_extra_args" title="Permalink to this definition">¶</a></dt>
<dd><p>the default for the <a class="reference internal" href="#click.Context.allow_extra_args" title="click.Context.allow_extra_args"><code class="xref py py-attr docutils literal"><span class="pre">Context.allow_extra_args</span></code></a> flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.BaseCommand.allow_interspersed_args">
<code class="descname">allow_interspersed_args</code><em class="property"> = True</em><a class="headerlink" href="#click.BaseCommand.allow_interspersed_args" title="Permalink to this definition">¶</a></dt>
<dd><p>the default for the <a class="reference internal" href="#click.Context.allow_interspersed_args" title="click.Context.allow_interspersed_args"><code class="xref py py-attr docutils literal"><span class="pre">Context.allow_interspersed_args</span></code></a> flag.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.BaseCommand.context_settings">
<code class="descname">context_settings</code><em class="property"> = None</em><a class="headerlink" href="#click.BaseCommand.context_settings" title="Permalink to this definition">¶</a></dt>
<dd><p>an optional dictionary with defaults passed to the context.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.BaseCommand.ignore_unknown_options">
<code class="descname">ignore_unknown_options</code><em class="property"> = False</em><a class="headerlink" href="#click.BaseCommand.ignore_unknown_options" title="Permalink to this definition">¶</a></dt>
<dd><p>the default for the <a class="reference internal" href="#click.Context.ignore_unknown_options" title="click.Context.ignore_unknown_options"><code class="xref py py-attr docutils literal"><span class="pre">Context.ignore_unknown_options</span></code></a> flag.</p>
</dd></dl>

<dl class="method">
<dt id="click.BaseCommand.invoke">
<code class="descname">invoke</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BaseCommand.invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a context, this invokes the command.  The default
implementation is raising a not implemented error.</p>
</dd></dl>

<dl class="method">
<dt id="click.BaseCommand.main">
<code class="descname">main</code><span class="sig-paren">(</span><em>args=None</em>, <em>prog_name=None</em>, <em>complete_var=None</em>, <em>standalone_mode=True</em>, <em>**extra</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BaseCommand.main" title="Permalink to this definition">¶</a></dt>
<dd><p>This is the way to invoke a script with all the bells and
whistles as a command line application.  This will always terminate
the application after a call.  If this is not wanted, <code class="docutils literal"><span class="pre">SystemExit</span></code>
needs to be caught.</p>
<p>This method is also available by directly calling the instance of
a <a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a>.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>Added the <cite>standalone_mode</cite> flag to control the standalone mode.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>args</strong> &#8211; the arguments that should be used for parsing.  If not
provided, <code class="docutils literal"><span class="pre">sys.argv[1:]</span></code> is used.</li>
<li><strong>prog_name</strong> &#8211; the program name that should be used.  By default
the program name is constructed by taking the file
name from <code class="docutils literal"><span class="pre">sys.argv[0]</span></code>.</li>
<li><strong>complete_var</strong> &#8211; the environment variable that controls the
bash completion support.  The default is
<code class="docutils literal"><span class="pre">&quot;_&lt;prog_name&gt;_COMPLETE&quot;</span></code> with prog name in
uppercase.</li>
<li><strong>standalone_mode</strong> &#8211; the default behavior is to invoke the script
in standalone mode.  Click will then
handle exceptions and convert them into
error messages and the function will never
return but shut down the interpreter.  If
this is set to <cite>False</cite> they will be
propagated to the caller and the return
value of this function is the return value
of <a class="reference internal" href="#click.BaseCommand.invoke" title="click.BaseCommand.invoke"><code class="xref py py-meth docutils literal"><span class="pre">invoke()</span></code></a>.</li>
<li><strong>extra</strong> &#8211; extra keyword arguments are forwarded to the context
constructor.  See <a class="reference internal" href="#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a> for more information.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.BaseCommand.make_context">
<code class="descname">make_context</code><span class="sig-paren">(</span><em>info_name</em>, <em>args</em>, <em>parent=None</em>, <em>**extra</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BaseCommand.make_context" title="Permalink to this definition">¶</a></dt>
<dd><p>This function when given an info name and arguments will kick
off the parsing and create a new <a class="reference internal" href="#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a>.  It does not
invoke the actual command callback though.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>info_name</strong> &#8211; the info name for this invokation.  Generally this
is the most descriptive name for the script or
command.  For the toplevel script it&#8217;s usually
the name of the script, for commands below it it&#8217;s
the name of the script.</li>
<li><strong>args</strong> &#8211; the arguments to parse as list of strings.</li>
<li><strong>parent</strong> &#8211; the parent context if available.</li>
<li><strong>extra</strong> &#8211; extra keyword arguments forwarded to the context
constructor.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="click.BaseCommand.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#click.BaseCommand.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the name the command thinks it has.  Upon registering a command
on a <a class="reference internal" href="#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a> the group will default the command name
with this information.  You should instead use the
<a class="reference internal" href="#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a>&#8216;s <a class="reference internal" href="#click.Context.info_name" title="click.Context.info_name"><code class="xref py py-attr docutils literal"><span class="pre">info_name</span></code></a> attribute.</p>
</dd></dl>

<dl class="method">
<dt id="click.BaseCommand.parse_args">
<code class="descname">parse_args</code><span class="sig-paren">(</span><em>ctx</em>, <em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BaseCommand.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a context and a list of arguments this creates the parser
and parses the arguments, then modifies the context as necessary.
This is automatically invoked by <a class="reference internal" href="#click.BaseCommand.make_context" title="click.BaseCommand.make_context"><code class="xref py py-meth docutils literal"><span class="pre">make_context()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.Command">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Command</code><span class="sig-paren">(</span><em>name</em>, <em>context_settings=None</em>, <em>callback=None</em>, <em>params=None</em>, <em>help=None</em>, <em>epilog=None</em>, <em>short_help=None</em>, <em>options_metavar='[OPTIONS]'</em>, <em>add_help_option=True</em>, <em>hidden=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command" title="Permalink to this definition">¶</a></dt>
<dd><p>Commands are the basic building block of command line interfaces in
Click.  A basic command handles command line parsing and might dispatch
more parsing to commands nested below it.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0: </span>Added the <cite>context_settings</cite> parameter.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>name</strong> &#8211; the name of the command to use unless a group overrides it.</li>
<li><strong>context_settings</strong> &#8211; an optional dictionary with defaults that are
passed to the context object.</li>
<li><strong>callback</strong> &#8211; the callback to invoke.  This is optional.</li>
<li><strong>params</strong> &#8211; the parameters to register with this command.  This can
be either <a class="reference internal" href="#click.Option" title="click.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a> or <a class="reference internal" href="#click.Argument" title="click.Argument"><code class="xref py py-class docutils literal"><span class="pre">Argument</span></code></a> objects.</li>
<li><strong>help</strong> &#8211; the help string to use for this command.</li>
<li><strong>epilog</strong> &#8211; like the help string but it&#8217;s printed at the end of the
help page after everything else.</li>
<li><strong>short_help</strong> &#8211; the short help to use for this command.  This is
shown on the command listing of the parent command.</li>
<li><strong>add_help_option</strong> &#8211; by default each command registers a <code class="docutils literal"><span class="pre">--help</span></code>
option.  This can be disabled by this parameter.</li>
<li><strong>hidden</strong> &#8211; hide this command from help outputs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="attribute">
<dt id="click.Command.callback">
<code class="descname">callback</code><em class="property"> = None</em><a class="headerlink" href="#click.Command.callback" title="Permalink to this definition">¶</a></dt>
<dd><p>the callback to execute when the command fires.  This might be
<cite>None</cite> in which case nothing happens.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.collect_usage_pieces">
<code class="descname">collect_usage_pieces</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.collect_usage_pieces" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns all the pieces that go into the usage line and returns
it as a list of strings.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.format_epilog">
<code class="descname">format_epilog</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.format_epilog" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the epilog into the formatter if it exists.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.format_help">
<code class="descname">format_help</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.format_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the help into the formatter if it exists.</p>
<p>This calls into the following methods:</p>
<ul class="simple">
<li><a class="reference internal" href="#click.Command.format_usage" title="click.Command.format_usage"><code class="xref py py-meth docutils literal"><span class="pre">format_usage()</span></code></a></li>
<li><a class="reference internal" href="#click.Command.format_help_text" title="click.Command.format_help_text"><code class="xref py py-meth docutils literal"><span class="pre">format_help_text()</span></code></a></li>
<li><a class="reference internal" href="#click.Command.format_options" title="click.Command.format_options"><code class="xref py py-meth docutils literal"><span class="pre">format_options()</span></code></a></li>
<li><a class="reference internal" href="#click.Command.format_epilog" title="click.Command.format_epilog"><code class="xref py py-meth docutils literal"><span class="pre">format_epilog()</span></code></a></li>
</ul>
</dd></dl>

<dl class="method">
<dt id="click.Command.format_help_text">
<code class="descname">format_help_text</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.format_help_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the help text to the formatter if it exists.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.format_options">
<code class="descname">format_options</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.format_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes all the options into the formatter if they exist.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.format_usage">
<code class="descname">format_usage</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.format_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes the usage line into the formatter.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.get_help">
<code class="descname">get_help</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.get_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Formats the help into a string and returns it.  This creates a
formatter and will call into the following formatting methods:</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.get_help_option">
<code class="descname">get_help_option</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.get_help_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the help option object.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.get_help_option_names">
<code class="descname">get_help_option_names</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.get_help_option_names" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the names for the help option.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.invoke">
<code class="descname">invoke</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a context, this invokes the attached callback (if it exists)
in the right way.</p>
</dd></dl>

<dl class="method">
<dt id="click.Command.make_parser">
<code class="descname">make_parser</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Command.make_parser" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the underlying option parser for this command.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Command.params">
<code class="descname">params</code><em class="property"> = None</em><a class="headerlink" href="#click.Command.params" title="Permalink to this definition">¶</a></dt>
<dd><p>the list of parameters for this command in the order they
should show up in the help page and execute.  Eager parameters
will automatically be handled before non eager ones.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.MultiCommand">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">MultiCommand</code><span class="sig-paren">(</span><em>name=None</em>, <em>invoke_without_command=False</em>, <em>no_args_is_help=None</em>, <em>subcommand_metavar=None</em>, <em>chain=False</em>, <em>result_callback=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.MultiCommand" title="Permalink to this definition">¶</a></dt>
<dd><p>A multi command is the basic implementation of a command that
dispatches to subcommands.  The most common version is the
<a class="reference internal" href="#click.Group" title="click.Group"><code class="xref py py-class docutils literal"><span class="pre">Group</span></code></a>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>invoke_without_command</strong> &#8211; this controls how the multi command itself
is invoked.  By default it&#8217;s only invoked
if a subcommand is provided.</li>
<li><strong>no_args_is_help</strong> &#8211; this controls what happens if no arguments are
provided.  This option is enabled by default if
<cite>invoke_without_command</cite> is disabled or disabled
if it&#8217;s enabled.  If enabled this will add
<code class="docutils literal"><span class="pre">--help</span></code> as argument if no arguments are
passed.</li>
<li><strong>subcommand_metavar</strong> &#8211; the string that is used in the documentation
to indicate the subcommand place.</li>
<li><strong>chain</strong> &#8211; if this is set to <cite>True</cite> chaining of multiple subcommands
is enabled.  This restricts the form of commands in that
they cannot have optional arguments but it allows
multiple commands to be chained together.</li>
<li><strong>result_callback</strong> &#8211; the result callback to attach to this multi
command.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.MultiCommand.format_commands">
<code class="descname">format_commands</code><span class="sig-paren">(</span><em>ctx</em>, <em>formatter</em><span class="sig-paren">)</span><a class="headerlink" href="#click.MultiCommand.format_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Extra format methods for multi methods that adds all the commands
after the options.</p>
</dd></dl>

<dl class="method">
<dt id="click.MultiCommand.get_command">
<code class="descname">get_command</code><span class="sig-paren">(</span><em>ctx</em>, <em>cmd_name</em><span class="sig-paren">)</span><a class="headerlink" href="#click.MultiCommand.get_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a context and a command name, this returns a
<a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> object if it exists or returns <cite>None</cite>.</p>
</dd></dl>

<dl class="method">
<dt id="click.MultiCommand.list_commands">
<code class="descname">list_commands</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.MultiCommand.list_commands" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns a list of subcommand names in the order they should
appear.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.MultiCommand.result_callback">
<code class="descname">result_callback</code><em class="property"> = None</em><a class="headerlink" href="#click.MultiCommand.result_callback" title="Permalink to this definition">¶</a></dt>
<dd><p>The result callback that is stored.  This can be set or
overridden with the <a class="reference internal" href="#click.MultiCommand.resultcallback" title="click.MultiCommand.resultcallback"><code class="xref py py-func docutils literal"><span class="pre">resultcallback()</span></code></a> decorator.</p>
</dd></dl>

<dl class="method">
<dt id="click.MultiCommand.resultcallback">
<code class="descname">resultcallback</code><span class="sig-paren">(</span><em>replace=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.MultiCommand.resultcallback" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a result callback to the chain command.  By default if a
result callback is already registered this will chain them but
this can be disabled with the <cite>replace</cite> parameter.  The result
callback is invoked with the return value of the subcommand
(or the list of return values from all subcommands if chaining
is enabled) as well as the parameters as they would be passed
to the main callback.</p>
<p>Example:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@click</span><span class="o">.</span><span class="n">group</span><span class="p">()</span>
<span class="nd">@click</span><span class="o">.</span><span class="n">option</span><span class="p">(</span><span class="s1">&#39;-i&#39;</span><span class="p">,</span> <span class="s1">&#39;--input&#39;</span><span class="p">,</span> <span class="n">default</span><span class="o">=</span><span class="mi">23</span><span class="p">)</span>
<span class="k">def</span> <span class="nf">cli</span><span class="p">(</span><span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="mi">42</span>

<span class="nd">@cli</span><span class="o">.</span><span class="n">resultcallback</span><span class="p">()</span>
<span class="k">def</span> <span class="nf">process_result</span><span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="nb">input</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">result</span> <span class="o">+</span> <span class="nb">input</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>replace</strong> &#8211; if set to <cite>True</cite> an already existing result
callback will be removed.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.Group">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Group</code><span class="sig-paren">(</span><em>name=None</em>, <em>commands=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Group" title="Permalink to this definition">¶</a></dt>
<dd><p>A group allows a command to have subcommands attached.  This is the
most common way to implement nesting in Click.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>commands</strong> &#8211; a dictionary of commands.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.Group.add_command">
<code class="descname">add_command</code><span class="sig-paren">(</span><em>cmd</em>, <em>name=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Group.add_command" title="Permalink to this definition">¶</a></dt>
<dd><p>Registers another <a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> with this group.  If the name
is not provided, the name of the command is used.</p>
</dd></dl>

<dl class="method">
<dt id="click.Group.command">
<code class="descname">command</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Group.command" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut decorator for declaring and attaching a command to
the group.  This takes the same arguments as <a class="reference internal" href="#click.command" title="click.command"><code class="xref py py-func docutils literal"><span class="pre">command()</span></code></a> but
immediately registers the created command with this instance by
calling into <a class="reference internal" href="#click.Group.add_command" title="click.Group.add_command"><code class="xref py py-meth docutils literal"><span class="pre">add_command()</span></code></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Group.commands">
<code class="descname">commands</code><em class="property"> = None</em><a class="headerlink" href="#click.Group.commands" title="Permalink to this definition">¶</a></dt>
<dd><p>the registered subcommands by their exported names.</p>
</dd></dl>

<dl class="method">
<dt id="click.Group.group">
<code class="descname">group</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Group.group" title="Permalink to this definition">¶</a></dt>
<dd><p>A shortcut decorator for declaring and attaching a group to
the group.  This takes the same arguments as <a class="reference internal" href="#click.group" title="click.group"><code class="xref py py-func docutils literal"><span class="pre">group()</span></code></a> but
immediately registers the created command with this instance by
calling into <a class="reference internal" href="#click.Group.add_command" title="click.Group.add_command"><code class="xref py py-meth docutils literal"><span class="pre">add_command()</span></code></a>.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.CommandCollection">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">CommandCollection</code><span class="sig-paren">(</span><em>name=None</em>, <em>sources=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.CommandCollection" title="Permalink to this definition">¶</a></dt>
<dd><p>A command collection is a multi command that merges multiple multi
commands together into one.  This is a straightforward implementation
that accepts a list of different multi commands as sources and
provides all the commands for each of them.</p>
<dl class="method">
<dt id="click.CommandCollection.add_source">
<code class="descname">add_source</code><span class="sig-paren">(</span><em>multi_cmd</em><span class="sig-paren">)</span><a class="headerlink" href="#click.CommandCollection.add_source" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new multi command to the chain dispatcher.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.CommandCollection.sources">
<code class="descname">sources</code><em class="property"> = None</em><a class="headerlink" href="#click.CommandCollection.sources" title="Permalink to this definition">¶</a></dt>
<dd><p>The list of registered multi commands.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="parameters">
<h4>Parameters<a class="headerlink" href="#parameters" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.Parameter">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Parameter</code><span class="sig-paren">(</span><em>param_decls=None</em>, <em>type=None</em>, <em>required=False</em>, <em>default=None</em>, <em>callback=None</em>, <em>nargs=None</em>, <em>metavar=None</em>, <em>expose_value=True</em>, <em>is_eager=False</em>, <em>envvar=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Parameter" title="Permalink to this definition">¶</a></dt>
<dd><p>A parameter to a command comes in two versions: they are either
<a class="reference internal" href="#click.Option" title="click.Option"><code class="xref py py-class docutils literal"><span class="pre">Option</span></code></a>s or <a class="reference internal" href="#click.Argument" title="click.Argument"><code class="xref py py-class docutils literal"><span class="pre">Argument</span></code></a>s.  Other subclasses are currently
not supported by design as some of the internals for parsing are
intentionally not finalized.</p>
<p>Some settings are supported by both options and arguments.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 2.0: </span>Changed signature for parameter callback to also be passed the
parameter.  In Click 2.0, the old callback format will still work,
but it will raise a warning to give you change to migrate the
code easier.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>param_decls</strong> &#8211; the parameter declarations for this option or
argument.  This is a list of flags or argument
names.</li>
<li><strong>type</strong> &#8211; the type that should be used.  Either a <a class="reference internal" href="#click.ParamType" title="click.ParamType"><code class="xref py py-class docutils literal"><span class="pre">ParamType</span></code></a>
or a Python type.  The later is converted into the former
automatically if supported.</li>
<li><strong>required</strong> &#8211; controls if this is optional or not.</li>
<li><strong>default</strong> &#8211; the default value if omitted.  This can also be a callable,
in which case it&#8217;s invoked when the default is needed
without any arguments.</li>
<li><strong>callback</strong> &#8211; a callback that should be executed after the parameter
was matched.  This is called as <code class="docutils literal"><span class="pre">fn(ctx,</span> <span class="pre">param,</span>
<span class="pre">value)</span></code> and needs to return the value.  Before Click
2.0, the signature was <code class="docutils literal"><span class="pre">(ctx,</span> <span class="pre">value)</span></code>.</li>
<li><strong>nargs</strong> &#8211; the number of arguments to match.  If not <code class="docutils literal"><span class="pre">1</span></code> the return
value is a tuple instead of single value.  The default for
nargs is <code class="docutils literal"><span class="pre">1</span></code> (except if the type is a tuple, then it&#8217;s
the arity of the tuple).</li>
<li><strong>metavar</strong> &#8211; how the value is represented in the help page.</li>
<li><strong>expose_value</strong> &#8211; if this is <cite>True</cite> then the value is passed onwards
to the command callback and stored on the context,
otherwise it&#8217;s skipped.</li>
<li><strong>is_eager</strong> &#8211; eager values are processed before non eager ones.  This
should not be set for arguments or it will inverse the
order of processing.</li>
<li><strong>envvar</strong> &#8211; a string or list of strings that are environment variables
that should be checked.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.Parameter.get_default">
<code class="descname">get_default</code><span class="sig-paren">(</span><em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Parameter.get_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a context variable this calculates the default value.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Parameter.human_readable_name">
<code class="descname">human_readable_name</code><a class="headerlink" href="#click.Parameter.human_readable_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the human readable name of this parameter.  This is the
same as the name for options, but the metavar for arguments.</p>
</dd></dl>

<dl class="method">
<dt id="click.Parameter.process_value">
<code class="descname">process_value</code><span class="sig-paren">(</span><em>ctx</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Parameter.process_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value and context this runs the logic to convert the
value as necessary.</p>
</dd></dl>

<dl class="method">
<dt id="click.Parameter.type_cast_value">
<code class="descname">type_cast_value</code><span class="sig-paren">(</span><em>ctx</em>, <em>value</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Parameter.type_cast_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value this runs it properly through the type system.
This automatically handles things like <cite>nargs</cite> and <cite>multiple</cite> as
well as composite types.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.Option">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Option</code><span class="sig-paren">(</span><em>param_decls=None</em>, <em>show_default=False</em>, <em>prompt=False</em>, <em>confirmation_prompt=False</em>, <em>hide_input=False</em>, <em>is_flag=None</em>, <em>flag_value=None</em>, <em>multiple=False</em>, <em>count=False</em>, <em>allow_from_autoenv=True</em>, <em>type=None</em>, <em>help=None</em>, <em>hidden=False</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Option" title="Permalink to this definition">¶</a></dt>
<dd><p>Options are usually optional values on the command line and
have some extra features that arguments don&#8217;t have.</p>
<p>All other parameters are passed onwards to the parameter constructor.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>show_default</strong> &#8211; controls if the default value should be shown on the
help page.  Normally, defaults are not shown.</li>
<li><strong>prompt</strong> &#8211; if set to <cite>True</cite> or a non empty string then the user will
be prompted for input if not set.  If set to <cite>True</cite> the
prompt will be the option name capitalized.</li>
<li><strong>confirmation_prompt</strong> &#8211; if set then the value will need to be confirmed
if it was prompted for.</li>
<li><strong>hide_input</strong> &#8211; if this is <cite>True</cite> then the input on the prompt will be
hidden from the user.  This is useful for password
input.</li>
<li><strong>is_flag</strong> &#8211; forces this option to act as a flag.  The default is
auto detection.</li>
<li><strong>flag_value</strong> &#8211; which value should be used for this flag if it&#8217;s
enabled.  This is set to a boolean automatically if
the option string contains a slash to mark two options.</li>
<li><strong>multiple</strong> &#8211; if this is set to <cite>True</cite> then the argument is accepted
multiple times and recorded.  This is similar to <code class="docutils literal"><span class="pre">nargs</span></code>
in how it works but supports arbitrary number of
arguments.</li>
<li><strong>count</strong> &#8211; this flag makes an option increment an integer.</li>
<li><strong>allow_from_autoenv</strong> &#8211; if this is enabled then the value of this
parameter will be pulled from an environment
variable in case a prefix is defined on the
context.</li>
<li><strong>help</strong> &#8211; the help string.</li>
<li><strong>hidden</strong> &#8211; hide this option from help outputs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="click.Argument">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Argument</code><span class="sig-paren">(</span><em>param_decls</em>, <em>required=None</em>, <em>**attrs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Arguments are positional parameters to a command.  They generally
provide fewer features than options but can have infinite <code class="docutils literal"><span class="pre">nargs</span></code>
and are required by default.</p>
<p>All parameters are passed onwards to the parameter constructor.</p>
</dd></dl>

</div>
<div class="section" id="context">
<h4>Context<a class="headerlink" href="#context" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.Context">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Context</code><span class="sig-paren">(</span><em>command</em>, <em>parent=None</em>, <em>info_name=None</em>, <em>obj=None</em>, <em>auto_envvar_prefix=None</em>, <em>default_map=None</em>, <em>terminal_width=None</em>, <em>max_content_width=None</em>, <em>resilient_parsing=False</em>, <em>allow_extra_args=None</em>, <em>allow_interspersed_args=None</em>, <em>ignore_unknown_options=None</em>, <em>help_option_names=None</em>, <em>token_normalize_func=None</em>, <em>color=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context" title="Permalink to this definition">¶</a></dt>
<dd><p>The context is a special internal object that holds state relevant
for the script execution at every single level.  It&#8217;s normally invisible
to commands unless they opt-in to getting access to it.</p>
<p>The context is useful as it can pass internal objects around and can
control special execution features such as reading data from
environment variables.</p>
<p>A context can be used as context manager in which case it will call
<a class="reference internal" href="#click.Context.close" title="click.Context.close"><code class="xref py py-meth docutils literal"><span class="pre">close()</span></code></a> on teardown.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0: </span>Added the <cite>resilient_parsing</cite>, <cite>help_option_names</cite>,
<cite>token_normalize_func</cite> parameters.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>Added the <cite>allow_extra_args</cite> and <cite>allow_interspersed_args</cite>
parameters.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>Added the <cite>color</cite>, <cite>ignore_unknown_options</cite>, and
<cite>max_content_width</cite> parameters.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>command</strong> &#8211; the command class for this context.</li>
<li><strong>parent</strong> &#8211; the parent context.</li>
<li><strong>info_name</strong> &#8211; the info name for this invocation.  Generally this
is the most descriptive name for the script or
command.  For the toplevel script it is usually
the name of the script, for commands below it it&#8217;s
the name of the script.</li>
<li><strong>obj</strong> &#8211; an arbitrary object of user data.</li>
<li><strong>auto_envvar_prefix</strong> &#8211; the prefix to use for automatic environment
variables.  If this is <cite>None</cite> then reading
from environment variables is disabled.  This
does not affect manually set environment
variables which are always read.</li>
<li><strong>default_map</strong> &#8211; a dictionary (like object) with default values
for parameters.</li>
<li><strong>terminal_width</strong> &#8211; the width of the terminal.  The default is
inherit from parent context.  If no context
defines the terminal width then auto
detection will be applied.</li>
<li><strong>max_content_width</strong> &#8211; the maximum width for content rendered by
Click (this currently only affects help
pages).  This defaults to 80 characters if
not overridden.  In other words: even if the
terminal is larger than that, Click will not
format things wider than 80 characters by
default.  In addition to that, formatters might
add some safety mapping on the right.</li>
<li><strong>resilient_parsing</strong> &#8211; if this flag is enabled then Click will
parse without any interactivity or callback
invocation.  This is useful for implementing
things such as completion support.</li>
<li><strong>allow_extra_args</strong> &#8211; if this is set to <cite>True</cite> then extra arguments
at the end will not raise an error and will be
kept on the context.  The default is to inherit
from the command.</li>
<li><strong>allow_interspersed_args</strong> &#8211; if this is set to <cite>False</cite> then options
and arguments cannot be mixed.  The
default is to inherit from the command.</li>
<li><strong>ignore_unknown_options</strong> &#8211; instructs click to ignore options it does
not know and keeps them for later
processing.</li>
<li><strong>help_option_names</strong> &#8211; optionally a list of strings that define how
the default help parameter is named.  The
default is <code class="docutils literal"><span class="pre">['--help']</span></code>.</li>
<li><strong>token_normalize_func</strong> &#8211; an optional function that is used to
normalize tokens (options, choices,
etc.).  This for instance can be used to
implement case insensitive behavior.</li>
<li><strong>color</strong> &#8211; controls if the terminal supports ANSI colors or not.  The
default is autodetection.  This is only needed if ANSI
codes are used in texts that Click prints which is by
default not the case.  This for instance would affect
help output.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.Context.abort">
<code class="descname">abort</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.abort" title="Permalink to this definition">¶</a></dt>
<dd><p>Aborts the script.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.allow_extra_args">
<code class="descname">allow_extra_args</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.allow_extra_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the context allows extra args or if it should
fail on parsing.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.allow_interspersed_args">
<code class="descname">allow_interspersed_args</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.allow_interspersed_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if the context allows mixing of arguments and
options or not.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.args">
<code class="descname">args</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.args" title="Permalink to this definition">¶</a></dt>
<dd><p>the leftover arguments.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.call_on_close">
<code class="descname">call_on_close</code><span class="sig-paren">(</span><em>f</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.call_on_close" title="Permalink to this definition">¶</a></dt>
<dd><p>This decorator remembers a function as callback that should be
executed when the context tears down.  This is most useful to bind
resource handling to the script execution.  For instance, file objects
opened by the <a class="reference internal" href="#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> type will register their close callbacks
here.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>f</strong> &#8211; the function to execute on teardown.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.Context.close">
<code class="descname">close</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.close" title="Permalink to this definition">¶</a></dt>
<dd><p>Invokes all close callbacks.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.color">
<code class="descname">color</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.color" title="Permalink to this definition">¶</a></dt>
<dd><p>Controls if styling output is wanted or not.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.command">
<code class="descname">command</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.command" title="Permalink to this definition">¶</a></dt>
<dd><p>the <a class="reference internal" href="#click.Command" title="click.Command"><code class="xref py py-class docutils literal"><span class="pre">Command</span></code></a> for this context.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.command_path">
<code class="descname">command_path</code><a class="headerlink" href="#click.Context.command_path" title="Permalink to this definition">¶</a></dt>
<dd><p>The computed command path.  This is used for the <code class="docutils literal"><span class="pre">usage</span></code>
information on the help page.  It&#8217;s automatically created by
combining the info names of the chain of contexts to the root.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.ensure_object">
<code class="descname">ensure_object</code><span class="sig-paren">(</span><em>object_type</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.ensure_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Like <a class="reference internal" href="#click.Context.find_object" title="click.Context.find_object"><code class="xref py py-meth docutils literal"><span class="pre">find_object()</span></code></a> but sets the innermost object to a
new instance of <cite>object_type</cite> if it does not exist.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.exit">
<code class="descname">exit</code><span class="sig-paren">(</span><em>code=0</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.exit" title="Permalink to this definition">¶</a></dt>
<dd><p>Exits the application with a given exit code.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.fail">
<code class="descname">fail</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.fail" title="Permalink to this definition">¶</a></dt>
<dd><p>Aborts the execution of the program with a specific error
message.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>message</strong> &#8211; the error message to fail with.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.Context.find_object">
<code class="descname">find_object</code><span class="sig-paren">(</span><em>object_type</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.find_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the closest object of a given type.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.find_root">
<code class="descname">find_root</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.find_root" title="Permalink to this definition">¶</a></dt>
<dd><p>Finds the outermost context.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.forward">
<code class="descname">forward</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.forward" title="Permalink to this definition">¶</a></dt>
<dd><p>Similar to <a class="reference internal" href="#click.Context.invoke" title="click.Context.invoke"><code class="xref py py-meth docutils literal"><span class="pre">invoke()</span></code></a> but fills in default keyword
arguments from the current context if the other command expects
it.  This cannot invoke callbacks directly, only other commands.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.get_help">
<code class="descname">get_help</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.get_help" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get formatted help page for the current
context and command.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.get_usage">
<code class="descname">get_usage</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.get_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to get formatted usage string for the current
context and command.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.help_option_names">
<code class="descname">help_option_names</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.help_option_names" title="Permalink to this definition">¶</a></dt>
<dd><p>The names for the help options.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.ignore_unknown_options">
<code class="descname">ignore_unknown_options</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.ignore_unknown_options" title="Permalink to this definition">¶</a></dt>
<dd><p>Instructs click to ignore options that a command does not
understand and will store it on the context for later
processing.  This is primarily useful for situations where you
want to call into external programs.  Generally this pattern is
strongly discouraged because it&#8217;s not possibly to losslessly
forward all arguments.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.info_name">
<code class="descname">info_name</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.info_name" title="Permalink to this definition">¶</a></dt>
<dd><p>the descriptive information name</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.invoke">
<code class="descname">invoke</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Invokes a command callback in exactly the way it expects.  There
are two ways to invoke this method:</p>
<ol class="arabic simple">
<li>the first argument can be a callback and all other arguments and
keyword arguments are forwarded directly to the function.</li>
<li>the first argument is a click command object.  In that case all
arguments are forwarded as well but proper click parameters
(options and click arguments) must be keyword arguments and Click
will fill in defaults.</li>
</ol>
<p>Note that before Click 3.2 keyword arguments were not properly filled
in against the intention of this code and no context was created.  For
more information about this change and why it was done in a bugfix
release see <a class="reference internal" href="index.html#upgrade-to-3-2"><span class="std std-ref">Upgrading to 3.2</span></a>.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.invoked_subcommand">
<code class="descname">invoked_subcommand</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.invoked_subcommand" title="Permalink to this definition">¶</a></dt>
<dd><p>This flag indicates if a subcommand is going to be executed. A
group callback can use this information to figure out if it&#8217;s
being executed directly or because the execution flow passes
onwards to a subcommand. By default it&#8217;s None, but it can be
the name of the subcommand to execute.</p>
<p>If chaining is enabled this will be set to <code class="docutils literal"><span class="pre">'*'</span></code> in case
any commands are executed.  It is however not possible to
figure out which ones.  If you require this knowledge you
should use a <code class="xref py py-func docutils literal"><span class="pre">resultcallback()</span></code>.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.lookup_default">
<code class="descname">lookup_default</code><span class="sig-paren">(</span><em>name</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.lookup_default" title="Permalink to this definition">¶</a></dt>
<dd><p>Looks up the default for a parameter name.  This by default
looks into the <code class="xref py py-attr docutils literal"><span class="pre">default_map</span></code> if available.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.make_formatter">
<code class="descname">make_formatter</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.make_formatter" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the formatter for the help and usage output.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.max_content_width">
<code class="descname">max_content_width</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.max_content_width" title="Permalink to this definition">¶</a></dt>
<dd><p>The maximum width of formatted content (None implies a sensible
default which is 80 for most things).</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.meta">
<code class="descname">meta</code><a class="headerlink" href="#click.Context.meta" title="Permalink to this definition">¶</a></dt>
<dd><p>This is a dictionary which is shared with all the contexts
that are nested.  It exists so that click utiltiies can store some
state here if they need to.  It is however the responsibility of
that code to manage this dictionary well.</p>
<p>The keys are supposed to be unique dotted strings.  For instance
module paths are a good choice for it.  What is stored in there is
irrelevant for the operation of click.  However what is important is
that code that places data here adheres to the general semantics of
the system.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">LANG_KEY</span> <span class="o">=</span> <span class="n">__name__</span> <span class="o">+</span> <span class="s1">&#39;.lang&#39;</span>

<span class="k">def</span> <span class="nf">set_language</span><span class="p">(</span><span class="n">value</span><span class="p">):</span>
    <span class="n">ctx</span> <span class="o">=</span> <span class="n">get_current_context</span><span class="p">()</span>
    <span class="n">ctx</span><span class="o">.</span><span class="n">meta</span><span class="p">[</span><span class="n">LANG_KEY</span><span class="p">]</span> <span class="o">=</span> <span class="n">value</span>

<span class="k">def</span> <span class="nf">get_language</span><span class="p">():</span>
    <span class="k">return</span> <span class="n">get_current_context</span><span class="p">()</span><span class="o">.</span><span class="n">meta</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">LANG_KEY</span><span class="p">,</span> <span class="s1">&#39;en_US&#39;</span><span class="p">)</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.obj">
<code class="descname">obj</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.obj" title="Permalink to this definition">¶</a></dt>
<dd><p>the user object stored.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.params">
<code class="descname">params</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.params" title="Permalink to this definition">¶</a></dt>
<dd><p>the parsed parameters except if the value is hidden in which
case it&#8217;s not remembered.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.parent">
<code class="descname">parent</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.parent" title="Permalink to this definition">¶</a></dt>
<dd><p>the parent context or <cite>None</cite> if none exists.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.protected_args">
<code class="descname">protected_args</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.protected_args" title="Permalink to this definition">¶</a></dt>
<dd><p>protected arguments.  These are arguments that are prepended
to <cite>args</cite> when certain parsing scenarios are encountered but
must be never propagated to another arguments.  This is used
to implement nested parsing.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.resilient_parsing">
<code class="descname">resilient_parsing</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.resilient_parsing" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicates if resilient parsing is enabled.  In that case Click
will do its best to not cause any failures.</p>
</dd></dl>

<dl class="method">
<dt id="click.Context.scope">
<code class="descname">scope</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Context.scope" title="Permalink to this definition">¶</a></dt>
<dd><p>This helper method can be used with the context object to promote
it to the current thread local (see <a class="reference internal" href="#click.get_current_context" title="click.get_current_context"><code class="xref py py-func docutils literal"><span class="pre">get_current_context()</span></code></a>).
The default behavior of this is to invoke the cleanup functions which
can be disabled by setting <cite>cleanup</cite> to <cite>False</cite>.  The cleanup
functions are typically used for things such as closing file handles.</p>
<p>If the cleanup is intended the context object can also be directly
used as a context manager.</p>
<p>Example usage:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ctx</span><span class="o">.</span><span class="n">scope</span><span class="p">():</span>
    <span class="k">assert</span> <span class="n">get_current_context</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ctx</span>
</pre></div>
</div>
<p>This is equivalent:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="k">with</span> <span class="n">ctx</span><span class="p">:</span>
    <span class="k">assert</span> <span class="n">get_current_context</span><span class="p">()</span> <span class="ow">is</span> <span class="n">ctx</span>
</pre></div>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>cleanup</strong> &#8211; controls if the cleanup functions should be run or
not.  The default is to run these functions.  In
some situations the context only wants to be
temporarily pushed in which case this can be disabled.
Nested pushes automatically defer the cleanup.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.terminal_width">
<code class="descname">terminal_width</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.terminal_width" title="Permalink to this definition">¶</a></dt>
<dd><p>The width of the terminal (None is autodetection).</p>
</dd></dl>

<dl class="attribute">
<dt id="click.Context.token_normalize_func">
<code class="descname">token_normalize_func</code><em class="property"> = None</em><a class="headerlink" href="#click.Context.token_normalize_func" title="Permalink to this definition">¶</a></dt>
<dd><p>An optional normalization function for tokens.  This is
options, choices, commands etc.</p>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="click.get_current_context">
<code class="descclassname">click.</code><code class="descname">get_current_context</code><span class="sig-paren">(</span><em>silent=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.get_current_context" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the current click context.  This can be used as a way to
access the current context object from anywhere.  This is a more implicit
alternative to the <a class="reference internal" href="#click.pass_context" title="click.pass_context"><code class="xref py py-func docutils literal"><span class="pre">pass_context()</span></code></a> decorator.  This function is
primarily useful for helpers such as <a class="reference internal" href="#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a> which might be
interested in changing it&#8217;s behavior based on the current context.</p>
<p>To push the current context, <a class="reference internal" href="#click.Context.scope" title="click.Context.scope"><code class="xref py py-meth docutils literal"><span class="pre">Context.scope()</span></code></a> can be used.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 5.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>silent</strong> &#8211; is set to <cite>True</cite> the return value is <cite>None</cite> if no context
is available.  The default behavior is to raise a
<a class="reference external" href="http://docs.python.org/dev/library/exceptions.html#RuntimeError" title="(in Python v3.6)"><code class="xref py py-exc docutils literal"><span class="pre">RuntimeError</span></code></a>.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="types">
<h4>Types<a class="headerlink" href="#types" title="Permalink to this headline">¶</a></h4>
<dl class="data">
<dt id="click.STRING">
<code class="descclassname">click.</code><code class="descname">STRING</code><em class="property"> = STRING</em><a class="headerlink" href="#click.STRING" title="Permalink to this definition">¶</a></dt>
<dd><p>A unicode string parameter type which is the implicit default.  This
can also be selected by using <code class="docutils literal"><span class="pre">str</span></code> as type.</p>
</dd></dl>

<dl class="data">
<dt id="click.INT">
<code class="descclassname">click.</code><code class="descname">INT</code><em class="property"> = INT</em><a class="headerlink" href="#click.INT" title="Permalink to this definition">¶</a></dt>
<dd><p>An integer parameter.  This can also be selected by using <code class="docutils literal"><span class="pre">int</span></code> as
type.</p>
</dd></dl>

<dl class="data">
<dt id="click.FLOAT">
<code class="descclassname">click.</code><code class="descname">FLOAT</code><em class="property"> = FLOAT</em><a class="headerlink" href="#click.FLOAT" title="Permalink to this definition">¶</a></dt>
<dd><p>A floating point value parameter.  This can also be selected by using
<code class="docutils literal"><span class="pre">float</span></code> as type.</p>
</dd></dl>

<dl class="data">
<dt id="click.BOOL">
<code class="descclassname">click.</code><code class="descname">BOOL</code><em class="property"> = BOOL</em><a class="headerlink" href="#click.BOOL" title="Permalink to this definition">¶</a></dt>
<dd><p>A boolean parameter.  This is the default for boolean flags.  This can
also be selected by using <code class="docutils literal"><span class="pre">bool</span></code> as a type.</p>
</dd></dl>

<dl class="data">
<dt id="click.UUID">
<code class="descclassname">click.</code><code class="descname">UUID</code><em class="property"> = UUID</em><a class="headerlink" href="#click.UUID" title="Permalink to this definition">¶</a></dt>
<dd><p>A UUID parameter.</p>
</dd></dl>

<dl class="data">
<dt id="click.UNPROCESSED">
<code class="descclassname">click.</code><code class="descname">UNPROCESSED</code><em class="property"> = UNPROCESSED</em><a class="headerlink" href="#click.UNPROCESSED" title="Permalink to this definition">¶</a></dt>
<dd><p>A dummy parameter type that just does nothing.  From a user&#8217;s
perspective this appears to just be the same as <cite>STRING</cite> but internally
no string conversion takes place.  This is necessary to achieve the
same bytes/unicode behavior on Python 2/3 in situations where you want
to not convert argument types.  This is usually useful when working
with file paths as they can appear in bytes and unicode.</p>
<p>For path related uses the <a class="reference internal" href="#click.Path" title="click.Path"><code class="xref py py-class docutils literal"><span class="pre">Path</span></code></a> type is a better choice but
there are situations where an unprocessed type is useful which is why
it is is provided.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0.</span></p>
</div>
</dd></dl>

<dl class="class">
<dt id="click.File">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">File</code><span class="sig-paren">(</span><em>mode='r'</em>, <em>encoding=None</em>, <em>errors='strict'</em>, <em>lazy=None</em>, <em>atomic=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.File" title="Permalink to this definition">¶</a></dt>
<dd><p>Declares a parameter to be a file for reading or writing.  The file
is automatically closed once the context tears down (after the command
finished working).</p>
<p>Files can be opened for reading or writing.  The special value <code class="docutils literal"><span class="pre">-</span></code>
indicates stdin or stdout depending on the mode.</p>
<p>By default, the file is opened for reading text data, but it can also be
opened in binary mode or for writing.  The encoding parameter can be used
to force a specific encoding.</p>
<p>The <cite>lazy</cite> flag controls if the file should be opened immediately or
upon first IO.  The default is to be non lazy for standard input and
output streams as well as files opened for reading, lazy otherwise.</p>
<p>Starting with Click 2.0, files can also be opened atomically in which
case all writes go into a separate file in the same folder and upon
completion the file will be moved over to the original location.  This
is useful if a file regularly read by other users is modified.</p>
<p>See <a class="reference internal" href="index.html#file-args"><span class="std std-ref">File Arguments</span></a> for more information.</p>
</dd></dl>

<dl class="class">
<dt id="click.Path">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Path</code><span class="sig-paren">(</span><em>exists=False</em>, <em>file_okay=True</em>, <em>dir_okay=True</em>, <em>writable=False</em>, <em>readable=True</em>, <em>resolve_path=False</em>, <em>allow_dash=False</em>, <em>path_type=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Path" title="Permalink to this definition">¶</a></dt>
<dd><p>The path type is similar to the <a class="reference internal" href="#click.File" title="click.File"><code class="xref py py-class docutils literal"><span class="pre">File</span></code></a> type but it performs
different checks.  First of all, instead of returning an open file
handle it returns just the filename.  Secondly, it can perform various
basic checks about what the file or directory should be.</p>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 6.0: </span><cite>allow_dash</cite> was added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>exists</strong> &#8211; if set to true, the file or directory needs to exist for
this value to be valid.  If this is not required and a
file does indeed not exist, then all further checks are
silently skipped.</li>
<li><strong>file_okay</strong> &#8211; controls if a file is a possible value.</li>
<li><strong>dir_okay</strong> &#8211; controls if a directory is a possible value.</li>
<li><strong>writable</strong> &#8211; if true, a writable check is performed.</li>
<li><strong>readable</strong> &#8211; if true, a readable check is performed.</li>
<li><strong>resolve_path</strong> &#8211; if this is true, then the path is fully resolved
before the value is passed onwards.  This means
that it&#8217;s absolute and symlinks are resolved.  It
will not expand a tilde-prefix, as this is
supposed to be done by the shell only.</li>
<li><strong>allow_dash</strong> &#8211; If this is set to <cite>True</cite>, a single dash to indicate
standard streams is permitted.</li>
<li><strong>type</strong> &#8211; optionally a string type that should be used to
represent the path.  The default is <cite>None</cite> which
means the return value will be either bytes or
unicode depending on what makes most sense given the
input data Click deals with.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="click.Choice">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Choice</code><span class="sig-paren">(</span><em>choices</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Choice" title="Permalink to this definition">¶</a></dt>
<dd><p>The choice type allows a value to be checked against a fixed set of
supported values.  All of these values have to be strings.</p>
<p>See <a class="reference internal" href="index.html#choice-opts"><span class="std std-ref">Choice Options</span></a> for an example.</p>
</dd></dl>

<dl class="class">
<dt id="click.IntRange">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">IntRange</code><span class="sig-paren">(</span><em>min=None</em>, <em>max=None</em>, <em>clamp=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.IntRange" title="Permalink to this definition">¶</a></dt>
<dd><p>A parameter that works similar to <a class="reference internal" href="#click.INT" title="click.INT"><code class="xref py py-data docutils literal"><span class="pre">click.INT</span></code></a> but restricts
the value to fit into a range.  The default behavior is to fail if the
value falls outside the range, but it can also be silently clamped
between the two edges.</p>
<p>See <a class="reference internal" href="index.html#ranges"><span class="std std-ref">Range Options</span></a> for an example.</p>
</dd></dl>

<dl class="class">
<dt id="click.Tuple">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">Tuple</code><span class="sig-paren">(</span><em>types</em><span class="sig-paren">)</span><a class="headerlink" href="#click.Tuple" title="Permalink to this definition">¶</a></dt>
<dd><p>The default behavior of Click is to apply a type on a value directly.
This works well in most cases, except for when <cite>nargs</cite> is set to a fixed
count and different types should be used for different items.  In this
case the <a class="reference internal" href="#click.Tuple" title="click.Tuple"><code class="xref py py-class docutils literal"><span class="pre">Tuple</span></code></a> type can be used.  This type can only be used
if <cite>nargs</cite> is set to a fixed number.</p>
<p>For more information see <a class="reference internal" href="index.html#tuple-type"><span class="std std-ref">Tuples as Multi Value Options</span></a>.</p>
<p>This can be selected by using a Python tuple literal as a type.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>types</strong> &#8211; a list of types that should be used for the tuple items.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="class">
<dt id="click.ParamType">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">ParamType</code><a class="headerlink" href="#click.ParamType" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper for converting values through types.  The following is
necessary for a valid type:</p>
<ul class="simple">
<li>it needs a name</li>
<li>it needs to pass through None unchanged</li>
<li>it needs to convert from a string</li>
<li>it needs to convert its result type through unchanged
(eg: needs to be idempotent)</li>
<li>it needs to be able to deal with param and context being <cite>None</cite>.
This can be the case when the object is used with prompt
inputs.</li>
</ul>
<dl class="method">
<dt id="click.ParamType.convert">
<code class="descname">convert</code><span class="sig-paren">(</span><em>value</em>, <em>param</em>, <em>ctx</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ParamType.convert" title="Permalink to this definition">¶</a></dt>
<dd><p>Converts the value.  This is not invoked for values that are
<cite>None</cite> (the missing value).</p>
</dd></dl>

<dl class="attribute">
<dt id="click.ParamType.envvar_list_splitter">
<code class="descname">envvar_list_splitter</code><em class="property"> = None</em><a class="headerlink" href="#click.ParamType.envvar_list_splitter" title="Permalink to this definition">¶</a></dt>
<dd><p>if a list of this type is expected and the value is pulled from a
string environment variable, this is what splits it up.  <cite>None</cite>
means any whitespace.  For all parameters the general rule is that
whitespace splits them up.  The exception are paths and files which
are split by <code class="docutils literal"><span class="pre">os.path.pathsep</span></code> by default (&#8221;:&#8221; on Unix and &#8221;;&#8221; on
Windows).</p>
</dd></dl>

<dl class="method">
<dt id="click.ParamType.fail">
<code class="descname">fail</code><span class="sig-paren">(</span><em>message</em>, <em>param=None</em>, <em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ParamType.fail" title="Permalink to this definition">¶</a></dt>
<dd><p>Helper method to fail with an invalid value message.</p>
</dd></dl>

<dl class="method">
<dt id="click.ParamType.get_metavar">
<code class="descname">get_metavar</code><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ParamType.get_metavar" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the metavar default for this param if it provides one.</p>
</dd></dl>

<dl class="method">
<dt id="click.ParamType.get_missing_message">
<code class="descname">get_missing_message</code><span class="sig-paren">(</span><em>param</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ParamType.get_missing_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Optionally might return extra information about a missing
parameter.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
</dd></dl>

<dl class="attribute">
<dt id="click.ParamType.name">
<code class="descname">name</code><em class="property"> = None</em><a class="headerlink" href="#click.ParamType.name" title="Permalink to this definition">¶</a></dt>
<dd><p>the descriptive name of this type</p>
</dd></dl>

<dl class="method">
<dt id="click.ParamType.split_envvar_value">
<code class="descname">split_envvar_value</code><span class="sig-paren">(</span><em>rv</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ParamType.split_envvar_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a value from an environment variable this splits it up
into small chunks depending on the defined envvar list splitter.</p>
<p>If the splitter is set to <cite>None</cite>, which means that whitespace splits,
then leading and trailing whitespace is ignored.  Otherwise, leading
and trailing splitters usually lead to empty items being included.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="exceptions">
<h4>Exceptions<a class="headerlink" href="#exceptions" title="Permalink to this headline">¶</a></h4>
<dl class="exception">
<dt id="click.ClickException">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">ClickException</code><span class="sig-paren">(</span><em>message</em><span class="sig-paren">)</span><a class="headerlink" href="#click.ClickException" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception that Click can handle and show to the user.</p>
</dd></dl>

<dl class="exception">
<dt id="click.Abort">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">Abort</code><a class="headerlink" href="#click.Abort" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal signalling exception that signals Click to abort.</p>
</dd></dl>

<dl class="exception">
<dt id="click.UsageError">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">UsageError</code><span class="sig-paren">(</span><em>message</em>, <em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.UsageError" title="Permalink to this definition">¶</a></dt>
<dd><p>An internal exception that signals a usage error.  This typically
aborts any further handling.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>message</strong> &#8211; the error message to display.</li>
<li><strong>ctx</strong> &#8211; optionally the context that caused this error.  Click will
fill in the context automatically in some situations.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="click.BadParameter">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">BadParameter</code><span class="sig-paren">(</span><em>message</em>, <em>ctx=None</em>, <em>param=None</em>, <em>param_hint=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BadParameter" title="Permalink to this definition">¶</a></dt>
<dd><p>An exception that formats out a standardized error message for a
bad parameter.  This is useful when thrown from a callback or type as
Click will attach contextual information to it (for instance, which
parameter it is).</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 2.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>param</strong> &#8211; the parameter object that caused this error.  This can
be left out, and Click will attach this info itself
if possible.</li>
<li><strong>param_hint</strong> &#8211; a string that shows up as parameter name.  This
can be used as alternative to <cite>param</cite> in cases
where custom validation should happen.  If it is
a string it&#8217;s used as such, if it&#8217;s a list then
each item is quoted and separated.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="click.FileError">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">FileError</code><span class="sig-paren">(</span><em>filename</em>, <em>hint=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.FileError" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if a file cannot be opened.</p>
</dd></dl>

<dl class="exception">
<dt id="click.NoSuchOption">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">NoSuchOption</code><span class="sig-paren">(</span><em>option_name</em>, <em>message=None</em>, <em>possibilities=None</em>, <em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.NoSuchOption" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if click attempted to handle an option that does not
exist.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0.</span></p>
</div>
</dd></dl>

<dl class="exception">
<dt id="click.BadOptionUsage">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">BadOptionUsage</code><span class="sig-paren">(</span><em>option_name</em>, <em>message</em>, <em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BadOptionUsage" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if an option is generally supplied but the use of the option
was incorrect.  This is for instance raised if the number of arguments
for an option is not correct.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0.</span></p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>option_name</strong> &#8211; the name of the option being used incorrectly.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="exception">
<dt id="click.BadArgumentUsage">
<em class="property">exception </em><code class="descclassname">click.</code><code class="descname">BadArgumentUsage</code><span class="sig-paren">(</span><em>message</em>, <em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.BadArgumentUsage" title="Permalink to this definition">¶</a></dt>
<dd><p>Raised if an argument is generally supplied but the use of the argument
was incorrect.  This is for instance raised if the number of values
for an argument is not correct.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 6.0.</span></p>
</div>
</dd></dl>

</div>
<div class="section" id="formatting">
<h4>Formatting<a class="headerlink" href="#formatting" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.HelpFormatter">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">HelpFormatter</code><span class="sig-paren">(</span><em>indent_increment=2</em>, <em>width=None</em>, <em>max_width=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter" title="Permalink to this definition">¶</a></dt>
<dd><p>This class helps with formatting text-based help pages.  It&#8217;s
usually just needed for very special internal cases, but it&#8217;s also
exposed so that developers can write their own fancy outputs.</p>
<p>At present, it always writes into memory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>indent_increment</strong> &#8211; the additional increment for each level.</li>
<li><strong>width</strong> &#8211; the width for the text.  This defaults to the terminal
width clamped to a maximum of 78.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.HelpFormatter.dedent">
<code class="descname">dedent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.dedent" title="Permalink to this definition">¶</a></dt>
<dd><p>Decreases the indentation.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.getvalue">
<code class="descname">getvalue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.getvalue" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the buffer contents.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.indent">
<code class="descname">indent</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.indent" title="Permalink to this definition">¶</a></dt>
<dd><p>Increases the indentation.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.indentation">
<code class="descname">indentation</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.indentation" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that increases the indentation.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.section">
<code class="descname">section</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.section" title="Permalink to this definition">¶</a></dt>
<dd><p>Helpful context manager that writes a paragraph, a heading,
and the indents.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>name</strong> &#8211; the section name that is written as heading.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>string</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a unicode string into the internal buffer.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write_dl">
<code class="descname">write_dl</code><span class="sig-paren">(</span><em>rows</em>, <em>col_max=30</em>, <em>col_spacing=2</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write_dl" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a definition list into the buffer.  This is how options
and commands are usually formatted.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>rows</strong> &#8211; a list of two item tuples for the terms and values.</li>
<li><strong>col_max</strong> &#8211; the maximum width of the first column.</li>
<li><strong>col_spacing</strong> &#8211; the number of spaces between the first and
second column.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write_heading">
<code class="descname">write_heading</code><span class="sig-paren">(</span><em>heading</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write_heading" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a heading into the buffer.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write_paragraph">
<code class="descname">write_paragraph</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write_paragraph" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a paragraph into the buffer.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write_text">
<code class="descname">write_text</code><span class="sig-paren">(</span><em>text</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write_text" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes re-indented text into the buffer.  This rewraps and
preserves paragraphs.</p>
</dd></dl>

<dl class="method">
<dt id="click.HelpFormatter.write_usage">
<code class="descname">write_usage</code><span class="sig-paren">(</span><em>prog</em>, <em>args=''</em>, <em>prefix='Usage: '</em><span class="sig-paren">)</span><a class="headerlink" href="#click.HelpFormatter.write_usage" title="Permalink to this definition">¶</a></dt>
<dd><p>Writes a usage line into the buffer.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>prog</strong> &#8211; the program name.</li>
<li><strong>args</strong> &#8211; whitespace separated list of arguments.</li>
<li><strong>prefix</strong> &#8211; the prefix for the first line.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="click.wrap_text">
<code class="descclassname">click.</code><code class="descname">wrap_text</code><span class="sig-paren">(</span><em>text</em>, <em>width=78</em>, <em>initial_indent=''</em>, <em>subsequent_indent=''</em>, <em>preserve_paragraphs=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.wrap_text" title="Permalink to this definition">¶</a></dt>
<dd><p>A helper function that intelligently wraps text.  By default, it
assumes that it operates on a single paragraph of text but if the
<cite>preserve_paragraphs</cite> parameter is provided it will intelligently
handle paragraphs (defined by two empty lines).</p>
<p>If paragraphs are handled, a paragraph can be prefixed with an empty
line containing the <code class="docutils literal"><span class="pre">\b</span></code> character (<code class="docutils literal"><span class="pre">\x08</span></code>) to indicate that
no rewrapping should happen in that block.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>text</strong> &#8211; the text that should be rewrapped.</li>
<li><strong>width</strong> &#8211; the maximum width for the text.</li>
<li><strong>initial_indent</strong> &#8211; the initial indent that should be placed on the
first line as a string.</li>
<li><strong>subsequent_indent</strong> &#8211; the indent string that should be placed on
each consecutive line.</li>
<li><strong>preserve_paragraphs</strong> &#8211; if this flag is set then the wrapping will
intelligently handle paragraphs.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="parsing">
<h4>Parsing<a class="headerlink" href="#parsing" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.OptionParser">
<em class="property">class </em><code class="descclassname">click.</code><code class="descname">OptionParser</code><span class="sig-paren">(</span><em>ctx=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.OptionParser" title="Permalink to this definition">¶</a></dt>
<dd><p>The option parser is an internal class that is ultimately used to
parse options and arguments.  It&#8217;s modelled after optparse and brings
a similar but vastly simplified API.  It should generally not be used
directly as the high level Click classes wrap it for you.</p>
<p>It&#8217;s not nearly as extensible as optparse or argparse as it does not
implement features that are implemented on a higher level (such as
types or defaults).</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>ctx</strong> &#8211; optionally the <a class="reference internal" href="#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a> where this parser
should go with.</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.OptionParser.add_argument">
<code class="descname">add_argument</code><span class="sig-paren">(</span><em>dest</em>, <em>nargs=1</em>, <em>obj=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.OptionParser.add_argument" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a positional argument named <cite>dest</cite> to the parser.</p>
<p>The <cite>obj</cite> can be used to identify the option in the order list
that is returned from the parser.</p>
</dd></dl>

<dl class="method">
<dt id="click.OptionParser.add_option">
<code class="descname">add_option</code><span class="sig-paren">(</span><em>opts</em>, <em>dest</em>, <em>action=None</em>, <em>nargs=1</em>, <em>const=None</em>, <em>obj=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.OptionParser.add_option" title="Permalink to this definition">¶</a></dt>
<dd><p>Adds a new option named <cite>dest</cite> to the parser.  The destination
is not inferred (unlike with optparse) and needs to be explicitly
provided.  Action can be any of <code class="docutils literal"><span class="pre">store</span></code>, <code class="docutils literal"><span class="pre">store_const</span></code>,
<code class="docutils literal"><span class="pre">append</span></code>, <code class="docutils literal"><span class="pre">appnd_const</span></code> or <code class="docutils literal"><span class="pre">count</span></code>.</p>
<p>The <cite>obj</cite> can be used to identify the option in the order list
that is returned from the parser.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.OptionParser.allow_interspersed_args">
<code class="descname">allow_interspersed_args</code><em class="property"> = None</em><a class="headerlink" href="#click.OptionParser.allow_interspersed_args" title="Permalink to this definition">¶</a></dt>
<dd><p>This controls how the parser deals with interspersed arguments.
If this is set to <cite>False</cite>, the parser will stop on the first
non-option.  Click uses this to implement nested subcommands
safely.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.OptionParser.ctx">
<code class="descname">ctx</code><em class="property"> = None</em><a class="headerlink" href="#click.OptionParser.ctx" title="Permalink to this definition">¶</a></dt>
<dd><p>The <a class="reference internal" href="#click.Context" title="click.Context"><code class="xref py py-class docutils literal"><span class="pre">Context</span></code></a> for this parser.  This might be
<cite>None</cite> for some advanced use cases.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.OptionParser.ignore_unknown_options">
<code class="descname">ignore_unknown_options</code><em class="property"> = None</em><a class="headerlink" href="#click.OptionParser.ignore_unknown_options" title="Permalink to this definition">¶</a></dt>
<dd><p>This tells the parser how to deal with unknown options.  By
default it will error out (which is sensible), but there is a
second mode where it will ignore it and continue processing
after shifting all the unknown options into the resulting args.</p>
</dd></dl>

<dl class="method">
<dt id="click.OptionParser.parse_args">
<code class="descname">parse_args</code><span class="sig-paren">(</span><em>args</em><span class="sig-paren">)</span><a class="headerlink" href="#click.OptionParser.parse_args" title="Permalink to this definition">¶</a></dt>
<dd><p>Parses positional arguments and returns <code class="docutils literal"><span class="pre">(values,</span> <span class="pre">args,</span> <span class="pre">order)</span></code>
for the parsed options and arguments as well as the leftover
arguments if there are any.  The order is a list of objects as they
appear on the command line.  If arguments appear multiple times they
will be memorized multiple times as well.</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="testing">
<h4>Testing<a class="headerlink" href="#testing" title="Permalink to this headline">¶</a></h4>
<dl class="class">
<dt id="click.testing.CliRunner">
<em class="property">class </em><code class="descclassname">click.testing.</code><code class="descname">CliRunner</code><span class="sig-paren">(</span><em>charset=None</em>, <em>env=None</em>, <em>echo_stdin=False</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner" title="Permalink to this definition">¶</a></dt>
<dd><p>The CLI runner provides functionality to invoke a Click command line
script for unittesting purposes in a isolated environment.  This only
works in single-threaded systems without any concurrency as it changes the
global interpreter state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>charset</strong> &#8211; the character set for the input and output data.  This is
UTF-8 by default and should not be changed currently as
the reporting to Click only works in Python 2 properly.</li>
<li><strong>env</strong> &#8211; a dictionary with environment variables for overriding.</li>
<li><strong>echo_stdin</strong> &#8211; if this is set to <cite>True</cite>, then reading from stdin writes
to stdout.  This is useful for showing examples in
some circumstances.  Note that regular prompts
will automatically echo the input.</li>
</ul>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="click.testing.CliRunner.get_default_prog_name">
<code class="descname">get_default_prog_name</code><span class="sig-paren">(</span><em>cli</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner.get_default_prog_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a command object it will return the default program name
for it.  The default is the <cite>name</cite> attribute or <code class="docutils literal"><span class="pre">&quot;root&quot;</span></code> if not
set.</p>
</dd></dl>

<dl class="method">
<dt id="click.testing.CliRunner.invoke">
<code class="descname">invoke</code><span class="sig-paren">(</span><em>cli</em>, <em>args=None</em>, <em>input=None</em>, <em>env=None</em>, <em>catch_exceptions=True</em>, <em>color=False</em>, <em>**extra</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner.invoke" title="Permalink to this definition">¶</a></dt>
<dd><p>Invokes a command in an isolated environment.  The arguments are
forwarded directly to the command line script, the <cite>extra</cite> keyword
arguments are passed to the <code class="xref py py-meth docutils literal"><span class="pre">main()</span></code> function of
the command.</p>
<p>This returns a <a class="reference internal" href="#click.testing.Result" title="click.testing.Result"><code class="xref py py-class docutils literal"><span class="pre">Result</span></code></a> object.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 3.0: </span>The <code class="docutils literal"><span class="pre">catch_exceptions</span></code> parameter was added.</p>
</div>
<div class="versionchanged">
<p><span class="versionmodified">Changed in version 3.0: </span>The result object now has an <cite>exc_info</cite> attribute with the
traceback if available.</p>
</div>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>The <code class="docutils literal"><span class="pre">color</span></code> parameter was added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>cli</strong> &#8211; the command to invoke</li>
<li><strong>args</strong> &#8211; the arguments to invoke</li>
<li><strong>input</strong> &#8211; the input data for <cite>sys.stdin</cite>.</li>
<li><strong>env</strong> &#8211; the environment overrides.</li>
<li><strong>catch_exceptions</strong> &#8211; Whether to catch any other exceptions than
<code class="docutils literal"><span class="pre">SystemExit</span></code>.</li>
<li><strong>extra</strong> &#8211; the keyword arguments to pass to <code class="xref py py-meth docutils literal"><span class="pre">main()</span></code>.</li>
<li><strong>color</strong> &#8211; whether the output should contain color codes. The
application can still override this explicitly.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.testing.CliRunner.isolated_filesystem">
<code class="descname">isolated_filesystem</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner.isolated_filesystem" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that creates a temporary folder and changes
the current working directory to it for isolated filesystem tests.</p>
</dd></dl>

<dl class="method">
<dt id="click.testing.CliRunner.isolation">
<code class="descname">isolation</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwds</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner.isolation" title="Permalink to this definition">¶</a></dt>
<dd><p>A context manager that sets up the isolation for invoking of a
command line tool.  This sets up stdin with the given input data
and <cite>os.environ</cite> with the overrides from the given dictionary.
This also rebinds some internals in Click to be mocked (like the
prompt functionality).</p>
<p>This is automatically done in the <a class="reference internal" href="#click.testing.CliRunner.invoke" title="click.testing.CliRunner.invoke"><code class="xref py py-meth docutils literal"><span class="pre">invoke()</span></code></a> method.</p>
<div class="versionadded">
<p><span class="versionmodified">New in version 4.0: </span>The <code class="docutils literal"><span class="pre">color</span></code> parameter was added.</p>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>input</strong> &#8211; the input stream to put into sys.stdin.</li>
<li><strong>env</strong> &#8211; the environment overrides as dictionary.</li>
<li><strong>color</strong> &#8211; whether the output should contain color codes. The
application can still override this explicitly.</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="click.testing.CliRunner.make_env">
<code class="descname">make_env</code><span class="sig-paren">(</span><em>overrides=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.CliRunner.make_env" title="Permalink to this definition">¶</a></dt>
<dd><p>Returns the environment overrides for invoking a script.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="click.testing.Result">
<em class="property">class </em><code class="descclassname">click.testing.</code><code class="descname">Result</code><span class="sig-paren">(</span><em>runner</em>, <em>output_bytes</em>, <em>exit_code</em>, <em>exception</em>, <em>exc_info=None</em><span class="sig-paren">)</span><a class="headerlink" href="#click.testing.Result" title="Permalink to this definition">¶</a></dt>
<dd><p>Holds the captured result of an invoked CLI script.</p>
<dl class="attribute">
<dt id="click.testing.Result.exc_info">
<code class="descname">exc_info</code><em class="property"> = None</em><a class="headerlink" href="#click.testing.Result.exc_info" title="Permalink to this definition">¶</a></dt>
<dd><p>The traceback</p>
</dd></dl>

<dl class="attribute">
<dt id="click.testing.Result.exception">
<code class="descname">exception</code><em class="property"> = None</em><a class="headerlink" href="#click.testing.Result.exception" title="Permalink to this definition">¶</a></dt>
<dd><p>The exception that happend if one did.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.testing.Result.exit_code">
<code class="descname">exit_code</code><em class="property"> = None</em><a class="headerlink" href="#click.testing.Result.exit_code" title="Permalink to this definition">¶</a></dt>
<dd><p>The exit code as integer.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.testing.Result.output">
<code class="descname">output</code><a class="headerlink" href="#click.testing.Result.output" title="Permalink to this definition">¶</a></dt>
<dd><p>The output as unicode string.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.testing.Result.output_bytes">
<code class="descname">output_bytes</code><em class="property"> = None</em><a class="headerlink" href="#click.testing.Result.output_bytes" title="Permalink to this definition">¶</a></dt>
<dd><p>The output as bytes.</p>
</dd></dl>

<dl class="attribute">
<dt id="click.testing.Result.runner">
<code class="descname">runner</code><em class="property"> = None</em><a class="headerlink" href="#click.testing.Result.runner" title="Permalink to this definition">¶</a></dt>
<dd><p>The runner that created the result</p>
</dd></dl>

</dd></dl>

</div>
</div>
</div>
</div>
<div class="section" id="miscellaneous-pages">
<h2>Miscellaneous Pages<a class="headerlink" href="#miscellaneous-pages" title="Permalink to this headline">¶</a></h2>
<div class="toctree-wrapper compound">
<span id="document-contrib"></span><div class="section" id="click-contrib">
<span id="contrib"></span><h3>click-contrib<a class="headerlink" href="#click-contrib" title="Permalink to this headline">¶</a></h3>
<p>As the userbase of Click grows, more and more major feature requests pop up in
Click&#8217;s bugtracker. As reasonable as it may be for those features to be bundled
with Click instead of being a standalone project, many of those requested
features are either highly experimental or have unproven practical use, while
potentially being a burden to maintain.</p>
<p>This is why <a class="reference external" href="https://github.com/click-contrib/">click-contrib</a> exists. The GitHub organization is a collection of
possibly experimental third-party packages whose featureset does not belong
into Click, but also a playground for major features that may be added to Click
in the future. It is also meant to coordinate and concentrate effort on writing
third-party extensions for Click, and to ease the effort of searching for such
extensions. In that sense it could be described as a low-maintenance
alternative to extension repositories of other frameworks.</p>
<p>Please note that the quality and stability of those packages may be different
than what you expect from Click itself. While published under a common
organization, they are still projects separate from Click.</p>
</div>
<span id="document-changelog"></span><div class="section" id="click-changelog">
<h3>Click Changelog<a class="headerlink" href="#click-changelog" title="Permalink to this headline">¶</a></h3>
<p>This contains all major version changes between Click releases.</p>
<div class="section" id="version-7-0">
<h4>Version 7.0<a class="headerlink" href="#version-7-0" title="Permalink to this headline">¶</a></h4>
<p>(upcoming release with new features, release date to be decided)</p>
<ul class="simple">
<li>The exception objects now store unicode properly.</li>
<li>Added the ability to hide commands and options from help.</li>
</ul>
</div>
<div class="section" id="version-6-4">
<h4>Version 6.4<a class="headerlink" href="#version-6-4" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release; released on March 24th 2016)</p>
<ul class="simple">
<li>Fix bug in bash completion where click would discard one or more trailing
arguments. See #471.</li>
</ul>
</div>
<div class="section" id="version-6-3">
<h4>Version 6.3<a class="headerlink" href="#version-6-3" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release; released on February 22 2016)</p>
<ul class="simple">
<li>Fix argument checks for interpreter invoke with <cite>-m</cite> and <cite>-c</cite>
on Windows.</li>
<li>Fixed a bug that cased locale detection to error out on Python 3.</li>
</ul>
</div>
<div class="section" id="version-6-2">
<h4>Version 6.2<a class="headerlink" href="#version-6-2" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on November 27th 2015)</p>
<ul class="simple">
<li>Correct fix for hidden progress bars.</li>
</ul>
</div>
<div class="section" id="version-6-1">
<h4>Version 6.1<a class="headerlink" href="#version-6-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on November 27th 2015)</p>
<ul class="simple">
<li>Resolved an issue with invisible progress bars no longer rendering.</li>
<li>Disable chain commands with subcommands as they were inherently broken.</li>
<li>Fix <cite>MissingParameter</cite> not working without parameters passed.</li>
</ul>
</div>
<div class="section" id="version-6-0">
<h4>Version 6.0<a class="headerlink" href="#version-6-0" title="Permalink to this headline">¶</a></h4>
<p>(codename &#8220;pow pow&#8221;, released on November 24th 2015)</p>
<ul class="simple">
<li>Optimized the progressbar rendering to not render when it did not
actually change.</li>
<li>Explicitly disallow nargs=-1 with a set default.</li>
<li>The context is now closed before it&#8217;s popped from the stack.</li>
<li>Added support for short aliases for the false flag on toggles.</li>
<li>Click will now attempt to aid you with debugging locale errors
better by listing with the help of the OS what locales are
available.</li>
<li>Click used to return byte strings on Python 2 in some unit-testing
situations.  This has been fixed to correctly return unicode strings
now.</li>
<li>For Windows users on Python 2, Click will now handle Unicode more
correctly handle Unicode coming in from the system.  This also has
the disappointing side effect that filenames will now be always
unicode by default in the <cite>Path</cite> type which means that this can
introduce small bugs for code not aware of this.</li>
<li>Added a <cite>type</cite> parameter to <cite>Path</cite> to force a specific string type
on the value.</li>
<li>For users running Python on Windows the <cite>echo</cite>) and <cite>prompt</cite> functions
now work with full unicode functionality in the Python windows console
by emulating an output stream.  This also applies to getting the
virtual output and input streams via <cite>click.get_text_stream(...)</cite>.</li>
<li>Unittests now always force a certain virtual terminal width.</li>
<li>Added support for allowing dashes to indicate standard streams to the
<cite>Path</cite> type.</li>
<li>Multi commands in chain mode no longer propagate arguments left over
from parsing to the callbacks.  It&#8217;s also now disallowed through an
exception when optional arguments are attached to multi commands if chain
mode is enabled.</li>
<li>Relaxed restriction that disallowed chained commands to have other
chained commands as child commands.</li>
<li>Arguments with positive nargs can now have defaults implemented.
Previously this configuration would often result in slightly unexpected
values be returned.</li>
</ul>
</div>
<div class="section" id="version-5-1">
<h4>Version 5.1<a class="headerlink" href="#version-5-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on 17th August 2015)</p>
<ul class="simple">
<li>Fix a bug in <cite>pass_obj</cite> that would accidentally pass the context too.</li>
</ul>
</div>
<div class="section" id="version-5-0">
<h4>Version 5.0<a class="headerlink" href="#version-5-0" title="Permalink to this headline">¶</a></h4>
<p>(codename &#8220;tok tok&#8221;, released on 16th August 2015)</p>
<ul class="simple">
<li>Removed various deprecated functionality.</li>
<li>Atomic files now only accept the <cite>w</cite> mode.</li>
<li>Change the usage part of help output for very long commands to wrap
their arguments onto the next line, indented by 4 spaces.</li>
<li>Fix a bug where return code and error messages were incorrect when
using <code class="docutils literal"><span class="pre">CliRunner</span></code>.</li>
<li>added <cite>get_current_context</cite>.</li>
<li>added a <cite>meta</cite> dictionary to the context which is shared across the
linked list of contexts to allow click utilities to place state there.</li>
<li>introduced <cite>Context.scope</cite>.</li>
<li>The <cite>echo</cite> function is now threadsafe: It calls the <cite>write</cite> method of the
underlying object only once.</li>
<li><cite>prompt(hide_input=True)</cite> now prints a newline on <cite>^C</cite>.</li>
<li>Click will now warn if users are using <code class="docutils literal"><span class="pre">unicode_literals</span></code>.</li>
<li>Click will now ignore the <code class="docutils literal"><span class="pre">PAGER</span></code> environment variable if it is empty or
contains only whitespace.</li>
<li>The <cite>click-contrib</cite> GitHub organization was created.</li>
</ul>
</div>
<div class="section" id="version-4-1">
<h4>Version 4.1<a class="headerlink" href="#version-4-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on July 14th 2015)</p>
<ul class="simple">
<li>Fix a bug where error messages would include a trailing <cite>None</cite> string.</li>
<li>Fix a bug where Click would crash on docstrings with trailing newlines.</li>
<li>Support streams with encoding set to <cite>None</cite> on Python 3 by barfing with
a better error.</li>
<li>Handle ^C in less-pager properly.</li>
<li>Handle return value of <cite>None</cite> from <cite>sys.getfilesystemencoding</cite></li>
<li>Fix crash when writing to unicode files with <cite>click.echo</cite>.</li>
<li>Fix type inference with multiple options.</li>
</ul>
</div>
<div class="section" id="version-4-0">
<h4>Version 4.0<a class="headerlink" href="#version-4-0" title="Permalink to this headline">¶</a></h4>
<p>(codename &#8220;zoom zoom&#8221;, released on March 31st 2015)</p>
<ul class="simple">
<li>Added <cite>color</cite> parameters to lots of interfaces that directly or indirectly
call into echoing.  This previously was always autodetection (with the
exception of the <cite>echo_via_pager</cite> function).  Now you can forcefully
enable or disable it, overriding the auto detection of Click.</li>
<li>Added an <cite>UNPROCESSED</cite> type which does not perform any type changes which
simplifies text handling on 2.x / 3.x in some special advanced usecases.</li>
<li>Added <cite>NoSuchOption</cite> and <cite>BadOptionUsage</cite> exceptions for more generic
handling of errors.</li>
<li>Added support for handling of unprocessed options which can be useful in
situations where arguments are forwarded to underlying tools.</li>
<li>Added <cite>max_content_width</cite> parameter to the context which can be used to
change the maximum width of help output.  By default Click will not format
content for more than 80 characters width.</li>
<li>Added support for writing prompts to stderr.</li>
<li>Fix a bug when showing the default for multiple arguments.</li>
<li>Added support for custom subclasses to <cite>option</cite> and <cite>argument</cite>.</li>
<li>Fix bug in <code class="docutils literal"><span class="pre">clear()</span></code> on Windows when colorama is installed.</li>
<li>Reject <code class="docutils literal"><span class="pre">nargs=-1</span></code> for options properly.  Options cannot be variadic.</li>
<li>Fixed an issue with bash completion not working properly for commands with
non ASCII characters or dashes.</li>
<li>Added a way to manually update the progressbar.</li>
<li>Changed the formatting of missing arguments.  Previously the internal
argument name was shown in error messages, now the metavar is shown if
passed.  In case an automated metavar is selected, it&#8217;s stripped of
extra formatting first.</li>
</ul>
</div>
<div class="section" id="version-3-3">
<h4>Version 3.3<a class="headerlink" href="#version-3-3" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on September 8th 2014)</p>
<ul class="simple">
<li>Fixed an issue with error reporting on Python 3 for invalid forwarding
of commands.</li>
</ul>
</div>
<div class="section" id="version-3-2">
<h4>Version 3.2<a class="headerlink" href="#version-3-2" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on August 22nd 2014)</p>
<ul class="simple">
<li>Added missing <cite>err</cite> parameter forwarding to the <cite>secho</cite> function.</li>
<li>Fixed default parameters not being handled properly by the context
invoke method.  This is a backwards incompatible change if the function
was used improperly.  See <a class="reference internal" href="index.html#upgrade-to-3-2"><span class="std std-ref">Upgrading to 3.2</span></a> for more information.</li>
<li>Removed the <cite>invoked_subcommands</cite> attribute largely.  It is not possible
to provide it to work error free due to how the parsing works so this
API has been deprecated.  See <a class="reference internal" href="index.html#upgrade-to-3-2"><span class="std std-ref">Upgrading to 3.2</span></a> for more information.</li>
<li>Restored the functionality of <cite>invoked_subcommand</cite> which was broken as
a regression in 3.1.</li>
</ul>
</div>
<div class="section" id="version-3-1">
<h4>Version 3.1<a class="headerlink" href="#version-3-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on August 13th 2014)</p>
<ul class="simple">
<li>Fixed a regression that caused contexts of subcommands to be
created before the parent command was invoked which was a
regression from earlier Click versions.</li>
</ul>
</div>
<div class="section" id="version-3-0">
<h4>Version 3.0<a class="headerlink" href="#version-3-0" title="Permalink to this headline">¶</a></h4>
<p>(codename &#8220;clonk clonk&#8221;, released on August 12th 2014)</p>
<ul class="simple">
<li>formatter now no longer attempts to accomodate for terminals
smaller than 50 characters.  If that happens it just assumes
a minimal width.</li>
<li>added a way to not swallow exceptions in the test system.</li>
<li>added better support for colors with pagers and ways to
override the autodetection.</li>
<li>the CLI runner&#8217;s result object now has a traceback attached.</li>
<li>improved automatic short help detection to work better with
dots that do not terminate sentences.</li>
<li>when definining options without actual valid option strings
now, Click will give an error message instead of silently
passing.  This should catch situations where users wanted to
created arguments instead of options.</li>
<li>Restructured Click internally to support vendoring.</li>
<li>Added support for multi command chaining.</li>
<li>Added support for defaults on options with <cite>multiple</cite> and
options and arguments with <cite>nargs != 1</cite>.</li>
<li>label passed to <cite>progressbar</cite> is no longer rendered with
whitespace stripped.</li>
<li>added a way to disable the standalone mode of the <cite>main</cite>
method on a Click command to be able to handle errors better.</li>
<li>added support for returning values from command callbacks.</li>
<li>added simplifications for printing to stderr from <cite>echo</cite>.</li>
<li>added result callbacks for groups.</li>
<li>entering a context multiple times defers the cleanup until
the last exit occurs.</li>
<li>added <cite>open_file</cite>.</li>
</ul>
</div>
<div class="section" id="version-2-6">
<h4>Version 2.6<a class="headerlink" href="#version-2-6" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on August 11th 2014)</p>
<ul class="simple">
<li>Fixed an issue where the wrapped streams on Python 3 would be reporting
incorrect values for seekable.</li>
</ul>
</div>
<div class="section" id="version-2-5">
<h4>Version 2.5<a class="headerlink" href="#version-2-5" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on July 28th 2014)</p>
<ul class="simple">
<li>Fixed a bug with text wrapping on Python 3.</li>
</ul>
</div>
<div class="section" id="version-2-4">
<h4>Version 2.4<a class="headerlink" href="#version-2-4" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on July 4th 2014)</p>
<ul class="simple">
<li>Corrected a bug in the change of the help option in 2.3.</li>
</ul>
</div>
<div class="section" id="version-2-3">
<h4>Version 2.3<a class="headerlink" href="#version-2-3" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on July 3rd 2014)</p>
<ul class="simple">
<li>Fixed an incorrectly formatted help record for count options.&#8217;</li>
<li>Add support for ansi code stripping on Windows if colorama
is not available.</li>
<li>restored the Click 1.0 handling of the help parameter for certain
edge cases.</li>
</ul>
</div>
<div class="section" id="version-2-2">
<h4>Version 2.2<a class="headerlink" href="#version-2-2" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on June 26th 2014)</p>
<ul class="simple">
<li>fixed tty detection on PyPy.</li>
<li>fixed an issue that progress bars were not rendered when the
context manager was entered.</li>
</ul>
</div>
<div class="section" id="version-2-1">
<h4>Version 2.1<a class="headerlink" href="#version-2-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on June 14th 2014)</p>
<ul class="simple">
<li>fixed the <a class="reference internal" href="index.html#click.launch" title="click.launch"><code class="xref py py-func docutils literal"><span class="pre">launch()</span></code></a> function on windows.</li>
<li>improved the colorama support on windows to try hard to not
screw up the console if the application is interrupted.</li>
<li>fixed windows terminals incorrectly being reported to be 80
characters wide instead of 79</li>
<li>use colorama win32 bindings if available to get the correct
dimensions of a windows terminal.</li>
<li>fixed an issue with custom function types on Python 3.</li>
<li>fixed an issue with unknown options being incorrectly reported
in error messages.</li>
</ul>
</div>
<div class="section" id="version-2-0">
<h4>Version 2.0<a class="headerlink" href="#version-2-0" title="Permalink to this headline">¶</a></h4>
<p>(codename &#8220;tap tap tap&#8221;, released on June 6th 2014)</p>
<ul class="simple">
<li>added support for opening stdin/stdout on Windows in
binary mode correctly.</li>
<li>added support for atomic writes to files by going through
a temporary file.</li>
<li>introduced <a class="reference internal" href="index.html#click.BadParameter" title="click.BadParameter"><code class="xref py py-exc docutils literal"><span class="pre">BadParameter</span></code></a> which can be used to easily perform
custom validation with the same error messages as in the type system.</li>
<li>added <a class="reference internal" href="index.html#click.progressbar" title="click.progressbar"><code class="xref py py-func docutils literal"><span class="pre">progressbar()</span></code></a>; a function to show progress bars.</li>
<li>added <a class="reference internal" href="index.html#click.get_app_dir" title="click.get_app_dir"><code class="xref py py-func docutils literal"><span class="pre">get_app_dir()</span></code></a>; a function to calculate the home folder
for configs.</li>
<li>Added transparent handling for ANSI codes into the <a class="reference internal" href="index.html#click.echo" title="click.echo"><code class="xref py py-func docutils literal"><span class="pre">echo()</span></code></a>
function through <cite>colorama</cite>.</li>
<li>Added <a class="reference internal" href="index.html#click.clear" title="click.clear"><code class="xref py py-func docutils literal"><span class="pre">clear()</span></code></a> function.</li>
<li>Breaking change: parameter callbacks now get the parameter object
passed as second argument.  There is legacy support for old callbacks
which will warn but still execute the script.</li>
<li>Added <a class="reference internal" href="index.html#click.style" title="click.style"><code class="xref py py-func docutils literal"><span class="pre">style()</span></code></a>, <a class="reference internal" href="index.html#click.unstyle" title="click.unstyle"><code class="xref py py-func docutils literal"><span class="pre">unstyle()</span></code></a> and <a class="reference internal" href="index.html#click.secho" title="click.secho"><code class="xref py py-func docutils literal"><span class="pre">secho()</span></code></a> for ANSI
styles.</li>
<li>Added an <a class="reference internal" href="index.html#click.edit" title="click.edit"><code class="xref py py-func docutils literal"><span class="pre">edit()</span></code></a> function that invokes the default editor.</li>
<li>Added an <a class="reference internal" href="index.html#click.launch" title="click.launch"><code class="xref py py-func docutils literal"><span class="pre">launch()</span></code></a> function that launches browsers and applications.</li>
<li>nargs of -1 for arguments can now be forced to be a single item through
the required flag.  It defaults to not required.</li>
<li>setting a default for arguments now implicitly makes it non required.</li>
<li>changed &#8220;yN&#8221; / &#8220;Yn&#8221; to &#8220;y/N&#8221; and &#8220;Y/n&#8221; in confirmation prompts.</li>
<li>added basic support for bash completion.</li>
<li>added <a class="reference internal" href="index.html#click.getchar" title="click.getchar"><code class="xref py py-func docutils literal"><span class="pre">getchar()</span></code></a> to fetch a single character from the terminal.</li>
<li>errors now go to stderr as intended.</li>
<li>fixed various issues with more exotic parameter formats like DOS/Windows
style arguments.</li>
<li>added <a class="reference internal" href="index.html#click.pause" title="click.pause"><code class="xref py py-func docutils literal"><span class="pre">pause()</span></code></a> which works similar to the Windows <code class="docutils literal"><span class="pre">pause</span></code> cmd
built-in but becomes an automatic noop if the application is not run
through a terminal.</li>
<li>added a bit of extra information about missing choice parameters.</li>
<li>changed how the help function is implemented to allow global overriding
of the help option.</li>
<li>added support for token normalization to implement case insensitive handling.</li>
<li>added support for providing defaults for context settings.</li>
</ul>
</div>
<div class="section" id="version-1-1">
<h4>Version 1.1<a class="headerlink" href="#version-1-1" title="Permalink to this headline">¶</a></h4>
<p>(bugfix release, released on May 23rd 2014)</p>
<ul class="simple">
<li>fixed a bug that caused text files in Python 2 to not accept
native strings.</li>
</ul>
</div>
<div class="section" id="version-1-0">
<h4>Version 1.0<a class="headerlink" href="#version-1-0" title="Permalink to this headline">¶</a></h4>
<p>(no codename, released on May 21st 2014)</p>
<ul class="simple">
<li>Initial release.</li>
</ul>
</div>
</div>
<span id="document-upgrading"></span><div class="section" id="upgrading-to-newer-releases">
<h3>Upgrading To Newer Releases<a class="headerlink" href="#upgrading-to-newer-releases" title="Permalink to this headline">¶</a></h3>
<p>Click attempts the highest level of backwards compatibility but sometimes
this is not entirely possible.  In case we need to break backwards
compatibility this document gives you information about how to upgrade or
handle backwards compatibility properly.</p>
<div class="section" id="upgrading-to-3-2">
<span id="upgrade-to-3-2"></span><h4>Upgrading to 3.2<a class="headerlink" href="#upgrading-to-3-2" title="Permalink to this headline">¶</a></h4>
<p>Click 3.2 had to perform two changes to multi commands which were
triggered by a change between Click 2 and Click 3 that had bigger
consequences than anticipated.</p>
<div class="section" id="context-invokes">
<h5>Context Invokes<a class="headerlink" href="#context-invokes" title="Permalink to this headline">¶</a></h5>
<p>Click 3.2 contains a fix for the <code class="xref py py-meth docutils literal"><span class="pre">Context.invoke()</span></code> function when used
with other commands.  The original intention of this function was to
invoke the other command as as if it came from the command line when it
was passed a context object instead of a function.  This use was only
documented in a single place in the documentation before and there was no
proper explanation for the method in the API documentation.</p>
<p>The core issue is that before 3.2 this call worked against intentions:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">other_command</span><span class="p">,</span> <span class="s1">&#39;arg1&#39;</span><span class="p">,</span> <span class="s1">&#39;arg2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This was never intended to work as it does not allow Click to operate on
the parameters.  Given that this pattern was never documented and ill
intended the decision was made to change this behavior in a bugfix release
before it spreads by accident and developers depend on it.</p>
<p>The correct invocation for the above command is the following:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="n">ctx</span><span class="o">.</span><span class="n">invoke</span><span class="p">(</span><span class="n">other_command</span><span class="p">,</span> <span class="n">name_of_arg1</span><span class="o">=</span><span class="s1">&#39;arg1&#39;</span><span class="p">,</span> <span class="n">name_of_arg2</span><span class="o">=</span><span class="s1">&#39;arg2&#39;</span><span class="p">)</span>
</pre></div>
</div>
<p>This also allowed us to fix the issue that defaults were not handled
properly by this function.</p>
</div>
<div class="section" id="multicommand-chaining-api">
<h5>Multicommand Chaining API<a class="headerlink" href="#multicommand-chaining-api" title="Permalink to this headline">¶</a></h5>
<p>Click 3 introduced multicommand chaning.  This required a change in how
Click internally dispatches.  Unfortunately this change was not correctly
implemented and it appeared that it was possible to provide an API that
can inform the super command about all the subcommands that will be
invoked.</p>
<p>This assumption however does not work with one of the API guarantees that
have been given in the past.  As such this functionality has been removed
in 3.2 as it was already broken.  Instead the accidentally broken
functionality of the <code class="xref py py-attr docutils literal"><span class="pre">Context.invoked_subcommand</span></code> attribute was
restored.</p>
<p>If you do require the know which exact commands will be invoked there are
different ways to cope with this.  The first one is to let the subcommands
all return functions and then to invoke the functions in a
<code class="xref py py-meth docutils literal"><span class="pre">Context.resultcallback()</span></code>.</p>
</div>
</div>
<div class="section" id="upgrading-to-2-0">
<span id="upgrade-to-2-0"></span><h4>Upgrading to 2.0<a class="headerlink" href="#upgrading-to-2-0" title="Permalink to this headline">¶</a></h4>
<p>Click 2.0 has one breaking change which is the signature for parameter
callbacks.  Before 2.0, the callback was invoked with <code class="docutils literal"><span class="pre">(ctx,</span> <span class="pre">value)</span></code>
whereas now it&#8217;s <code class="docutils literal"><span class="pre">(ctx,</span> <span class="pre">param,</span> <span class="pre">value)</span></code>.  This change was necessary as it
otherwise made reusing callbacks too complicated.</p>
<p>To ease the transition Click will still accept old callbacks.  Starting
with Click 3.0 it will start to issue a warning to stderr to encourage you
to upgrade.</p>
<p>In case you want to support both Click 1.0 and Click 2.0, you can make a
simple decorator that adjusts the signatures:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">click</span>
<span class="kn">from</span> <span class="nn">functools</span> <span class="k">import</span> <span class="n">update_wrapper</span>

<span class="k">def</span> <span class="nf">compatcallback</span><span class="p">(</span><span class="n">f</span><span class="p">):</span>
    <span class="c1"># Click 1.0 does not have a version string stored, so we need to</span>
    <span class="c1"># use getattr here to be safe.</span>
    <span class="k">if</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">click</span><span class="p">,</span> <span class="s1">&#39;__version__&#39;</span><span class="p">,</span> <span class="s1">&#39;0.0&#39;</span><span class="p">)</span> <span class="o">&gt;=</span> <span class="s1">&#39;2.0&#39;</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">f</span>
    <span class="k">return</span> <span class="n">update_wrapper</span><span class="p">(</span><span class="k">lambda</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">value</span><span class="p">:</span> <span class="n">f</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">value</span><span class="p">),</span> <span class="n">f</span><span class="p">)</span>
</pre></div>
</div>
<p>With that helper you can then write something like this:</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="nd">@compatcallback</span>
<span class="k">def</span> <span class="nf">callback</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">param</span><span class="p">,</span> <span class="n">value</span><span class="p">):</span>
    <span class="k">return</span> <span class="n">value</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>
</pre></div>
</div>
<p>Note that because Click 1.0 did not pass a parameter, the <cite>param</cite> argument
here would be <cite>None</cite>, so a compatibility callback could not use that
argument.</p>
</div>
</div>
<span id="document-license"></span><div class="section" id="license">
<h3>License<a class="headerlink" href="#license" title="Permalink to this headline">¶</a></h3>
<p>Click is licensed under a three-clause BSD License.  It basically means:
do whatever you want with it as long as the copyright in Click sticks
around, the conditions are not modified and the disclaimer is present.
Furthermore, you must not use the names of the authors to promote derivatives
of the software without written consent.</p>
<div class="section" id="license-text">
<h4>License Text<a class="headerlink" href="#license-text" title="Permalink to this headline">¶</a></h4>
<p>Copyright (c) 2014 by Armin Ronacher.</p>
<p>Click uses parts of optparse written by Gregory P. Ward and maintained by the
Python software foundation.  This is limited to code in the parser.py
module:</p>
<p>Copyright (c) 2001-2006 Gregory P. Ward.  All rights reserved.
Copyright (c) 2002-2006 Python Software Foundation.  All rights reserved.</p>
<p>Some rights reserved.</p>
<p>Redistribution and use in source and binary forms, with or without
modification, are permitted provided that the following conditions are
met:</p>
<blockquote>
<div><ul class="simple">
<li>Redistributions of source code must retain the above copyright
notice, this list of conditions and the following disclaimer.</li>
<li>Redistributions in binary form must reproduce the above
copyright notice, this list of conditions and the following
disclaimer in the documentation and/or other materials provided
with the distribution.</li>
<li>The names of the contributors may not be used to endorse or
promote products derived from this software without specific
prior written permission.</li>
</ul>
</div></blockquote>
<p>THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
&#8220;AS IS&#8221; AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
(INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.</p>
</div>
</div>
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper"><h3>About</h3>
<p>
  Click is a Python package for creating beautiful command line interfaces in a
  composable way with as little amount of code as necessary. It’s the “Command
  Line Interface Creation Kit”.
</p>
<h3>Useful Links</h3>
<ul>
  <li><a href="http://click.pocoo.org/">The Click Website</a></li>
  <li><a href="http://pypi.python.org/pypi/click">click @ PyPI</a></li>
  <li><a href="http://github.com/mitsuhiko/click">click @ github</a></li>
  <li><a href="http://github.com/mitsuhiko/click/issues">Issue Tracker</a></li>
</ul>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, Armin Ronacher.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
    </div>

    

    
  </body>
</html>